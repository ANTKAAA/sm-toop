<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>المستقبل للتسويق العقاري - الوساطة العقارية</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #4f46e5;
            --primary-dark: #4338ca;
            --secondary: #10b981;
            --secondary-dark: #059669;
            --accent: #f59e0b;
            --accent-dark: #d97706;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            padding-top: 40px;
        }
        
        .moving-announcement {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background: linear-gradient(45deg, #4f46e5, #7c3aed, #ec4899);
            color: white;
            padding: 8px 0;
            z-index: 1000;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }
        
        .announcement-text {
            display: inline-block;
            white-space: nowrap;
            animation: scroll-right 20s linear infinite;
            font-weight: bold;
            font-size: 14px;
        }
        
        @keyframes scroll-right {
            0% {
                transform: translateX(-100%);
            }
            100% {
                transform: translateX(100vw);
            }
        }
        
        .property-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .property-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }
        
        .form-section {
            display: none;
        }
        
        .form-section.active {
            display: block;
        }
        
        .price-warning {
            background: linear-gradient(45deg, #fef3c7, #fde68a);
            border-right: 4px solid #f59e0b;
        }
        
        .admin-tab {
            display: none;
        }
        
        .admin-tab.active {
            display: block;
        }
        
        .admin-tab-btn.active {
            background-color: #7c3aed !important;
            color: white !important;
        }
        
        .btn-primary {
            background-color: var(--primary);
            color: white;
        }
        
        .btn-primary:hover {
            background-color: var(--primary-dark);
        }
        
        .btn-secondary {
            background-color: var(--secondary);
            color: white;
        }
        
        .btn-secondary:hover {
            background-color: var(--secondary-dark);
        }
        
        .btn-accent {
            background-color: var(--accent);
            color: white;
        }
        
        .btn-accent:hover {
            background-color: var(--accent-dark);
        }
        
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .fade-in {
            animation: fadeIn 0.5s;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .image-preview {
            width: 100px;
            height: 100px;
            object-fit: cover;
            border-radius: 8px;
            margin: 5px;
            border: 2px solid #ddd;
        }

        .featured-badge {
            position: absolute;
            top: 10px;
            left: 10px;
            background: linear-gradient(45deg, #ff6b6b, #ffa500);
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
            z-index: 10;
        }

        .status-badge {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: bold;
        }

        .status-new { background: #dbeafe; color: #1e40af; }
        .status-contacted { background: #fef3c7; color: #d97706; }
        .status-followup { background: #fce7f3; color: #be185d; }
        .status-sold { background: #dcfce7; color: #166534; }

        .property-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 8px;
            margin-bottom: 10px;
        }

        .admin-login-info {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 8px;
            margin-top: 10px;
            border-right: 4px solid #007cba;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen">
    <!-- إعلان متحرك -->
    <div class="moving-announcement">
        <div class="announcement-text">
            🌟 صلِّ على محمد ﷺ 🌟 تم إدارة التسويق للموقع من TopMarketing 🌟 للتواصل: 01091020887 🌟 المستقبل للتسويق العقاري - منصتك الموثوقة 🌟
        </div>
    </div>
    
    <!-- Header -->
    <header class="bg-white shadow-lg sticky top-0 z-40">
        <div class="container mx-auto px-4 py-4">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <h1 class="text-3xl md:text-4xl font-bold text-blue-800 mb-4 md:mb-0" onclick="adminClickCount()" style="cursor: pointer;">
                    <i class="fas fa-home mr-2"></i>المستقبل للتسويق العقاري
                </h1>
                <nav class="flex flex-wrap gap-2 justify-center">
                    <button onclick="showSection('home')" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors text-sm">
                        <i class="fas fa-home mr-1"></i>بيع أو شراء عقار
                    </button>
                    <button onclick="showSection('listings')" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors text-sm">
                        <i class="fas fa-list mr-1"></i>العقارات المتاحة
                    </button>
                    <button onclick="showSection('services')" class="bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700 transition-colors text-sm">
                        <i class="fas fa-tools mr-1"></i>خدمات المقاولات
                    </button>
                </nav>
            </div>
        </div>
    </header>

    <!-- Home Section -->
    <main id="home-section" class="container mx-auto px-4 py-8">
        <div class="text-center mb-12 fade-in">
            <h2 class="text-3xl font-bold text-gray-800 mb-4">مرحباً بك في المستقبل للتسويق العقاري</h2>
            <p class="text-xl text-gray-600">منصتك الموثوقة للوساطة العقارية</p>
        </div>

        <!-- العقارات المميزة -->
        <div class="max-w-6xl mx-auto mb-12">
            <div class="text-center mb-8">
                <h2 class="text-3xl font-bold text-yellow-600 mb-4">⭐ العقارات المميزة</h2>
            </div>
            <div id="featured-properties" class="grid md:grid-cols-3 gap-6">
                <!-- العقارات المميزة سيتم تحميلها هنا -->
            </div>
        </div>

        <div class="grid md:grid-cols-2 gap-8 max-w-6xl mx-auto mb-12">
            <!-- Seller Section -->
            <div class="property-card bg-white rounded-2xl shadow-xl p-8 border-t-4 border-green-500">
                <div class="text-center mb-6">
                    <div class="text-6xl mb-4">🏡</div>
                    <h3 class="text-2xl font-bold text-green-700 mb-2">بائع عقار</h3>
                    <p class="text-gray-600">قم ببيع عقارك بأفضل الأسعار</p>
                </div>
                <button onclick="showSellerForm()" class="w-full bg-green-600 text-white py-4 rounded-xl text-lg font-semibold hover:bg-green-700 transition-colors">
                    ابدأ بيع عقارك الآن
                </button>
            </div>

            <!-- Buyer Section -->
            <div class="property-card bg-white rounded-2xl shadow-xl p-8 border-t-4 border-blue-500">
                <div class="text-center mb-6">
                    <div class="text-6xl mb-4">🔍</div>
                    <h3 class="text-2xl font-bold text-blue-700 mb-2">شاري عقار</h3>
                    <p class="text-gray-600">ابحث عن العقار المناسب لك</p>
                </div>
                <button onclick="showBuyerForm()" class="w-full bg-blue-600 text-white py-4 rounded-xl text-lg font-semibold hover:bg-blue-700 transition-colors">
                    ابحث عن عقارك المثالي
                </button>
            </div>
        </div>

        <!-- Contracting Services Section -->
        <div class="max-w-6xl mx-auto" id="contracting-services-section">
            <div class="text-center mb-8">
                <h2 class="text-3xl font-bold text-orange-700 mb-4">🏗️ خدمات التشطيب والمقاولات</h2>
                <p class="text-xl text-gray-600">خدمات متكاملة للتصميم والتشطيب والمقاولات</p>
            </div>
            
            <div id="home-services-grid" class="grid md:grid-cols-3 gap-6">
                <!-- Services will be loaded here -->
            </div>
        </div>
    </main>

    <!-- Seller Form Section -->
    <div id="seller-section" class="form-section container mx-auto px-4 py-8">
        <div class="max-w-4xl mx-auto bg-white rounded-2xl shadow-xl p-8">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-3xl font-bold text-green-700">نموذج بيع العقار</h2>
                <button onclick="showSection('home')" class="text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times text-2xl"></i>
                </button>
            </div>
            
            <form id="seller-form" onsubmit="submitSellerForm(event)">
                <!-- Property Type Selection -->
                <div class="mb-8">
                    <label class="block text-lg font-semibold text-gray-700 mb-4">نوع العقار</label>
                    <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                        <button type="button" onclick="selectPropertyType('apartment')" class="property-type-btn p-4 border-2 border-gray-300 rounded-lg hover:border-green-500 hover:bg-green-50 transition-colors">
                            <div class="text-2xl mb-2">🏠</div>
                            <div class="font-semibold">شقة</div>
                        </button>
                        <button type="button" onclick="selectPropertyType('house')" class="property-type-btn p-4 border-2 border-gray-300 rounded-lg hover:border-green-500 hover:bg-green-50 transition-colors">
                            <div class="text-2xl mb-2">🏘️</div>
                            <div class="font-semibold">بيت</div>
                        </button>
                        <button type="button" onclick="selectPropertyType('land')" class="property-type-btn p-4 border-2 border-gray-300 rounded-lg hover:border-green-500 hover:bg-green-50 transition-colors">
                            <div class="text-2xl mb-2">🌾</div>
                            <div class="font-semibold">أرض</div>
                        </button>
                        <button type="button" onclick="selectPropertyType('villa')" class="property-type-btn p-4 border-2 border-gray-300 rounded-lg hover:border-green-500 hover:bg-green-50 transition-colors">
                            <div class="text-2xl mb-2">🏰</div>
                            <div class="font-semibold">فيلا</div>
                        </button>
                        <button type="button" onclick="selectPropertyType('shop')" class="property-type-btn p-4 border-2 border-gray-300 rounded-lg hover:border-green-500 hover:bg-green-50 transition-colors">
                            <div class="text-2xl mb-2">🏪</div>
                            <div class="font-semibold">محل</div>
                        </button>
                    </div>
                </div>

                <!-- Location Selection -->
                <div class="mb-8">
                    <label class="block text-lg font-semibold text-gray-700 mb-4">الموقع</label>
                    <select id="seller-location" class="w-full p-4 border-2 border-gray-300 rounded-lg focus:border-green-500 focus:outline-none" required>
                        <option value="">اختر الموقع</option>
                        <option value="damanhour">دمنهور</option>
                        <option value="kom-hamada">كوم حمادة</option>
                        <option value="itay">إيتاي البارود</option>
                        <option value="delengat">الدلنجات</option>
                    </select>
                </div>

                <!-- Property Details -->
                <div class="mb-8 bg-gray-50 p-6 rounded-lg">
                    <h3 class="text-lg font-semibold text-gray-700 mb-4">تفاصيل العقار</h3>
                    <div class="grid md:grid-cols-2 gap-4 mb-4">
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">المساحة (متر مربع)</label>
                            <input type="number" id="property-area" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-green-500 focus:outline-none" required>
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">سعر المتر (جنيه)</label>
                            <input type="number" id="property-price-per-meter" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-green-500 focus:outline-none" value="14000" required>
                            <p class="text-sm text-gray-600 mt-1">السعر الموصى به: 14,000 - 17,000 جنيه</p>
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">السعر الكلي (جنيه)</label>
                            <input type="number" id="property-total-price" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-green-500 focus:outline-none" required>
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">عدد الغرف</label>
                            <select id="property-rooms" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-green-500 focus:outline-none">
                                <option value="">اختر عدد الغرف</option>
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5+">5+</option>
                            </select>
                        </div>
                    </div>
                    <div class="mb-4">
                        <label class="block text-sm font-semibold text-gray-700 mb-2">وصف العقار</label>
                        <textarea id="property-description" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-green-500 focus:outline-none h-24" placeholder="وصف العقار..."></textarea>
                    </div>
                </div>

                <!-- Image Upload Section -->
                <div class="mb-8 bg-blue-50 p-6 rounded-lg border-2 border-blue-200">
                    <h3 class="text-lg font-semibold text-gray-700 mb-4">📷 رفع صور العقار (اختياري)</h3>
                    <div class="mb-4">
                        <input type="file" id="property-images" accept="image/*" multiple class="hidden" onchange="previewImages(event)">
                        <label for="property-images" class="cursor-pointer bg-blue-500 text-white px-6 py-3 rounded-lg hover:bg-blue-600 transition-colors inline-block">
                            <i class="fas fa-upload mr-2"></i>اختر الصور (حد أقصى 4 صور)
                        </label>
                        <p class="text-sm text-gray-600 mt-2">يمكنك رفع حتى 4 صور للعقار</p>
                    </div>
                    <div id="image-preview-container" class="flex flex-wrap gap-2 mt-4">
                        <!-- Image previews will appear here -->
                    </div>
                </div>

                <!-- Contact Information -->
                <div class="mb-8 bg-yellow-50 p-6 rounded-lg border-2 border-yellow-200">
                    <h3 class="text-lg font-semibold text-gray-700 mb-4">معلومات التواصل</h3>
                    <div class="grid md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">الاسم</label>
                            <input type="text" id="seller-name" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-green-500 focus:outline-none" required>
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">رقم الواتساب</label>
                            <input type="tel" id="seller-whatsapp" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-green-500 focus:outline-none" placeholder="01xxxxxxxxx" required>
                        </div>
                    </div>
                </div>

                <button type="submit" class="w-full bg-green-600 text-white py-4 rounded-xl text-lg font-semibold hover:bg-green-700 transition-colors">
                    تسجيل العقار للبيع
                </button>
            </form>
        </div>
    </div>

    <!-- Buyer Form Section -->
    <div id="buyer-section" class="form-section container mx-auto px-4 py-8">
        <div class="max-w-4xl mx-auto bg-white rounded-2xl shadow-xl p-8">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-3xl font-bold text-blue-700">نموذج البحث عن عقار</h2>
                <button onclick="showSection('home')" class="text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times text-2xl"></i>
                </button>
            </div>
            
            <form id="buyer-form" onsubmit="submitBuyerForm(event)">
                <!-- Property Type Selection -->
                <div class="mb-8">
                    <label class="block text-lg font-semibold text-gray-700 mb-4">نوع العقار المطلوب</label>
                    <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                        <button type="button" onclick="selectBuyerPropertyType('apartment')" class="buyer-property-type-btn p-4 border-2 border-gray-300 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors">
                            <div class="text-2xl mb-2">🏠</div>
                            <div class="font-semibold">شقة</div>
                        </button>
                        <button type="button" onclick="selectBuyerPropertyType('house')" class="buyer-property-type-btn p-4 border-2 border-gray-300 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors">
                            <div class="text-2xl mb-2">🏘️</div>
                            <div class="font-semibold">بيت</div>
                        </button>
                        <button type="button" onclick="selectBuyerPropertyType('land')" class="buyer-property-type-btn p-4 border-2 border-gray-300 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors">
                            <div class="text-2xl mb-2">🌾</div>
                            <div class="font-semibold">أرض</div>
                        </button>
                        <button type="button" onclick="selectBuyerPropertyType('villa')" class="buyer-property-type-btn p-4 border-2 border-gray-300 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors">
                            <div class="text-2xl mb-2">🏰</div>
                            <div class="font-semibold">فيلا</div>
                        </button>
                        <button type="button" onclick="selectBuyerPropertyType('shop')" class="buyer-property-type-btn p-4 border-2 border-gray-300 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors">
                            <div class="text-2xl mb-2">🏪</div>
                            <div class="font-semibold">محل</div>
                        </button>
                    </div>
                </div>

                <!-- Location Selection -->
                <div class="mb-8">
                    <label class="block text-lg font-semibold text-gray-700 mb-4">المنطقة المطلوبة</label>
                    <select id="buyer-location" class="w-full p-4 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none" required>
                        <option value="">اختر المنطقة</option>
                        <option value="damanhour">دمنهور</option>
                        <option value="kom-hamada">كوم حمادة</option>
                        <option value="itay">إيتاي البارود</option>
                        <option value="delengat">الدلنجات</option>
                    </select>
                </div>

                <!-- Budget -->
                <div class="mb-8 bg-gray-50 p-6 rounded-lg">
                    <h3 class="text-lg font-semibold text-gray-700 mb-4">الميزانية</h3>
                    <div class="grid md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">أقل سعر (جنيه)</label>
                            <input type="number" id="buyer-min-price" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none">
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">أعلى سعر (جنيه)</label>
                            <input type="number" id="buyer-max-price" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none">
                        </div>
                    </div>
                </div>

                <!-- Contact Information -->
                <div class="mb-8 bg-yellow-50 p-6 rounded-lg border-2 border-yellow-200">
                    <h3 class="text-lg font-semibold text-gray-700 mb-4">معلومات التواصل</h3>
                    <div class="grid md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">الاسم</label>
                            <input type="text" id="buyer-name" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none" required>
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">رقم الواتساب</label>
                            <input type="tel" id="buyer-whatsapp" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none" placeholder="01xxxxxxxxx" required>
                        </div>
                    </div>
                </div>

                <button type="submit" class="w-full bg-blue-600 text-white py-4 rounded-xl text-lg font-semibold hover:bg-blue-700 transition-colors">
                    تسجيل طلب البحث
                </button>
            </form>
        </div>
    </div>

    <!-- Listings Section -->
    <div id="listings-section" class="form-section container mx-auto px-4 py-8">
        <div class="max-w-6xl mx-auto">
            <div class="flex justify-between items-center mb-8">
                <h2 class="text-3xl font-bold text-gray-800">العقارات المتاحة حالياً</h2>
                <button onclick="showSection('home')" class="text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times text-2xl"></i>
                </button>
            </div>
            
            <div class="grid md:grid-cols-2 gap-8 mb-12">
                <!-- For Sale Properties -->
                <div class="bg-white rounded-2xl shadow-xl p-6">
                    <h3 class="text-2xl font-bold text-green-700 mb-6 text-center">🏠 عقارات للبيع</h3>
                    <div id="sale-listings" class="space-y-4">
                        <!-- العقارات للبيع سيتم تحميلها هنا -->
                    </div>
                </div>

                <!-- Wanted Properties -->
                <div class="bg-white rounded-2xl shadow-xl p-6">
                    <h3 class="text-2xl font-bold text-blue-700 mb-6 text-center">🔍 طلبات شراء</h3>
                    <div id="wanted-listings" class="space-y-4">
                        <!-- طلبات الشراء سيتم تحميلها هنا -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Services Section -->
    <div id="services-section" class="form-section container mx-auto px-4 py-8">
        <div class="max-w-6xl mx-auto">
            <div class="flex justify-between items-center mb-8">
                <h2 class="text-3xl font-bold text-orange-700">خدمات التشطيب والمقاولات</h2>
                <button onclick="showSection('home')" class="text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times text-2xl"></i>
                </button>
            </div>
            
            <div id="services-list" class="grid md:grid-cols-3 gap-6">
                <!-- Services will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Admin Login Section -->
    <div id="admin-login-section" class="form-section container mx-auto px-4 py-8">
        <div class="max-w-md mx-auto bg-white rounded-2xl shadow-xl p-8">
            <div class="text-center mb-8">
                <div class="text-6xl mb-4">🔐</div>
                <h2 class="text-3xl font-bold text-purple-700 mb-2">دخول الإدارة</h2>
                <p class="text-gray-600">يرجى إدخال بيانات الدخول للوصول إلى لوحة التحكم</p>
                
                <!-- معلومات الدخول للاختبار -->
                <div class="admin-login-info text-sm text-gray-600 mt-4">
                    <p><strong>للتجربة:</strong></p>
                    <p>اسم المستخدم: <strong>admin</strong></p>
                    <p>كلمة المرور: <strong>123456</strong></p>
                </div>
            </div>
            
            <form id="admin-login-form" onsubmit="adminLogin(event)">
                <div class="mb-6">
                    <label class="block text-lg font-semibold text-gray-700 mb-2">اسم المستخدم</label>
                    <input type="text" id="admin-username" class="w-full p-4 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none" required value="admin">
                </div>
                
                <div class="mb-8">
                    <label class="block text-lg font-semibold text-gray-700 mb-2">كلمة المرور</label>
                    <input type="password" id="admin-password" class="w-full p-4 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none" required value="123456">
                </div>
                
                <button type="submit" class="w-full bg-purple-600 text-white py-4 rounded-xl text-lg font-semibold hover:bg-purple-700 transition-colors">
                    دخول لوحة التحكم
                </button>
            </form>
            
            <div class="text-center mt-6">
                <button onclick="showSection('home')" class="text-purple-600 hover:text-purple-800 transition-colors">العودة للرئيسية</button>
            </div>
        </div>
    </div>

    <!-- Admin Dashboard Section -->
    <div id="admin-dashboard-section" class="form-section">
        <!-- Admin Header -->
        <div class="bg-purple-700 text-white shadow-lg">
            <div class="container mx-auto px-4 py-4">
                <div class="flex flex-col md:flex-row justify-between items-center">
                    <h1 class="text-2xl font-bold">🏠 لوحة تحكم المستقبل للتسويق العقاري</h1>
                    <div class="flex items-center gap-4 mt-4 md:mt-0">
                        <span id="admin-welcome" class="text-purple-200"></span>
                        <button onclick="adminLogout()" class="bg-purple-800 hover:bg-purple-900 px-4 py-2 rounded-lg transition-colors">تسجيل الخروج</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="container mx-auto px-4 py-8">
            <!-- Statistics Overview -->
            <div class="grid md:grid-cols-4 gap-6 mb-8">
                <div class="bg-white rounded-2xl shadow-xl p-6 text-center">
                    <div class="text-4xl mb-2">🏠</div>
                    <h3 class="text-2xl font-bold text-green-600" id="total-properties">0</h3>
                    <p class="text-gray-600">إجمالي العقارات</p>
                </div>
                <div class="bg-white rounded-2xl shadow-xl p-6 text-center">
                    <div class="text-4xl mb-2">🔍</div>
                    <h3 class="text-2xl font-bold text-blue-600" id="total-requests">0</h3>
                    <p class="text-gray-600">طلبات الشراء</p>
                </div>
                <div class="bg-white rounded-2xl shadow-xl p-6 text-center">
                    <div class="text-4xl mb-2">👥</div>
                    <h3 class="text-2xl font-bold text-purple-600" id="total-clients">0</h3>
                    <p class="text-gray-600">إجمالي العملاء</p>
                </div>
                <div class="bg-white rounded-2xl shadow-xl p-6 text-center">
                    <div class="text-4xl mb-2">💰</div>
                    <h3 class="text-2xl font-bold text-yellow-600" id="total-featured">0</h3>
                    <p class="text-gray-600">مميز</p>
                </div>
            </div>

            <!-- Admin Navigation -->
            <div class="bg-white rounded-2xl shadow-xl p-6 mb-8">
                <div class="flex flex-wrap gap-3 justify-center">
                    <button onclick="showAdminTab('registrations')" class="admin-tab-btn active bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors text-sm">🏠 إدارة العقارات</button>
                    <button onclick="showAdminTab('featured')" class="admin-tab-btn bg-gray-200 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-300 transition-colors text-sm">⭐ العقارات المميزة</button>
                    <button onclick="showAdminTab('clients')" class="admin-tab-btn bg-gray-200 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-300 transition-colors text-sm">👥 إدارة العملاء</button>
                </div>
            </div>

            <!-- Properties Management Tab -->
            <div id="admin-registrations-tab" class="admin-tab active">
                <div class="grid md:grid-cols-2 gap-8">
                    <!-- Properties for Sale -->
                    <div class="bg-white rounded-2xl shadow-xl p-6">
                        <div class="flex justify-between items-center mb-6">
                            <h3 class="text-xl font-bold text-green-700">🏠 العقارات للبيع</h3>
                            <span id="sellers-count" class="bg-green-100 text-green-800 px-3 py-1 rounded-full font-semibold">0</span>
                        </div>
                        <div id="admin-sellers" class="space-y-4 max-h-96 overflow-y-auto">
                            <!-- Properties for sale will appear here -->
                        </div>
                    </div>

                    <!-- Property Requests -->
                    <div class="bg-white rounded-2xl shadow-xl p-6">
                        <div class="flex justify-between items-center mb-6">
                            <h3 class="text-xl font-bold text-blue-700">🔍 طلبات الشراء</h3>
                            <span id="buyers-count" class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full font-semibold">0</span>
                        </div>
                        <div id="admin-buyers" class="space-y-4 max-h-96 overflow-y-auto">
                            <!-- Property purchase requests will appear here -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Featured Properties Tab -->
            <div id="admin-featured-tab" class="admin-tab">
                <div class="bg-white rounded-2xl shadow-xl p-8">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-2xl font-bold text-yellow-700">⭐ إدارة العقارات المميزة</h3>
                        <button onclick="showFeaturedForm()" class="bg-yellow-600 text-white px-6 py-3 rounded-lg hover:bg-yellow-700 transition-colors">➕ إضافة مقتطف مميز</button>
                    </div>

                    <!-- Featured Properties List -->
                    <div id="featured-properties-list" class="space-y-4">
                        <!-- Featured properties will appear here -->
                    </div>
                </div>
            </div>

            <!-- Clients Management Tab -->
            <div id="admin-clients-tab" class="admin-tab">
                <div class="bg-white rounded-2xl shadow-xl p-8">
                    <h3 class="text-2xl font-bold text-blue-700 mb-6">👥 إدارة العملاء ومتابعة الحالات</h3>
                    
                    <div id="clients-list" class="space-y-4">
                        <!-- Clients will appear here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-8 mt-12">
        <div class="container mx-auto px-4">
            <div class="grid md:grid-cols-3 gap-8">
                <div>
                    <h3 class="text-xl font-bold mb-4">المستقبل للتسويق العقاري</h3>
                    <p class="text-gray-300">منصتك الموثوقة للوساطة العقارية في محافظة البحيرة</p>
                </div>
                <div>
                    <h3 class="text-xl font-bold mb-4">روابط سريعة</h3>
                    <ul class="space-y-2">
                        <li><a href="#" onclick="showSection('home')" class="text-gray-300 hover:text-white transition-colors">الرئيسية</a></li>
                        <li><a href="#" onclick="showSection('listings')" class="text-gray-300 hover:text-white transition-colors">العقارات المتاحة</a></li>
                        <li><a href="#" onclick="showSection('services')" class="text-gray-300 hover:text-white transition-colors">خدمات المقاولات</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-xl font-bold mb-4">تواصل معنا</h3>
                    <div class="space-y-2 text-gray-300">
                        <p><i class="fas fa-phone mr-2"></i> 01091020887</p>
                        <p><i class="fab fa-whatsapp mr-2"></i> 01091020887</p>
                        <p><i class="fas fa-map-marker-alt mr-2"></i> محافظة البحيرة - مصر</p>
                    </div>
                </div>
            </div>
            <div class="border-t border-gray-700 mt-8 pt-6 text-center text-gray-400">
                <p>© 2024 المستقبل للتسويق العقاري. جميع الحقوق محفوظة.</p>
            </div>
        </div>
    </footer>

    <script>
        // البيانات الأساسية للتطبيق
        let currentPropertyType = '';
        let currentBuyerPropertyType = '';
        let sellerRegistrations = [];
        let buyerRegistrations = [];
        let currentAdmin = null;
        let adminClickCounter = 0;
        let featuredProperties = [];
        let clientStatuses = {};
        let contractingServices = [
            {
                id: 1,
                title: 'تصميم الشقق السكنية',
                description: 'خدمات تصميم داخلي وخارجي للشقق السكنية بأحدث الطرق والتقنيات',
                price: 'يبدأ من 15,000 جنيه',
                icon: '🏠',
                active: true
            },
            {
                id: 2,
                title: 'مقاولات تشطيب كاملة',
                description: 'مقاولات تشطيب كاملة من البداية حتى النهاية بجودة عالية',
                price: 'يبدأ من 20,000 جنيه',
                icon: '🔨',
                active: true
            },
            {
                id: 3,
                title: 'تصميم المحلات التجارية',
                description: 'تصميم وتجهيز المحلات التجارية لجذب العملاء وزيادة المبيعات',
                price: 'يبدأ من 18,000 جنيه',
                icon: '🏪',
                active: true
            }
        ];
        
        // بيانات المديرين - تم التصحيح هنا
        let adminUsers = [
            {
                id: 1,
                username: 'admin',
                password: '123456',
                fullName: 'المدير الرئيسي',
                isMainAdmin: true
            }
        ];

        // وظائف النظام الأساسية
        function showSection(section) {
            console.log('محاولة عرض القسم:', section);
            
            // إخفاء جميع الأقسام
            document.querySelectorAll('.form-section').forEach(s => {
                s.classList.remove('active');
            });
            document.getElementById('home-section').style.display = 'none';
            
            // إظهار القسم المحدد
            if (section === 'home') {
                document.getElementById('home-section').style.display = 'block';
                updateHomeServices();
                updateFeaturedProperties();
            } else {
                const sectionElement = document.getElementById(section + '-section');
                if (sectionElement) {
                    sectionElement.classList.add('active');
                } else {
                    console.error('القسم غير موجود:', section);
                }
            }
            
            // إرجاع الصفحة للأعلى
            window.scrollTo(0, 0);
        }

        function adminClickCount() {
            adminClickCounter++;
            console.log('عدد النقرات:', adminClickCounter);
            if (adminClickCounter >= 15) {
                adminClickCounter = 0;
                showSection('admin-login');
            }
        }

        function showSellerForm() {
            showSection('seller');
        }

        function showBuyerForm() {
            showSection('buyer');
        }

        function selectPropertyType(type) {
            currentPropertyType = type;
            
            // تحديث أنماط الأزرار
            document.querySelectorAll('.property-type-btn').forEach(btn => {
                btn.classList.remove('border-green-500', 'bg-green-100');
                btn.classList.add('border-gray-300');
            });
            event.target.classList.add('border-green-500', 'bg-green-100');
        }

        function selectBuyerPropertyType(type) {
            currentBuyerPropertyType = type;
            
            // تحديث أنماط الأزرار
            document.querySelectorAll('.buyer-property-type-btn').forEach(btn => {
                btn.classList.remove('border-blue-500', 'bg-blue-100');
                btn.classList.add('border-gray-300');
            });
            event.target.classList.add('border-blue-500', 'bg-blue-100');
        }

        function previewImages(event) {
            const container = document.getElementById('image-preview-container');
            container.innerHTML = '';
            const files = event.target.files;
            
            for (let i = 0; i < Math.min(files.length, 4); i++) {
                const file = files[i];
                const reader = new FileReader();
                
                reader.onload = function(e) {
                    const img = document.createElement('img');
                    img.src = e.target.result;
                    img.className = 'image-preview';
                    container.appendChild(img);
                }
                
                reader.readAsDataURL(file);
            }
        }

        function submitSellerForm(event) {
            event.preventDefault();
            
            if (!currentPropertyType) {
                alert('يرجى اختيار نوع العقار');
                return;
            }
            
            const area = document.getElementById('property-area').value;
            const pricePerMeter = document.getElementById('property-price-per-meter').value;
            const totalPrice = document.getElementById('property-total-price').value;
            
            const formData = {
                id: Date.now(),
                type: 'seller',
                propertyType: currentPropertyType,
                location: document.getElementById('seller-location').value,
                area: area,
                pricePerMeter: pricePerMeter,
                totalPrice: totalPrice,
                rooms: document.getElementById('property-rooms').value,
                description: document.getElementById('property-description').value,
                name: document.getElementById('seller-name').value,
                whatsapp: document.getElementById('seller-whatsapp').value,
                timestamp: new Date().toLocaleString('ar-EG'),
                images: [] // سيتم حفظ الصور هنا
            };
            
            sellerRegistrations.push(formData);
            updateListings();
            updateAdminPanel();
            
            alert('تم تسجيل العقار بنجاح!');
            document.getElementById('seller-form').reset();
            document.getElementById('image-preview-container').innerHTML = '';
            currentPropertyType = '';
            showSection('home');
        }

        function submitBuyerForm(event) {
            event.preventDefault();
            
            if (!currentBuyerPropertyType) {
                alert('يرجى اختيار نوع العقار المطلوب');
                return;
            }
            
            const formData = {
                id: Date.now(),
                type: 'buyer',
                propertyType: currentBuyerPropertyType,
                location: document.getElementById('buyer-location').value,
                minPrice: document.getElementById('buyer-min-price').value,
                maxPrice: document.getElementById('buyer-max-price').value,
                name: document.getElementById('buyer-name').value,
                whatsapp: document.getElementById('buyer-whatsapp').value,
                timestamp: new Date().toLocaleString('ar-EG')
            };
            
            buyerRegistrations.push(formData);
            updateListings();
            updateAdminPanel();
            
            alert('تم تسجيل طلب البحث بنجاح!');
            document.getElementById('buyer-form').reset();
            currentBuyerPropertyType = '';
            showSection('home');
        }

        function updateListings() {
            const saleListings = document.getElementById('sale-listings');
            const wantedListings = document.getElementById('wanted-listings');
            
            // تحديث قوائم البيع
            saleListings.innerHTML = sellerRegistrations.map(seller => `
                <div class="border-2 border-green-200 rounded-lg p-4 hover:shadow-lg transition-shadow">
                    <div class="flex justify-between items-start mb-2">
                        <h4 class="font-bold text-lg text-gray-800">${getPropertyTypeArabic(seller.propertyType)} للبيع</h4>
                        <span class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-semibold">للبيع</span>
                    </div>
                    <p class="text-gray-600 mb-2">📍 ${getLocationArabic(seller.location)}</p>
                    <p class="text-gray-600 mb-2">📐 المساحة: ${seller.area} متر مربع</p>
                    ${seller.rooms ? `<p class="text-gray-600 mb-2">🏠 ${seller.rooms} غرف</p>` : ''}
                    <div class="flex justify-between items-center mt-4">
                        <div>
                            <p class="text-sm text-gray-500">سعر المتر: ${Number(seller.pricePerMeter).toLocaleString()} جنيه</p>
                            <p class="text-xl font-bold text-green-600">${Number(seller.totalPrice).toLocaleString()} جنيه</p>
                        </div>
                        <button onclick="directWhatsApp('${seller.whatsapp}')" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors">
                            📱 تواصل مباشر
                        </button>
                    </div>
                </div>
            `).join('') || '<p class="text-center text-gray-500 py-4">لا توجد عقارات للبيع حالياً</p>';
            
            // تحديث قوائم الطلبات
            wantedListings.innerHTML = buyerRegistrations.map(buyer => `
                <div class="border-2 border-blue-200 rounded-lg p-4 hover:shadow-lg transition-shadow">
                    <div class="flex justify-between items-start mb-2">
                        <h4 class="font-bold text-lg text-gray-800">مطلوب ${getPropertyTypeArabic(buyer.propertyType)}</h4>
                        <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-semibold">مطلوب</span>
                    </div>
                    <p class="text-gray-600 mb-2">📍 ${getLocationArabic(buyer.location)}</p>
                    ${buyer.minPrice || buyer.maxPrice ? `
                        <p class="text-gray-600 mb-2">💰 الميزانية: ${buyer.minPrice ? Number(buyer.minPrice).toLocaleString() : 'أي'} - ${buyer.maxPrice ? Number(buyer.maxPrice).toLocaleString() : 'أي'} جنيه</p>
                    ` : ''}
                    <div class="flex justify-between items-center mt-4">
                        <button onclick="directWhatsApp('${buyer.whatsapp}')" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors">
                            📱 تواصل مباشر
                        </button>
                    </div>
                </div>
            `).join('') || '<p class="text-center text-gray-500 py-4">لا توجد طلبات شراء حالياً</p>';
        }

        function updateHomeServices() {
            const homeServicesGrid = document.getElementById('home-services-grid');
            const activeServices = contractingServices.filter(service => service.active);
            
            homeServicesGrid.innerHTML = activeServices.map(service => `
                <div class="property-card bg-white rounded-2xl shadow-xl p-6 border-t-4 border-orange-500">
                    <div class="text-center mb-4">
                        <div class="text-4xl mb-3">${service.icon}</div>
                        <h4 class="text-xl font-bold text-orange-700 mb-2">${service.title}</h4>
                        <p class="text-gray-600 text-sm mb-3">${service.description}</p>
                        <div class="text-sm text-gray-600 mb-4">${service.price}</div>
                    </div>
                    <button onclick="requestService(${service.id})" class="w-full bg-orange-600 text-white py-3 rounded-xl text-lg font-semibold hover:bg-orange-700 transition-colors">
                        طلب الخدمة
                    </button>
                </div>
            `).join('');
        }

        function updateServicesList() {
            const servicesList = document.getElementById('services-list');
            const activeServices = contractingServices.filter(service => service.active);
            
            servicesList.innerHTML = activeServices.map(service => `
                <div class="property-card bg-white rounded-2xl shadow-xl p-6 border-t-4 border-orange-500">
                    <div class="text-center mb-4">
                        <div class="text-4xl mb-3">${service.icon}</div>
                        <h4 class="text-xl font-bold text-orange-700 mb-2">${service.title}</h4>
                        <p class="text-gray-600 text-sm mb-3">${service.description}</p>
                        <div class="text-sm text-gray-600 mb-4">${service.price}</div>
                    </div>
                    <button onclick="requestService(${service.id})" class="w-full bg-orange-600 text-white py-3 rounded-xl text-lg font-semibold hover:bg-orange-700 transition-colors">
                        طلب الخدمة
                    </button>
                </div>
            `).join('');
        }

        function requestService(serviceId) {
            const service = contractingServices.find(s => s.id === serviceId);
            if (!service) return;
            
            const message = encodeURIComponent(`مرحباً، أنا مهتم بالخدمة: ${service.title}`);
            window.open(`https://wa.me/201091020887?text=${message}`, '_blank');
        }

        function directWhatsApp(whatsapp) {
            const message = encodeURIComponent('مرحباً، أنا مهتم بالعقار المعروض على موقع المستقبل للتسويق العقاري');
            window.open(`https://wa.me/2${whatsapp}?text=${message}`, '_blank');
        }

        // وظائف لوحة التحكم - تم التصحيح هنا
        function adminLogin(event) {
            event.preventDefault();
            
            const username = document.getElementById('admin-username').value;
            const password = document.getElementById('admin-password').value;
            
            console.log('محاولة الدخول:', username, password);
            console.log('المديرون المسجلون:', adminUsers);
            
            const admin = adminUsers.find(a => a.username === username && a.password === password);
            
            if (admin) {
                console.log('تم المصادقة بنجاح:', admin);
                currentAdmin = admin;
                document.getElementById('admin-welcome').textContent = `مرحباً، ${admin.fullName}`;
                showSection('admin-dashboard');
                showAdminTab('registrations');
                updateAdminPanel();
                
                // مسح نموذج الدخول
                document.getElementById('admin-login-form').reset();
            } else {
                console.log('فشل المصادقة');
                alert('اسم المستخدم أو كلمة المرور غير صحيحة');
            }
        }

        function adminLogout() {
            currentAdmin = null;
            showSection('home');
            alert('تم تسجيل الخروج بنجاح');
        }

        function showAdminTab(tabName) {
            // إخفاء جميع الألسنة
            document.querySelectorAll('.admin-tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.admin-tab-btn').forEach(btn => {
                btn.classList.remove('active', 'bg-purple-600', 'text-white');
                btn.classList.add('bg-gray-200', 'text-gray-700');
            });
            
            // إظهار اللسان المحدد
            const tabElement = document.getElementById(`admin-${tabName}-tab`);
            if (tabElement) {
                tabElement.classList.add('active');
            }
            
            if (event && event.target) {
                event.target.classList.add('active', 'bg-purple-600', 'text-white');
                event.target.classList.remove('bg-gray-200', 'text-gray-700');
            }
        }

        function updateAdminPanel() {
            const sellersContainer = document.getElementById('admin-sellers');
            const buyersContainer = document.getElementById('admin-buyers');
            
            // تحديث البائعين
            sellersContainer.innerHTML = sellerRegistrations.map(seller => `
                <div class="bg-white p-4 rounded-lg border border-green-200 hover:shadow-md transition-shadow">
                    <div class="flex justify-between items-start mb-3">
                        <h4 class="font-bold text-green-700">${getPropertyTypeArabic(seller.propertyType)} للبيع</h4>
                        <span class="text-xs text-gray-500">${seller.timestamp}</span>
                    </div>
                    
                    <div class="grid grid-cols-2 gap-2 mb-3 text-sm">
                        <p class="text-gray-600">📍 ${getLocationArabic(seller.location)}</p>
                        <p class="text-gray-600">👤 ${seller.name}</p>
                        <p class="text-gray-600">📱 ${seller.whatsapp}</p>
                        <p class="text-gray-600">📐 ${seller.area} م²</p>
                    </div>
                    
                    <div class="mb-3 p-2 bg-green-50 rounded">
                        <p class="text-sm text-gray-600">سعر المتر: ${Number(seller.pricePerMeter).toLocaleString()} جنيه</p>
                        <p class="text-lg font-bold text-green-600">💰 ${Number(seller.totalPrice).toLocaleString()} جنيه</p>
                    </div>
                    
                    <div class="flex gap-2 flex-wrap">
                        <button onclick="directWhatsApp('${seller.whatsapp}')" class="text-xs bg-green-500 text-white px-3 py-1 rounded hover:bg-green-600 transition-colors">📱 واتساب</button>
                        <button onclick="addToFeatured(${seller.id})" class="text-xs bg-yellow-500 text-white px-3 py-1 rounded hover:bg-yellow-600 transition-colors">⭐ تمييز</button>
                        <button onclick="deleteRegistration('seller', ${seller.id})" class="text-xs bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600 transition-colors">🗑️ حذف</button>
                    </div>
                </div>
            `).join('') || '<p class="text-gray-500 text-center py-8">لا توجد تسجيلات بائعين حتى الآن</p>';
            
            // تحديث المشترين
            buyersContainer.innerHTML = buyerRegistrations.map(buyer => `
                <div class="bg-white p-4 rounded-lg border border-blue-200 hover:shadow-md transition-shadow">
                    <div class="flex justify-between items-start mb-2">
                        <h4 class="font-bold text-blue-700">مطلوب ${getPropertyTypeArabic(buyer.propertyType)}</h4>
                        <span class="text-xs text-gray-500">${buyer.timestamp}</span>
                    </div>
                    <p class="text-sm text-gray-600 mb-1">📍 ${getLocationArabic(buyer.location)}</p>
                    <p class="text-sm text-gray-600 mb-1">👤 ${buyer.name}</p>
                    <p class="text-sm text-gray-600 mb-1">📱 ${buyer.whatsapp}</p>
                    <div class="mt-3 flex gap-2 flex-wrap">
                        <button onclick="directWhatsApp('${buyer.whatsapp}')" class="text-xs bg-blue-500 text-white px-3 py-1 rounded hover:bg-blue-600 transition-colors">📱 واتساب</button>
                        <button onclick="deleteRegistration('buyer', ${buyer.id})" class="text-xs bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600 transition-colors">🗑️ حذف</button>
                    </div>
                </div>
            `).join('') || '<p class="text-gray-500 text-center py-8">لا توجد طلبات مشترين حتى الآن</p>';
            
            // تحديث الإحصائيات
            document.getElementById('sellers-count').textContent = sellerRegistrations.length;
            document.getElementById('buyers-count').textContent = buyerRegistrations.length;
            document.getElementById('total-properties').textContent = sellerRegistrations.length;
            document.getElementById('total-requests').textContent = buyerRegistrations.length;
            document.getElementById('total-clients').textContent = sellerRegistrations.length + buyerRegistrations.length;
            document.getElementById('total-featured').textContent = featuredProperties.length;
        }

        function deleteRegistration(type, id) {
            if (confirm('هل أنت متأكد من حذف هذا التسجيل؟')) {
                if (type === 'seller') {
                    sellerRegistrations = sellerRegistrations.filter(s => s.id !== id);
                    // إزالة من المميزين أيضاً
                    featuredProperties = featuredProperties.filter(fp => fp.propertyId !== id);
                } else {
                    buyerRegistrations = buyerRegistrations.filter(b => b.id !== id);
                }
                updateAdminPanel();
                updateListings();
                updateFeaturedProperties();
                alert('تم حذف التسجيل بنجاح');
            }
        }

        function addToFeatured(propertyId) {
            const property = sellerRegistrations.find(s => s.id === propertyId);
            if (!property) return;
            
            // التحقق إذا كان العقار مضافاً بالفعل
            if (featuredProperties.find(fp => fp.propertyId === propertyId)) {
                alert('هذا العقار مضاف بالفعل للمميزين');
                return;
            }
            
            const featuredProperty = {
                id: Date.now(),
                propertyId: propertyId,
                property: property,
                order: featuredProperties.length + 1,
                description: `${getPropertyTypeArabic(property.propertyType)} في ${getLocationArabic(property.location)} - ${property.description || 'عقار مميز'}`,
                createdAt: new Date().toLocaleString('ar-EG')
            };
            
            featuredProperties.push(featuredProperty);
            updateFeaturedPropertiesList();
            updateFeaturedProperties();
            alert('تم إضافة العقار للمميزين بنجاح');
        }

        function showFeaturedForm() {
            const propertyId = prompt('أدخل رقم العقار الذي تريد تمييزه:');
            if (propertyId) {
                addToFeatured(parseInt(propertyId));
            }
        }

        function updateFeaturedPropertiesList() {
            const container = document.getElementById('featured-properties-list');
            container.innerHTML = '';
            
            featuredProperties.sort((a, b) => a.order - b.order).forEach(fp => {
                const div = document.createElement('div');
                div.className = 'bg-yellow-50 p-4 rounded-lg border-2 border-yellow-300';
                div.innerHTML = `
                    <div class="flex justify-between items-start mb-3">
                        <h4 class="font-bold text-yellow-700">${getPropertyTypeArabic(fp.property.propertyType)} - ${getLocationArabic(fp.property.location)}</h4>
                        <div class="flex gap-2">
                            <span class="bg-yellow-200 text-yellow-800 px-2 py-1 rounded text-xs">الترتيب: ${fp.order}</span>
                            <button onclick="removeFeaturedProperty(${fp.id})" class="text-red-500 hover:text-red-700">🗑️</button>
                        </div>
                    </div>
                    <p class="text-gray-700 mb-2">${fp.description}</p>
                    <p class="text-sm text-gray-500">💰 ${Number(fp.property.totalPrice).toLocaleString()} جنيه</p>
                    <p class="text-sm text-gray-500">📐 ${fp.property.area} م²</p>
                `;
                container.appendChild(div);
            });
            
            document.getElementById('total-featured').textContent = featuredProperties.length;
        }

        function removeFeaturedProperty(id) {
            featuredProperties = featuredProperties.filter(fp => fp.id !== id);
            updateFeaturedPropertiesList();
            updateFeaturedProperties();
        }

        function updateFeaturedProperties() {
            const container = document.getElementById('featured-properties');
            container.innerHTML = '';
            
            featuredProperties.sort((a, b) => a.order - b.order).forEach(fp => {
                const div = document.createElement('div');
                div.className = 'property-card bg-white rounded-2xl shadow-xl p-6 border-t-4 border-yellow-500 relative';
                div.innerHTML = `
                    <div class="featured-badge">⭐ مميز</div>
                    <div class="text-center mb-4">
                        <div class="text-4xl mb-3">${getPropertyIcon(fp.property.propertyType)}</div>
                        <h4 class="text-xl font-bold text-yellow-700 mb-2">${getPropertyTypeArabic(fp.property.propertyType)} للبيع</h4>
                        <p class="text-gray-600 text-sm mb-3">${fp.description}</p>
                        <p class="text-gray-600 mb-2">📍 ${getLocationArabic(fp.property.location)}</p>
                        <p class="text-gray-600 mb-2">📐 ${fp.property.area} م²</p>
                        <p class="text-lg font-bold text-yellow-600">${Number(fp.property.totalPrice).toLocaleString()} جنيه</p>
                    </div>
                    <button onclick="directWhatsApp('${fp.property.whatsapp}')" class="w-full bg-yellow-600 text-white py-3 rounded-xl text-lg font-semibold hover:bg-yellow-700 transition-colors">
                        📱 تواصل مباشر
                    </button>
                `;
                container.appendChild(div);
            });
            
            if (featuredProperties.length === 0) {
                container.innerHTML = '<p class="text-center text-gray-500 col-span-3 py-8">لا توجد عقارات مميزة حالياً</p>';
            }
        }

        // وظائف مساعدة
        function getPropertyTypeArabic(type) {
            const types = {
                'apartment': 'شقة',
                'house': 'بيت',
                'land': 'أرض',
                'villa': 'فيلا',
                'shop': 'محل'
            };
            return types[type] || type;
        }

        function getLocationArabic(location) {
            const locations = {
                'damanhour': 'دمنهور',
                'kom-hamada': 'كوم حمادة',
                'itay': 'إيتاي البارود',
                'delengat': 'الدلنجات'
            };
            return locations[location] || location;
        }

        function getPropertyIcon(type) {
            const icons = {
                'apartment': '🏠',
                'house': '🏘️',
                'land': '🌾',
                'villa': '🏰',
                'shop': '🏪'
            };
            return icons[type] || '🏠';
        }

        // تهيئة التطبيق
        document.addEventListener('DOMContentLoaded', function() {
            console.log('تم تحميل التطبيق');
            updateHomeServices();
            updateServicesList();
            updateListings();
            updateFeaturedProperties();
            
            // إضافة بعض البيانات التجريبية
            if (sellerRegistrations.length === 0) {
                sellerRegistrations.push({
                    id: 1,
                    type: 'seller',
                    propertyType: 'apartment',
                    location: 'kom-hamada',
                    area: '100',
                    pricePerMeter: '14000',
                    totalPrice: '1400000',
                    rooms: '3',
                    description: 'شقة حديثة في كوم حمادة - 3 غرف - تشطيب سوبر لوكس',
                    name: 'أحمد محمد',
                    whatsapp: '01091020887',
                    timestamp: new Date().toLocaleString('ar-EG')
                });
                
                buyerRegistrations.push({
                    id: 1,
                    type: 'buyer',
                    propertyType: 'house',
                    location: 'damanhour',
                    minPrice: '1000000',
                    maxPrice: '2000000',
                    name: 'محمد علي',
                    whatsapp: '01091020887',
                    timestamp: new Date().toLocaleString('ar-EG')
                });
                
                updateListings();
                updateAdminPanel();
            }
        });
    </script>
</body>
</html>
