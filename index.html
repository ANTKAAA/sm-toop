<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุงููุณุชูุจู ููุชุณููู ุงูุนูุงุฑู - ุงููุณุงุทุฉ ุงูุนูุงุฑูุฉ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        /* ุฅุนูุงู ูุชุญุฑู */
        .moving-announcement {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background: linear-gradient(45deg, #4f46e5, #7c3aed, #ec4899);
            color: white;
            padding: 8px 0;
            z-index: 1000;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }
        
        .announcement-text {
            display: inline-block;
            white-space: nowrap;
            animation: scroll-right 20s linear infinite;
            font-weight: bold;
            font-size: 14px;
        }
        
        @keyframes scroll-right {
            0% {
                transform: translateX(-100%);
            }
            100% {
                transform: translateX(100vw);
            }
        }
        
        /* ุชุนุฏูู ุงููุญุชูู ููุจุฏุฃ ุชุญุช ุงูุฅุนูุงู */
        body {
            padding-top: 40px;
        }
        .property-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .property-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }
        .form-section {
            display: none;
        }
        .form-section.active {
            display: block;
        }
        .price-warning {
            background: linear-gradient(45deg, #fef3c7, #fde68a);
            border-right: 4px solid #f59e0b;
        }
        .map-container {
            height: 300px;
            background: linear-gradient(135deg, #e0f2fe, #b3e5fc);
            border: 2px dashed #0288d1;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 12px;
        }
        .admin-tab {
            display: none;
        }
        .admin-tab.active {
            display: block;
        }
        .admin-tab-btn.active {
            background-color: #7c3aed !important;
            color: white !important;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-full">
    <!-- ุฅุนูุงู ูุชุญุฑู -->
    <div class="moving-announcement">
        <div class="announcement-text">
            ๐ ุตููู ุนูู ูุญูุฏ ๏ทบ ๐ ุชู ุฅุฏุงุฑุฉ ุงูุชุณููู ูููููุน ูู TopMarketing ๐ ููุชูุงุตู: 01091020887 ๐ ุงููุณุชูุจู ููุชุณููู ุงูุนูุงุฑู - ููุตุชู ุงูููุซููุฉ ๐
        </div>
    </div>
    
    <!-- Header -->
    <header class="bg-white shadow-lg">
        <div class="container mx-auto px-4 py-6">
            <div class="flex justify-between items-center">
                <h1 class="text-4xl font-bold text-blue-800" onclick="adminClickCount()" style="cursor: pointer;">๐ ุงููุณุชูุจู ููุชุณููู ุงูุนูุงุฑู</h1>
                <nav class="flex gap-4">
                    <button onclick="showSection('home')" class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">ุจูุน ุฃู ุดุฑุงุก ุนูุงุฑ</button>
                    <button onclick="showSection('listings')" class="px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors">ุงูุนูุงุฑุงุช ุงููุชุงุญุฉ</button>
                </nav>
            </div>
        </div>
    </header>

    <!-- Home Section -->
    <main id="home-section" class="container mx-auto px-4 py-8">
        <div class="text-center mb-12">
            <h2 class="text-3xl font-bold text-gray-800 mb-4">ูุฑุญุจุงู ุจู ูู ุงููุณุชูุจู ููุชุณููู ุงูุนูุงุฑู</h2>
            <p class="text-xl text-gray-600">ููุตุชู ุงูููุซููุฉ ูููุณุงุทุฉ ุงูุนูุงุฑูุฉ</p>
        </div>

        <div class="grid md:grid-cols-2 gap-8 max-w-6xl mx-auto mb-12">
            <!-- Seller Section -->
            <div class="property-card bg-white rounded-2xl shadow-xl p-8 border-t-4 border-green-500">
                <div class="text-center mb-6">
                    <div class="text-6xl mb-4">๐ก</div>
                    <h3 class="text-2xl font-bold text-green-700 mb-2">ุจุงุฆุน ุนูุงุฑ</h3>
                    <p class="text-gray-600">ูู ุจุจูุน ุนูุงุฑู ุจุฃูุถู ุงูุฃุณุนุงุฑ</p>
                </div>
                <button onclick="showSellerForm()" class="w-full bg-green-600 text-white py-4 rounded-xl text-lg font-semibold hover:bg-green-700 transition-colors">
                    ุงุจุฏุฃ ุจูุน ุนูุงุฑู ุงูุขู
                </button>
            </div>

            <!-- Buyer Section -->
            <div class="property-card bg-white rounded-2xl shadow-xl p-8 border-t-4 border-blue-500">
                <div class="text-center mb-6">
                    <div class="text-6xl mb-4">๐</div>
                    <h3 class="text-2xl font-bold text-blue-700 mb-2">ุดุงุฑู ุนูุงุฑ</h3>
                    <p class="text-gray-600">ุงุจุญุซ ุนู ุงูุนูุงุฑ ุงูููุงุณุจ ูู</p>
                </div>
                <button onclick="showBuyerForm()" class="w-full bg-blue-600 text-white py-4 rounded-xl text-lg font-semibold hover:bg-blue-700 transition-colors">
                    ุงุจุญุซ ุนู ุนูุงุฑู ุงููุซุงูู
                </button>
            </div>
        </div>

        <!-- Contracting Services Section -->
        <div class="max-w-6xl mx-auto" id="contracting-services-section">
            <div class="text-center mb-8">
                <h2 class="text-3xl font-bold text-orange-700 mb-4">๐๏ธ ุฎุฏูุงุช ุงูุชุดุทูุจ ูุงูููุงููุงุช</h2>
                <p class="text-xl text-gray-600">ุฎุฏูุงุช ูุชูุงููุฉ ููุชุตููู ูุงูุชุดุทูุจ ูุงูููุงููุงุช</p>
            </div>
            
            <div id="home-services-grid" class="grid md:grid-cols-3 gap-6">
                <!-- Services will be loaded here -->
            </div>
        </div>
    </main>

    <!-- Seller Form Section -->
    <div id="seller-section" class="form-section container mx-auto px-4 py-8">
        <div class="max-w-4xl mx-auto bg-white rounded-2xl shadow-xl p-8">
            <h2 class="text-3xl font-bold text-green-700 mb-8 text-center">ูููุฐุฌ ุจูุน ุงูุนูุงุฑ</h2>
            
            <form id="seller-form" onsubmit="submitSellerForm(event)">
                <!-- Property Type Selection -->
                <div class="mb-8">
                    <label class="block text-lg font-semibold text-gray-700 mb-4">ููุน ุงูุนูุงุฑ</label>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                        <button type="button" onclick="selectPropertyType('apartment')" class="property-type-btn p-4 border-2 border-gray-300 rounded-lg hover:border-green-500 hover:bg-green-50 transition-colors">
                            <div class="text-2xl mb-2">๐</div>
                            <div class="font-semibold">ุดูุฉ</div>
                        </button>
                        <button type="button" onclick="selectPropertyType('house')" class="property-type-btn p-4 border-2 border-gray-300 rounded-lg hover:border-green-500 hover:bg-green-50 transition-colors">
                            <div class="text-2xl mb-2">๐๏ธ</div>
                            <div class="font-semibold">ุจูุช</div>
                        </button>
                        <button type="button" onclick="selectPropertyType('land')" class="property-type-btn p-4 border-2 border-gray-300 rounded-lg hover:border-green-500 hover:bg-green-50 transition-colors">
                            <div class="text-2xl mb-2">๐พ</div>
                            <div class="font-semibold">ุฃุฑุถ</div>
                        </button>
                        <button type="button" onclick="selectPropertyType('shop')" class="property-type-btn p-4 border-2 border-gray-300 rounded-lg hover:border-green-500 hover:bg-green-50 transition-colors">
                            <div class="text-2xl mb-2">๐ช</div>
                            <div class="font-semibold">ูุญู</div>
                        </button>
                        <button type="button" onclick="selectPropertyType('office')" class="property-type-btn p-4 border-2 border-gray-300 rounded-lg hover:border-green-500 hover:bg-green-50 transition-colors">
                            <div class="text-2xl mb-2">๐ข</div>
                            <div class="font-semibold">ููุชุจ ุชุฌุงุฑู</div>
                        </button>
                        <button type="button" onclick="selectPropertyType('villa')" class="property-type-btn p-4 border-2 border-gray-300 rounded-lg hover:border-green-500 hover:bg-green-50 transition-colors">
                            <div class="text-2xl mb-2">๐ฐ</div>
                            <div class="font-semibold">ูููุง</div>
                        </button>
                        <button type="button" onclick="selectPropertyType('building-land')" class="property-type-btn p-4 border-2 border-gray-300 rounded-lg hover:border-green-500 hover:bg-green-50 transition-colors">
                            <div class="text-2xl mb-2">๐๏ธ</div>
                            <div class="font-semibold">ุฃุฑุถ ูุจุงูู</div>
                        </button>
                    </div>
                </div>

                <!-- Location Selection -->
                <div class="mb-8">
                    <label class="block text-lg font-semibold text-gray-700 mb-4">ุงููููุน</label>
                    <select id="seller-location" class="w-full p-4 border-2 border-gray-300 rounded-lg focus:border-green-500 focus:outline-none" required>
                        <option value="">ุงุฎุชุฑ ุงููููุน</option>
                        <option value="damanhour">ุฏููููุฑ</option>
                        <option value="kom-hamada">ููู ุญูุงุฏุฉ</option>
                        <option value="itay">ุฅูุชุงู ุงูุจุงุฑูุฏ</option>
                        <option value="delengat">ุงูุฏููุฌุงุช</option>
                    </select>
                </div>

                <!-- Map Location -->
                <div class="mb-8">
                    <label class="block text-lg font-semibold text-gray-700 mb-4">ุชุญุฏูุฏ ูููุน ุงูุนูุงุฑ ุนูู ุงูุฎุฑูุทุฉ</label>
                    <div class="bg-gray-50 p-4 rounded-lg border-2 border-gray-300">
                        <div class="mb-4">
                            <input type="text" id="map-location" placeholder="ุงูุชุจ ุงุณู ุงูููุงู ุจุงูุชูุตูู (ูุซุงู: ุดุงุฑุน ุงูุฌูููุฑูุฉุ ููู ุญูุงุฏุฉ)" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-green-500 focus:outline-none">
                        </div>
                        
                        <!-- Map Selection Buttons -->
                        <div class="mb-4 flex gap-2 flex-wrap">
                            <button type="button" onclick="showMap('damanhour')" class="map-area-btn text-sm bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 transition-colors">ุฎุฑูุทุฉ ุฏููููุฑ</button>
                            <button type="button" onclick="showMap('kom-hamada')" class="map-area-btn text-sm bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 transition-colors">ุฎุฑูุทุฉ ููู ุญูุงุฏุฉ</button>
                            <button type="button" onclick="showMap('itay')" class="map-area-btn text-sm bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 transition-colors">ุฎุฑูุทุฉ ุฅูุชุงู ุงูุจุงุฑูุฏ</button>
                            <button type="button" onclick="showMap('delengat')" class="map-area-btn text-sm bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 transition-colors">ุฎุฑูุทุฉ ุงูุฏููุฌุงุช</button>
                        </div>
                        
                        <!-- Interactive Maps Container -->
                        <div id="map-container" class="h-96 bg-white border-2 border-gray-300 rounded-lg relative overflow-hidden">
                            <div id="default-map-message" class="w-full h-full bg-gradient-to-br from-green-100 to-blue-100 flex items-center justify-center">
                                <div class="text-center p-6">
                                    <div class="text-6xl mb-4">๐บ๏ธ</div>
                                    <h3 class="text-xl font-bold text-gray-800 mb-2">ุฎุฑุงุฆุท ุชูุงุนููุฉ ููููุงุทู</h3>
                                    <p class="text-gray-600 mb-4">ุงุฎุชุฑ ุงูููุทูุฉ ูู ุงูุฃุฒุฑุงุฑ ุฃุนูุงู ูุนุฑุถ ุงูุฎุฑูุทุฉ ูุชุญุฏูุฏ ูููุน ุงูุนูุงุฑ</p>
                                    <p class="text-sm text-blue-600">๐ฏ ููููู ุงูููุฑ ุนูู ุงูุฎุฑูุทุฉ ูุชุญุฏูุฏ ุงููููุน ุจุฏูุฉ</p>
                                </div>
                            </div>
                            
                            <!-- Damanhour Interactive Map -->
                            <div id="damanhour-map" class="map-iframe hidden w-full h-full bg-gradient-to-br from-blue-100 to-green-100 relative overflow-y-auto">
                                <div class="absolute inset-0 flex items-center justify-center p-4">
                                    <div class="bg-white rounded-xl p-6 shadow-lg border-2 border-blue-300 text-center max-w-2xl w-full max-h-full overflow-y-auto">
                                        <div class="text-4xl mb-3">๐</div>
                                        <h4 class="text-xl font-bold text-blue-800 mb-2">ุฎุฑูุทุฉ ุฏููููุฑ</h4>
                                        <p class="text-gray-700 mb-4">ุงููุฑูุฒ ุงูุฑุฆูุณู ููุญุงูุธุฉ ุงูุจุญูุฑุฉ - ุงุฎุชุฑ ุงูููุทูุฉ ุงููุญุฏุฏุฉ</p>
                                        <div class="grid grid-cols-2 md:grid-cols-3 gap-2 text-sm max-h-80 overflow-y-auto">
                                            <div class="bg-blue-50 p-2 rounded cursor-pointer hover:bg-blue-100 transition-colors" onclick="selectMapLocation('ุฏููููุฑ - ูุณุท ุงูุจูุฏ')">ูุณุท ุงูุจูุฏ</div>
                                            <div class="bg-blue-50 p-2 rounded cursor-pointer hover:bg-blue-100 transition-colors" onclick="selectMapLocation('ุฏููููุฑ - ุดุงุฑุน ุงูุฌูููุฑูุฉ')">ุดุงุฑุน ุงูุฌูููุฑูุฉ</div>
                                            <div class="bg-blue-50 p-2 rounded cursor-pointer hover:bg-blue-100 transition-colors" onclick="selectMapLocation('ุฏููููุฑ - ุงููุญุทุฉ')">ููุทูุฉ ุงููุญุทุฉ</div>
                                            <div class="bg-blue-50 p-2 rounded cursor-pointer hover:bg-blue-100 transition-colors" onclick="selectMapLocation('ุฏููููุฑ - ุงูุฌุงูุนุฉ')">ููุทูุฉ ุงูุฌุงูุนุฉ</div>
                                            <div class="bg-blue-50 p-2 rounded cursor-pointer hover:bg-blue-100 transition-colors" onclick="selectMapLocation('ุฏููููุฑ - ุดุงุฑุน ุงูุจุญุฑ')">ุดุงุฑุน ุงูุจุญุฑ</div>
                                            <div class="bg-blue-50 p-2 rounded cursor-pointer hover:bg-blue-100 transition-colors" onclick="selectMapLocation('ุฏููููุฑ - ุดุงุฑุน ุงูุชุญุฑูุฑ')">ุดุงุฑุน ุงูุชุญุฑูุฑ</div>
                                            <div class="bg-blue-50 p-2 rounded cursor-pointer hover:bg-blue-100 transition-colors" onclick="selectMapLocation('ุฏููููุฑ - ุดุงุฑุน ุณุนุฏ ุฒุบููู')">ุดุงุฑุน ุณุนุฏ ุฒุบููู</div>
                                            <div class="bg-blue-50 p-2 rounded cursor-pointer hover:bg-blue-100 transition-colors" onclick="selectMapLocation('ุฏููููุฑ - ุดุงุฑุน ุงูุดูุฏุงุก')">ุดุงุฑุน ุงูุดูุฏุงุก</div>
                                            <div class="bg-blue-50 p-2 rounded cursor-pointer hover:bg-blue-100 transition-colors" onclick="selectMapLocation('ุฏููููุฑ - ุดุงุฑุน ุงูุฌูุด')">ุดุงุฑุน ุงูุฌูุด</div>
                                            <div class="bg-blue-50 p-2 rounded cursor-pointer hover:bg-blue-100 transition-colors" onclick="selectMapLocation('ุฏููููุฑ - ุดุงุฑุน ุงููุตุฑ')">ุดุงุฑุน ุงููุตุฑ</div>
                                            <div class="bg-blue-50 p-2 rounded cursor-pointer hover:bg-blue-100 transition-colors" onclick="selectMapLocation('ุฏููููุฑ - ููุทูุฉ ุงูููุฑููุด')">ููุทูุฉ ุงูููุฑููุด</div>
                                            <div class="bg-blue-50 p-2 rounded cursor-pointer hover:bg-blue-100 transition-colors" onclick="selectMapLocation('ุฏููููุฑ - ุญู ุงูุฒููุฑ')">ุญู ุงูุฒููุฑ</div>
                                            <div class="bg-blue-50 p-2 rounded cursor-pointer hover:bg-blue-100 transition-colors" onclick="selectMapLocation('ุฏููููุฑ - ุญู ุงูุณูุงู')">ุญู ุงูุณูุงู</div>
                                            <div class="bg-blue-50 p-2 rounded cursor-pointer hover:bg-blue-100 transition-colors" onclick="selectMapLocation('ุฏููููุฑ - ุญู ุงููุตุฑ')">ุญู ุงููุตุฑ</div>
                                            <div class="bg-blue-50 p-2 rounded cursor-pointer hover:bg-blue-100 transition-colors" onclick="selectMapLocation('ุฏููููุฑ - ููุทูุฉ ุงููุณุชุดูู ุงูุนุงู')">ููุทูุฉ ุงููุณุชุดูู ุงูุนุงู</div>
                                            <div class="bg-blue-50 p-2 rounded cursor-pointer hover:bg-blue-100 transition-colors" onclick="selectMapLocation('ุฏููููุฑ - ููุทูุฉ ุงูุจุฑูุฏ')">ููุทูุฉ ุงูุจุฑูุฏ</div>
                                            <div class="bg-blue-50 p-2 rounded cursor-pointer hover:bg-blue-100 transition-colors" onclick="selectMapLocation('ุฏููููุฑ - ููุทูุฉ ุงููุญููุฉ')">ููุทูุฉ ุงููุญููุฉ</div>
                                            <div class="bg-blue-50 p-2 rounded cursor-pointer hover:bg-blue-100 transition-colors" onclick="selectMapLocation('ุฏููููุฑ - ููุทูุฉ ุงูุฏููุงู ุงูุนุงู')">ููุทูุฉ ุงูุฏููุงู ุงูุนุงู</div>
                                            <div class="bg-blue-50 p-2 rounded cursor-pointer hover:bg-blue-100 transition-colors" onclick="selectMapLocation('ุฏููููุฑ - ุดุงุฑุน ุงููุฏุงุฑุณ')">ุดุงุฑุน ุงููุฏุงุฑุณ</div>
                                            <div class="bg-blue-50 p-2 rounded cursor-pointer hover:bg-blue-100 transition-colors" onclick="selectMapLocation('ุฏููููุฑ - ููุทูุฉ ุงูุณูู ุงููุฏูู')">ููุทูุฉ ุงูุณูู ุงููุฏูู</div>
                                        </div>
                                        <p class="text-xs text-gray-500 mt-3">ุงููุฑ ุนูู ุงูููุทูุฉ ูุชุญุฏูุฏูุง ุจุฏูุฉ</p>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Kom Hamada Interactive Map -->
                            <div id="kom-hamada-map" class="map-iframe hidden w-full h-full bg-gradient-to-br from-green-100 to-blue-100 relative overflow-y-auto">
                                <div class="absolute inset-0 flex items-center justify-center p-4">
                                    <div class="bg-white rounded-xl p-6 shadow-lg border-2 border-green-300 text-center max-w-2xl w-full max-h-full overflow-y-auto">
                                        <div class="text-4xl mb-3">๐</div>
                                        <h4 class="text-xl font-bold text-green-800 mb-2">ุฎุฑูุทุฉ ููู ุญูุงุฏุฉ</h4>
                                        <p class="text-gray-700 mb-4">ููุทูุฉ ุญูููุฉ ููุดุทุฉ - ุงุฎุชุฑ ุงูููุทูุฉ ุงููุญุฏุฏุฉ</p>
                                        <div class="grid grid-cols-2 md:grid-cols-3 gap-2 text-sm max-h-80 overflow-y-auto">
                                            <div class="bg-green-50 p-2 rounded cursor-pointer hover:bg-green-100 transition-colors" onclick="selectMapLocation('ููู ุญูุงุฏุฉ - ุดุงุฑุน ุณูุฏู ุฎูู')">ุดุงุฑุน ุณูุฏู ุฎูู</div>
                                            <div class="bg-green-50 p-2 rounded cursor-pointer hover:bg-green-100 transition-colors" onclick="selectMapLocation('ููู ุญูุงุฏุฉ - ูุณุท ุงูุจูุฏ')">ูุณุท ุงูุจูุฏ</div>
                                            <div class="bg-green-50 p-2 rounded cursor-pointer hover:bg-green-100 transition-colors" onclick="selectMapLocation('ููู ุญูุงุฏุฉ - ุงููุญุทุฉ')">ููุทูุฉ ุงููุญุทุฉ</div>
                                            <div class="bg-green-50 p-2 rounded cursor-pointer hover:bg-green-100 transition-colors" onclick="selectMapLocation('ููู ุญูุงุฏุฉ - ุงูุดุงุฑุน ุงูุฌุฏูุฏ')">ุงูุดุงุฑุน ุงูุฌุฏูุฏ</div>
                                            <div class="bg-green-50 p-2 rounded cursor-pointer hover:bg-green-100 transition-colors" onclick="selectMapLocation('ููู ุญูุงุฏุฉ - ุดุงุฑุน ุงูุฌูููุฑูุฉ')">ุดุงุฑุน ุงูุฌูููุฑูุฉ</div>
                                            <div class="bg-green-50 p-2 rounded cursor-pointer hover:bg-green-100 transition-colors" onclick="selectMapLocation('ููู ุญูุงุฏุฉ - ุดุงุฑุน ุงูููู')">ุดุงุฑุน ุงูููู</div>
                                            <div class="bg-green-50 p-2 rounded cursor-pointer hover:bg-green-100 transition-colors" onclick="selectMapLocation('ููู ุญูุงุฏุฉ - ุดุงุฑุน ุงูุซูุฑุฉ')">ุดุงุฑุน ุงูุซูุฑุฉ</div>
                                            <div class="bg-green-50 p-2 rounded cursor-pointer hover:bg-green-100 transition-colors" onclick="selectMapLocation('ููู ุญูุงุฏุฉ - ุดุงุฑุน ุงููุฏุฑุณุฉ')">ุดุงุฑุน ุงููุฏุฑุณุฉ</div>
                                            <div class="bg-green-50 p-2 rounded cursor-pointer hover:bg-green-100 transition-colors" onclick="selectMapLocation('ููู ุญูุงุฏุฉ - ุดุงุฑุน ุงูุดูุฏุงุก')">ุดุงุฑุน ุงูุดูุฏุงุก</div>
                                            <div class="bg-green-50 p-2 rounded cursor-pointer hover:bg-green-100 transition-colors" onclick="selectMapLocation('ููู ุญูุงุฏุฉ - ุดุงุฑุน ุงูุณูุงู')">ุดุงุฑุน ุงูุณูุงู</div>
                                            <div class="bg-green-50 p-2 rounded cursor-pointer hover:bg-green-100 transition-colors" onclick="selectMapLocation('ููู ุญูุงุฏุฉ - ููุทูุฉ ุงูุฌุงูุน ุงููุจูุฑ')">ููุทูุฉ ุงูุฌุงูุน ุงููุจูุฑ</div>
                                            <div class="bg-green-50 p-2 rounded cursor-pointer hover:bg-green-100 transition-colors" onclick="selectMapLocation('ููู ุญูุงุฏุฉ - ููุทูุฉ ุงูุณูู')">ููุทูุฉ ุงูุณูู</div>
                                            <div class="bg-green-50 p-2 rounded cursor-pointer hover:bg-green-100 transition-colors" onclick="selectMapLocation('ููู ุญูุงุฏุฉ - ููุทูุฉ ุงูุจุฑูุฏ')">ููุทูุฉ ุงูุจุฑูุฏ</div>
                                            <div class="bg-green-50 p-2 rounded cursor-pointer hover:bg-green-100 transition-colors" onclick="selectMapLocation('ููู ุญูุงุฏุฉ - ููุทูุฉ ุงููุญุฏุฉ ุงูุตุญูุฉ')">ููุทูุฉ ุงููุญุฏุฉ ุงูุตุญูุฉ</div>
                                            <div class="bg-green-50 p-2 rounded cursor-pointer hover:bg-green-100 transition-colors" onclick="selectMapLocation('ููู ุญูุงุฏุฉ - ุญู ุงูุฒุฑุงุนุฉ')">ุญู ุงูุฒุฑุงุนุฉ</div>
                                            <div class="bg-green-50 p-2 rounded cursor-pointer hover:bg-green-100 transition-colors" onclick="selectMapLocation('ููู ุญูุงุฏุฉ - ุญู ุงูุดุจุงุจ')">ุญู ุงูุดุจุงุจ</div>
                                            <div class="bg-green-50 p-2 rounded cursor-pointer hover:bg-green-100 transition-colors" onclick="selectMapLocation('ููู ุญูุงุฏุฉ - ููุทูุฉ ุงููุฏุงุฑุณ')">ููุทูุฉ ุงููุฏุงุฑุณ</div>
                                            <div class="bg-green-50 p-2 rounded cursor-pointer hover:bg-green-100 transition-colors" onclick="selectMapLocation('ููู ุญูุงุฏุฉ - ููุทูุฉ ุงูููุจุฑู')">ููุทูุฉ ุงูููุจุฑู</div>
                                            <div class="bg-green-50 p-2 rounded cursor-pointer hover:bg-green-100 transition-colors" onclick="selectMapLocation('ููู ุญูุงุฏุฉ - ุดุงุฑุน ุงูุชุฑุนุฉ')">ุดุงุฑุน ุงูุชุฑุนุฉ</div>
                                            <div class="bg-green-50 p-2 rounded cursor-pointer hover:bg-green-100 transition-colors" onclick="selectMapLocation('ููู ุญูุงุฏุฉ - ููุทูุฉ ุงูุฌูุนูุฉ ุงูุชุนุงูููุฉ')">ููุทูุฉ ุงูุฌูุนูุฉ ุงูุชุนุงูููุฉ</div>
                                        </div>
                                        <p class="text-xs text-gray-500 mt-3">ุงููุฑ ุนูู ุงูููุทูุฉ ูุชุญุฏูุฏูุง ุจุฏูุฉ</p>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Itay Barud Interactive Map -->
                            <div id="itay-map" class="map-iframe hidden w-full h-full bg-gradient-to-br from-purple-100 to-blue-100 relative overflow-y-auto">
                                <div class="absolute inset-0 flex items-center justify-center p-4">
                                    <div class="bg-white rounded-xl p-6 shadow-lg border-2 border-purple-300 text-center max-w-2xl w-full max-h-full overflow-y-auto">
                                        <div class="text-4xl mb-3">๐</div>
                                        <h4 class="text-xl font-bold text-purple-800 mb-2">ุฎุฑูุทุฉ ุฅูุชุงู ุงูุจุงุฑูุฏ</h4>
                                        <p class="text-gray-700 mb-4">ููุทูุฉ ุณูููุฉ ูููุฒุฉ - ุงุฎุชุฑ ุงูููุทูุฉ ุงููุญุฏุฏุฉ</p>
                                        <div class="grid grid-cols-2 md:grid-cols-3 gap-2 text-sm max-h-80 overflow-y-auto">
                                            <div class="bg-purple-50 p-2 rounded cursor-pointer hover:bg-purple-100 transition-colors" onclick="selectMapLocation('ุฅูุชุงู ุงูุจุงุฑูุฏ - ูุณุท ุงูุจูุฏ')">ูุณุท ุงูุจูุฏ</div>
                                            <div class="bg-purple-50 p-2 rounded cursor-pointer hover:bg-purple-100 transition-colors" onclick="selectMapLocation('ุฅูุชุงู ุงูุจุงุฑูุฏ - ุดุงุฑุน ุงูุฌูููุฑูุฉ')">ุดุงุฑุน ุงูุฌูููุฑูุฉ</div>
                                            <div class="bg-purple-50 p-2 rounded cursor-pointer hover:bg-purple-100 transition-colors" onclick="selectMapLocation('ุฅูุชุงู ุงูุจุงุฑูุฏ - ุงููุญุทุฉ')">ููุทูุฉ ุงููุญุทุฉ</div>
                                            <div class="bg-purple-50 p-2 rounded cursor-pointer hover:bg-purple-100 transition-colors" onclick="selectMapLocation('ุฅูุชุงู ุงูุจุงุฑูุฏ - ุงูุญู ุงูุฌุฏูุฏ')">ุงูุญู ุงูุฌุฏูุฏ</div>
                                            <div class="bg-purple-50 p-2 rounded cursor-pointer hover:bg-purple-100 transition-colors" onclick="selectMapLocation('ุฅูุชุงู ุงูุจุงุฑูุฏ - ุดุงุฑุน ุงูููู')">ุดุงุฑุน ุงูููู</div>
                                            <div class="bg-purple-50 p-2 rounded cursor-pointer hover:bg-purple-100 transition-colors" onclick="selectMapLocation('ุฅูุชุงู ุงูุจุงุฑูุฏ - ุดุงุฑุน ุงูุณูุงู')">ุดุงุฑุน ุงูุณูุงู</div>
                                            <div class="bg-purple-50 p-2 rounded cursor-pointer hover:bg-purple-100 transition-colors" onclick="selectMapLocation('ุฅูุชุงู ุงูุจุงุฑูุฏ - ุดุงุฑุน ุงูุดูุฏุงุก')">ุดุงุฑุน ุงูุดูุฏุงุก</div>
                                            <div class="bg-purple-50 p-2 rounded cursor-pointer hover:bg-purple-100 transition-colors" onclick="selectMapLocation('ุฅูุชุงู ุงูุจุงุฑูุฏ - ุดุงุฑุน ุงููุฏุฑุณุฉ')">ุดุงุฑุน ุงููุฏุฑุณุฉ</div>
                                            <div class="bg-purple-50 p-2 rounded cursor-pointer hover:bg-purple-100 transition-colors" onclick="selectMapLocation('ุฅูุชุงู ุงูุจุงุฑูุฏ - ููุทูุฉ ุงูุณูู')">ููุทูุฉ ุงูุณูู</div>
                                            <div class="bg-purple-50 p-2 rounded cursor-pointer hover:bg-purple-100 transition-colors" onclick="selectMapLocation('ุฅูุชุงู ุงูุจุงุฑูุฏ - ููุทูุฉ ุงูุจุฑูุฏ')">ููุทูุฉ ุงูุจุฑูุฏ</div>
                                            <div class="bg-purple-50 p-2 rounded cursor-pointer hover:bg-purple-100 transition-colors" onclick="selectMapLocation('ุฅูุชุงู ุงูุจุงุฑูุฏ - ููุทูุฉ ุงููุญุฏุฉ ุงูุตุญูุฉ')">ููุทูุฉ ุงููุญุฏุฉ ุงูุตุญูุฉ</div>
                                            <div class="bg-purple-50 p-2 rounded cursor-pointer hover:bg-purple-100 transition-colors" onclick="selectMapLocation('ุฅูุชุงู ุงูุจุงุฑูุฏ - ุญู ุงูุฒุฑุงุนุฉ')">ุญู ุงูุฒุฑุงุนุฉ</div>
                                            <div class="bg-purple-50 p-2 rounded cursor-pointer hover:bg-purple-100 transition-colors" onclick="selectMapLocation('ุฅูุชุงู ุงูุจุงุฑูุฏ - ููุทูุฉ ุงูุฌุงูุน')">ููุทูุฉ ุงูุฌุงูุน</div>
                                            <div class="bg-purple-50 p-2 rounded cursor-pointer hover:bg-purple-100 transition-colors" onclick="selectMapLocation('ุฅูุชุงู ุงูุจุงุฑูุฏ - ุดุงุฑุน ุงูุชุฑุนุฉ')">ุดุงุฑุน ุงูุชุฑุนุฉ</div>
                                            <div class="bg-purple-50 p-2 rounded cursor-pointer hover:bg-purple-100 transition-colors" onclick="selectMapLocation('ุฅูุชุงู ุงูุจุงุฑูุฏ - ููุทูุฉ ุงููุฏุงุฑุณ')">ููุทูุฉ ุงููุฏุงุฑุณ</div>
                                        </div>
                                        <p class="text-xs text-gray-500 mt-3">ุงููุฑ ุนูู ุงูููุทูุฉ ูุชุญุฏูุฏูุง ุจุฏูุฉ</p>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Delengat Interactive Map -->
                            <div id="delengat-map" class="map-iframe hidden w-full h-full bg-gradient-to-br from-orange-100 to-yellow-100 relative overflow-y-auto">
                                <div class="absolute inset-0 flex items-center justify-center p-4">
                                    <div class="bg-white rounded-xl p-6 shadow-lg border-2 border-orange-300 text-center max-w-2xl w-full max-h-full overflow-y-auto">
                                        <div class="text-4xl mb-3">๐</div>
                                        <h4 class="text-xl font-bold text-orange-800 mb-2">ุฎุฑูุทุฉ ุงูุฏููุฌุงุช</h4>
                                        <p class="text-gray-700 mb-4">ููุทูุฉ ูุงุฏุฆุฉ ูููุงุณุจุฉ ููุนุงุฆูุงุช - ุงุฎุชุฑ ุงูููุทูุฉ ุงููุญุฏุฏุฉ</p>
                                        <div class="grid grid-cols-2 md:grid-cols-3 gap-2 text-sm max-h-80 overflow-y-auto">
                                            <div class="bg-orange-50 p-2 rounded cursor-pointer hover:bg-orange-100 transition-colors" onclick="selectMapLocation('ุงูุฏููุฌุงุช - ูุณุท ุงูุจูุฏ')">ูุณุท ุงูุจูุฏ</div>
                                            <div class="bg-orange-50 p-2 rounded cursor-pointer hover:bg-orange-100 transition-colors" onclick="selectMapLocation('ุงูุฏููุฌุงุช - ุดุงุฑุน ุงูุฌูููุฑูุฉ')">ุดุงุฑุน ุงูุฌูููุฑูุฉ</div>
                                            <div class="bg-orange-50 p-2 rounded cursor-pointer hover:bg-orange-100 transition-colors" onclick="selectMapLocation('ุงูุฏููุฌุงุช - ุงููุญุทุฉ')">ููุทูุฉ ุงููุญุทุฉ</div>
                                            <div class="bg-orange-50 p-2 rounded cursor-pointer hover:bg-orange-100 transition-colors" onclick="selectMapLocation('ุงูุฏููุฌุงุช - ุงูุญู ุงูุณููู')">ุงูุญู ุงูุณููู</div>
                                            <div class="bg-orange-50 p-2 rounded cursor-pointer hover:bg-orange-100 transition-colors" onclick="selectMapLocation('ุงูุฏููุฌุงุช - ุดุงุฑุน ุงูููู')">ุดุงุฑุน ุงูููู</div>
                                            <div class="bg-orange-50 p-2 rounded cursor-pointer hover:bg-orange-100 transition-colors" onclick="selectMapLocation('ุงูุฏููุฌุงุช - ุดุงุฑุน ุงูุณูุงู')">ุดุงุฑุน ุงูุณูุงู</div>
                                            <div class="bg-orange-50 p-2 rounded cursor-pointer hover:bg-orange-100 transition-colors" onclick="selectMapLocation('ุงูุฏููุฌุงุช - ุดุงุฑุน ุงูุดูุฏุงุก')">ุดุงุฑุน ุงูุดูุฏุงุก</div>
                                            <div class="bg-orange-50 p-2 rounded cursor-pointer hover:bg-orange-100 transition-colors" onclick="selectMapLocation('ุงูุฏููุฌุงุช - ููุทูุฉ ุงูุณูู')">ููุทูุฉ ุงูุณูู</div>
                                            <div class="bg-orange-50 p-2 rounded cursor-pointer hover:bg-orange-100 transition-colors" onclick="selectMapLocation('ุงูุฏููุฌุงุช - ููุทูุฉ ุงูุจุฑูุฏ')">ููุทูุฉ ุงูุจุฑูุฏ</div>
                                            <div class="bg-orange-50 p-2 rounded cursor-pointer hover:bg-orange-100 transition-colors" onclick="selectMapLocation('ุงูุฏููุฌุงุช - ููุทูุฉ ุงููุญุฏุฉ ุงูุตุญูุฉ')">ููุทูุฉ ุงููุญุฏุฉ ุงูุตุญูุฉ</div>
                                            <div class="bg-orange-50 p-2 rounded cursor-pointer hover:bg-orange-100 transition-colors" onclick="selectMapLocation('ุงูุฏููุฌุงุช - ููุทูุฉ ุงููุฏุงุฑุณ')">ููุทูุฉ ุงููุฏุงุฑุณ</div>
                                            <div class="bg-orange-50 p-2 rounded cursor-pointer hover:bg-orange-100 transition-colors" onclick="selectMapLocation('ุงูุฏููุฌุงุช - ุญู ุงูุฒุฑุงุนุฉ')">ุญู ุงูุฒุฑุงุนุฉ</div>
                                            <div class="bg-orange-50 p-2 rounded cursor-pointer hover:bg-orange-100 transition-colors" onclick="selectMapLocation('ุงูุฏููุฌุงุช - ููุทูุฉ ุงูุฌุงูุน')">ููุทูุฉ ุงูุฌุงูุน</div>
                                            <div class="bg-orange-50 p-2 rounded cursor-pointer hover:bg-orange-100 transition-colors" onclick="selectMapLocation('ุงูุฏููุฌุงุช - ุดุงุฑุน ุงูุชุฑุนุฉ')">ุดุงุฑุน ุงูุชุฑุนุฉ</div>
                                            <div class="bg-orange-50 p-2 rounded cursor-pointer hover:bg-orange-100 transition-colors" onclick="selectMapLocation('ุงูุฏููุฌุงุช - ููุทูุฉ ุงูุฌูุนูุฉ ุงูุชุนุงูููุฉ')">ููุทูุฉ ุงูุฌูุนูุฉ ุงูุชุนุงูููุฉ</div>
                                        </div>
                                        <p class="text-xs text-gray-500 mt-3">ุงููุฑ ุนูู ุงูููุทูุฉ ูุชุญุฏูุฏูุง ุจุฏูุฉ</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mt-3">
                            <div id="selected-area-display" class="bg-white rounded-lg p-3 border-2 border-green-300 hidden">
                                <p class="text-green-600 font-semibold">๐ ุงูููุทูุฉ ุงููุญุฏุฏุฉ: <span id="area-name"></span></p>
                                <p class="text-sm text-gray-600 mt-1">ููููู ุงูุขู ุงูููุฑ ุนูู ุงูุฎุฑูุทุฉ ูุชุญุฏูุฏ ุงููููุน ุจุฏูุฉ ุฃูุจุฑ</p>
                            </div>
                        </div>
                        
                        <div class="mt-2">
                            <p class="text-xs text-gray-600">๐ก ุงุฎุชุฑ ุงูููุทูุฉ ูุนุฑุถ ุฎุฑูุทุฉ ุฌูุฌู ูุงุจ ุงูุชูุงุนููุฉ</p>
                            <div id="selected-coordinates" class="text-xs text-green-600 mt-1 hidden">
                                <!-- Selected coordinates will appear here -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Dynamic Property Forms -->
                <div id="property-details">
                    <!-- Forms will be inserted here based on property type -->
                </div>

                <!-- Contact Information -->
                <div class="mb-8 bg-yellow-50 p-6 rounded-lg border-2 border-yellow-200">
                    <h3 class="text-lg font-semibold text-gray-700 mb-4">ูุนูููุงุช ุงูุชูุงุตู</h3>
                    <div class="grid md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">ุงูุงุณู</label>
                            <input type="text" id="seller-name" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-green-500 focus:outline-none" required>
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">ุฑูู ุงููุงุชุณุงุจ</label>
                            <input type="tel" id="seller-whatsapp" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-green-500 focus:outline-none" placeholder="01xxxxxxxxx" required>
                            <p class="text-sm text-red-600 mt-1">โ๏ธ ูุฌุจ ุฃู ูููู ุงูุฑูู ูุชุงุญ ุนูู ุงููุงุชุณุงุจ ููุชูุงุตู ุงูุณุฑูุน</p>
                        </div>
                    </div>
                </div>

                <button type="submit" class="w-full bg-green-600 text-white py-4 rounded-xl text-lg font-semibold hover:bg-green-700 transition-colors">
                    ุชุณุฌูู ุงูุนูุงุฑ ููุจูุน
                </button>
            </form>
        </div>
    </div>

    <!-- Buyer Form Section -->
    <div id="buyer-section" class="form-section container mx-auto px-4 py-8">
        <div class="max-w-4xl mx-auto bg-white rounded-2xl shadow-xl p-8">
            <h2 class="text-3xl font-bold text-blue-700 mb-8 text-center">ูููุฐุฌ ุงูุจุญุซ ุนู ุนูุงุฑ</h2>
            
            <form id="buyer-form" onsubmit="submitBuyerForm(event)">
                <!-- Property Type Selection -->
                <div class="mb-8">
                    <label class="block text-lg font-semibold text-gray-700 mb-4">ููุน ุงูุนูุงุฑ ุงููุทููุจ</label>
                    <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                        <button type="button" onclick="selectBuyerPropertyType('apartment')" class="buyer-property-type-btn p-4 border-2 border-gray-300 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors">
                            <div class="text-2xl mb-2">๐</div>
                            <div class="font-semibold">ุดูุฉ</div>
                        </button>
                        <button type="button" onclick="selectBuyerPropertyType('house')" class="buyer-property-type-btn p-4 border-2 border-gray-300 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors">
                            <div class="text-2xl mb-2">๐๏ธ</div>
                            <div class="font-semibold">ุจูุช</div>
                        </button>
                        <button type="button" onclick="selectBuyerPropertyType('land')" class="buyer-property-type-btn p-4 border-2 border-gray-300 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors">
                            <div class="text-2xl mb-2">๐พ</div>
                            <div class="font-semibold">ุฃุฑุถ</div>
                        </button>
                        <button type="button" onclick="selectBuyerPropertyType('shop')" class="buyer-property-type-btn p-4 border-2 border-gray-300 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors">
                            <div class="text-2xl mb-2">๐ช</div>
                            <div class="font-semibold">ูุญู</div>
                        </button>
                        <button type="button" onclick="selectBuyerPropertyType('office')" class="buyer-property-type-btn p-4 border-2 border-gray-300 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors">
                            <div class="text-2xl mb-2">๐ข</div>
                            <div class="font-semibold">ููุชุจ</div>
                        </button>
                        <button type="button" onclick="selectBuyerPropertyType('villa')" class="buyer-property-type-btn p-4 border-2 border-gray-300 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors">
                            <div class="text-2xl mb-2">๐ฐ</div>
                            <div class="font-semibold">ูููุง</div>
                        </button>
                    </div>
                </div>

                <!-- Location Selection -->
                <div class="mb-8">
                    <label class="block text-lg font-semibold text-gray-700 mb-4">ุงูููุทูุฉ ุงููุทููุจุฉ</label>
                    <select id="buyer-location" onchange="updatePriceRange()" class="w-full p-4 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none" required>
                        <option value="">ุงุฎุชุฑ ุงูููุทูุฉ</option>
                        <option value="damanhour">ุฏููููุฑ</option>
                        <option value="kom-hamada">ููู ุญูุงุฏุฉ</option>
                        <option value="itay">ุฅูุชุงู ุงูุจุงุฑูุฏ</option>
                        <option value="delengat">ุงูุฏููุฌุงุช</option>
                    </select>
                    <div id="price-range-info" class="mt-4 p-4 bg-blue-50 rounded-lg hidden">
                        <p class="text-sm text-blue-800 font-semibold">๐ก ุงูุฃุณุนุงุฑ ุชุชุญุฏุฏ ุญุณุจ ุงููุณุงุญุฉ ูุงููููุน ูุงููุจุงูู (ุญุฏูุซุฉ ุฃู ูุฏููุฉ) ููุณุชูู ุงูุชุดุทูุจ</p>
                    </div>
                </div>

                <!-- Budget -->
                <div class="mb-8">
                    <label class="block text-lg font-semibold text-gray-700 mb-4">ุงูููุฒุงููุฉ ุงููุชุงุญุฉ</label>
                    <div class="grid md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">ุงูุญุฏ ุงูุฃุฏูู</label>
                            <select class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none">
                                <option value="900000">900,000 ุฌููู (ุงูุญุฏ ุงูุฃุฏูู)</option>
                                <option value="1000000">1,000,000 ุฌููู</option>
                                <option value="1500000">1,500,000 ุฌููู</option>
                                <option value="2000000">2,000,000 ุฌููู</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">ุงูุญุฏ ุงูุฃูุตู</label>
                            <input type="number" min="900000" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none" placeholder="ุฃุฏุฎู ุงููุจูุบ ุงูุฃูุตู">
                        </div>
                    </div>
                </div>

                <!-- Property Requirements -->
                <div class="mb-8">
                    <label class="block text-lg font-semibold text-gray-700 mb-4">ุงูููุงุตูุงุช ุงููุทููุจุฉ</label>
                    <div class="grid md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">ุงููุณุงุญุฉ ุงููุทููุจุฉ (ูุชุฑ ูุฑุจุน)</label>
                            <input type="number" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none" placeholder="ูุซุงู: 120">
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">ุนุฏุฏ ุงูุฃุฏูุงุฑ</label>
                            <select class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none">
                                <option value="">ุบูุฑ ูุญุฏุฏ</option>
                                <option value="1">ุฏูุฑ ูุงุญุฏ</option>
                                <option value="2">ุฏูุฑูู</option>
                                <option value="3">ุซูุงุซุฉ ุฃุฏูุงุฑ</option>
                                <option value="4+">ุฃูุซุฑ ูู ุซูุงุซุฉ ุฃุฏูุงุฑ</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">ูุณุชูู ุงูุชุดุทูุจ</label>
                            <select class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none">
                                <option value="">ุบูุฑ ูุญุฏุฏ</option>
                                <option value="finished">ูุชุดุทุจ ูุงูู</option>
                                <option value="semi-finished">ูุตู ุชุดุทูุจ</option>
                                <option value="unfinished">ุนูู ุงูุทูุจุฉ</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">ุณูุฉ ุงููุจุงูู</label>
                            <input type="number" min="1980" max="2024" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none" placeholder="ูุซุงู: 2020">
                        </div>
                    </div>
                </div>

                <!-- Additional Requirements -->
                <div class="mb-8">
                    <label class="block text-lg font-semibold text-gray-700 mb-4">ุงููุชุทูุจุงุช ุงูุฅุถุงููุฉ</label>
                    <div class="grid md:grid-cols-3 gap-4">
                        <label class="flex items-center space-x-2 space-x-reverse">
                            <input type="checkbox" class="w-5 h-5 text-blue-600">
                            <span>ุฃุณุงูุณูุฑ</span>
                        </label>
                        <label class="flex items-center space-x-2 space-x-reverse">
                            <input type="checkbox" class="w-5 h-5 text-blue-600">
                            <span>ุญุฏููุฉ</span>
                        </label>
                        <label class="flex items-center space-x-2 space-x-reverse">
                            <input type="checkbox" class="w-5 h-5 text-blue-600">
                            <span>ุฃูู ูุญุฑุงุณุฉ</span>
                        </label>
                        <label class="flex items-center space-x-2 space-x-reverse">
                            <input type="checkbox" class="w-5 h-5 text-blue-600">
                            <span>ุดุงุฑุน ุญููู</span>
                        </label>
                        <label class="flex items-center space-x-2 space-x-reverse">
                            <input type="checkbox" class="w-5 h-5 text-blue-600">
                            <span>ููุทูุฉ ุชุฌุงุฑูุฉ</span>
                        </label>
                        <label class="flex items-center space-x-2 space-x-reverse">
                            <input type="checkbox" class="w-5 h-5 text-blue-600">
                            <span>ููุงู ุนูููู</span>
                        </label>
                    </div>
                </div>

                <!-- Additional Notes -->
                <div class="mb-8">
                    <label class="block text-lg font-semibold text-gray-700 mb-4">ููุงุญุธุงุช ุฅุถุงููุฉ</label>
                    <textarea class="w-full p-4 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none h-32" placeholder="ุงูุชุจ ุฃู ูุชุทูุจุงุช ุฃู ููุงุญุธุงุช ุฅุถุงููุฉ..."></textarea>
                </div>

                <!-- Contact Information -->
                <div class="mb-8 bg-yellow-50 p-6 rounded-lg border-2 border-yellow-200">
                    <h3 class="text-lg font-semibold text-gray-700 mb-4">ูุนูููุงุช ุงูุชูุงุตู</h3>
                    <div class="grid md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">ุงูุงุณู</label>
                            <input type="text" id="buyer-name" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none" required>
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">ุฑูู ุงููุงุชุณุงุจ</label>
                            <input type="tel" id="buyer-whatsapp" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none" placeholder="01xxxxxxxxx" required>
                            <p class="text-sm text-red-600 mt-1">โ๏ธ ูุฌุจ ุฃู ูููู ุงูุฑูู ูุชุงุญ ุนูู ุงููุงุชุณุงุจ ููุชูุงุตู ุงูุณุฑูุน</p>
                        </div>
                    </div>
                </div>

                <button type="submit" class="w-full bg-blue-600 text-white py-4 rounded-xl text-lg font-semibold hover:bg-blue-700 transition-colors">
                    ุชุณุฌูู ุทูุจ ุงูุจุญุซ
                </button>
            </form>
        </div>
    </div>

    <!-- Listings Section -->
    <div id="listings-section" class="form-section container mx-auto px-4 py-8">
        <div class="max-w-6xl mx-auto">
            <h2 class="text-3xl font-bold text-gray-800 mb-8 text-center">ุงูุนูุงุฑุงุช ุงููุชุงุญุฉ ุญุงููุงู</h2>
            
            <div class="grid md:grid-cols-2 gap-8 mb-12">
                <!-- For Sale Properties -->
                <div class="bg-white rounded-2xl shadow-xl p-6">
                    <h3 class="text-2xl font-bold text-green-700 mb-6 text-center">๐ ุนูุงุฑุงุช ููุจูุน</h3>
                    <div id="sale-listings" class="space-y-4">
                        <!-- Sample listing -->
                        <div class="border-2 border-green-200 rounded-lg p-4 hover:shadow-lg transition-shadow">
                            <div class="flex justify-between items-start mb-2">
                                <h4 class="font-bold text-lg text-gray-800">ุดูุฉ ููุจูุน</h4>
                                <span class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-semibold">ููุจูุน</span>
                            </div>
                            <p class="text-gray-600 mb-2">๐ ููู ุญูุงุฏุฉ - ุดุงุฑุน ุณูุฏู ุฎูู</p>
                            <p class="text-gray-600 mb-2">๐ ุงููุณุงุญุฉ: 100 ูุชุฑ ูุฑุจุน</p>
                            <p class="text-gray-600 mb-2">๐ 3 ุบุฑู ูุตุงูุฉ ููุทุจุฎ</p>
                            <p class="text-gray-600 mb-2">๐๏ธ ูุจุงูู 2020 - ูุงููุฉ ุงูุนุฏุงุฏุงุช</p>
                            <div class="flex justify-between items-center mt-4">
                                <div>
                                    <p class="text-sm text-gray-500">ุณุนุฑ ุงููุชุฑ: 14,000 ุฌููู</p>
                                    <p class="text-xl font-bold text-green-600">ุงูุณุนุฑ ุงูููู: 1,400,000 ุฌููู</p>
                                </div>
                                <button class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors">ุชูุงุตู</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Wanted Properties -->
                <div class="bg-white rounded-2xl shadow-xl p-6">
                    <h3 class="text-2xl font-bold text-blue-700 mb-6 text-center">๐ ุทูุจุงุช ุดุฑุงุก</h3>
                    <div id="wanted-listings" class="space-y-4">
                        <!-- Sample wanted listing -->
                        <div class="border-2 border-blue-200 rounded-lg p-4 hover:shadow-lg transition-shadow">
                            <div class="flex justify-between items-start mb-2">
                                <h4 class="font-bold text-lg text-gray-800">ูุทููุจ ุจูุช</h4>
                                <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-semibold">ูุทููุจ</span>
                            </div>
                            <p class="text-gray-600 mb-2">๐ ููู ุญูุงุฏุฉ</p>
                            <p class="text-gray-600 mb-2">๐ ุงููุณุงุญุฉ: 150 ูุชุฑ ูุฑุจุน</p>
                            <p class="text-gray-600 mb-2">๐ ุฃุฑุถู ูุฏูุฑูู</p>
                            <div class="flex justify-between items-center mt-4">
                                <div>
                                    <p class="text-xl font-bold text-blue-600">ุงูููุฒุงููุฉ: 2,000,000 - 2,500,000 ุฌููู</p>
                                </div>
                                <button class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors">ุชูุงุตู</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Admin Login Section -->
    <div id="admin-login-section" class="form-section container mx-auto px-4 py-8">
        <div class="max-w-md mx-auto bg-white rounded-2xl shadow-xl p-8">
            <div class="text-center mb-8">
                <div class="text-6xl mb-4">๐</div>
                <h2 class="text-3xl font-bold text-purple-700 mb-2">ุฏุฎูู ุงูุฅุฏุงุฑุฉ</h2>
                <p class="text-gray-600">ูุฑุฌู ุฅุฏุฎุงู ุจูุงูุงุช ุงูุฏุฎูู ูููุตูู ุฅูู ููุญุฉ ุงูุชุญูู</p>
            </div>
            
            <form id="admin-login-form" onsubmit="adminLogin(event)">
                <div class="mb-6">
                    <label class="block text-lg font-semibold text-gray-700 mb-2">ุงุณู ุงููุณุชุฎุฏู</label>
                    <input type="text" id="admin-username" class="w-full p-4 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none" required>
                </div>
                
                <div class="mb-8">
                    <label class="block text-lg font-semibold text-gray-700 mb-2">ูููุฉ ุงููุฑูุฑ</label>
                    <input type="password" id="admin-password" class="w-full p-4 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none" required>
                </div>
                
                <button type="submit" class="w-full bg-purple-600 text-white py-4 rounded-xl text-lg font-semibold hover:bg-purple-700 transition-colors">
                    ุฏุฎูู ููุญุฉ ุงูุชุญูู
                </button>
            </form>
            
            <div class="text-center mt-6">
                <button onclick="showSection('home')" class="text-purple-600 hover:text-purple-800 transition-colors">ุงูุนูุฏุฉ ููุฑุฆูุณูุฉ</button>
            </div>
        </div>
    </div>

    <!-- Admin Dashboard Section -->
    <div id="admin-dashboard-section" class="form-section">
        <!-- Admin Header -->
        <div class="bg-purple-700 text-white shadow-lg">
            <div class="container mx-auto px-4 py-4">
                <div class="flex justify-between items-center">
                    <h1 class="text-2xl font-bold">๐ ููุญุฉ ุชุญูู ุงููุณุชูุจู ููุชุณููู ุงูุนูุงุฑู</h1>
                    <div class="flex items-center gap-4">
                        <span id="admin-welcome" class="text-purple-200"></span>
                        <button onclick="adminLogout()" class="bg-purple-800 hover:bg-purple-900 px-4 py-2 rounded-lg transition-colors">ุชุณุฌูู ุงูุฎุฑูุฌ</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="container mx-auto px-4 py-8">
            <!-- Admin Navigation -->
            <div class="bg-white rounded-2xl shadow-xl p-6 mb-8">
                <div class="flex flex-wrap gap-3 justify-center">
                    <button onclick="showAdminTab('registrations')" class="admin-tab-btn active bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors text-sm">๐ ุงูุนูุงุฑุงุช</button>
                    <button onclick="showAdminTab('search')" class="admin-tab-btn bg-gray-200 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-300 transition-colors text-sm">๐ ุงูุจุญุซ ุงููุชูุฏู</button>
                    <button onclick="showAdminTab('matching')" class="admin-tab-btn bg-gray-200 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-300 transition-colors text-sm">๐ค ูุธุงู ุงูุชูููู</button>
                    <button onclick="showAdminTab('commission')" class="admin-tab-btn bg-gray-200 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-300 transition-colors text-sm">๐ฐ ุญุณุงุจ ุงูุนูููุฉ</button>
                    <button onclick="showAdminTab('inquiries')" class="admin-tab-btn bg-gray-200 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-300 transition-colors text-sm">๐ ุงูุงุณุชุนูุงูุงุช</button>
                    <button onclick="showAdminTab('contracting')" class="admin-tab-btn bg-gray-200 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-300 transition-colors text-sm">๐๏ธ ุทูุจุงุช ุงูุฎุฏูุงุช</button>
                    <button onclick="showAdminTab('contracting-clients')" class="admin-tab-btn bg-gray-200 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-300 transition-colors text-sm">๐ท ุนููุงุก ุงูููุงููุงุช</button>
                    <button onclick="showAdminTab('services')" class="admin-tab-btn bg-gray-200 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-300 transition-colors text-sm">โ๏ธ ุฅุฏุงุฑุฉ ุงูุฎุฏูุงุช</button>
                    <button onclick="showAdminTab('admins')" class="admin-tab-btn bg-gray-200 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-300 transition-colors text-sm">๐ฅ ุฅุฏุงุฑุฉ ุงููุฏูุฑูู</button>
                    <button onclick="showAdminTab('statistics')" class="admin-tab-btn bg-gray-200 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-300 transition-colors text-sm">๐ ุงูุฅุญุตุงุฆูุงุช</button>
                </div>
            </div>

            <!-- Notifications Bell -->
            <div id="notification-bell" class="fixed top-4 left-4 z-50">
                <button onclick="showNotifications()" class="relative bg-red-500 text-white p-3 rounded-full shadow-lg hover:bg-red-600 transition-colors">
                    ๐
                    <span id="notification-count" class="absolute -top-2 -right-2 bg-yellow-400 text-black text-xs font-bold px-2 py-1 rounded-full hidden">0</span>
                </button>
            </div>

            <!-- Advanced Search Tab -->
            <div id="admin-search-tab" class="admin-tab">
                <div class="bg-white rounded-2xl shadow-xl p-8">
                    <h3 class="text-2xl font-bold text-blue-700 mb-6">๐ ุงูุจุญุซ ุงููุชูุฏู ุจุงูููุงุทู</h3>
                    
                    <!-- Location Search Buttons -->
                    <div class="grid md:grid-cols-4 gap-4 mb-8">
                        <button onclick="searchByLocation('damanhour')" class="location-search-btn bg-blue-500 text-white p-4 rounded-xl hover:bg-blue-600 transition-colors">
                            <div class="text-2xl mb-2">๐๏ธ</div>
                            <div class="font-bold">ุฏููููุฑ</div>
                            <div class="text-sm mt-1" id="damanhour-count">0 ุนูุงุฑ</div>
                        </button>
                        <button onclick="searchByLocation('kom-hamada')" class="location-search-btn bg-green-500 text-white p-4 rounded-xl hover:bg-green-600 transition-colors">
                            <div class="text-2xl mb-2">๐ฟ</div>
                            <div class="font-bold">ููู ุญูุงุฏุฉ</div>
                            <div class="text-sm mt-1" id="kom-hamada-count">0 ุนูุงุฑ</div>
                        </button>
                        <button onclick="searchByLocation('itay')" class="location-search-btn bg-purple-500 text-white p-4 rounded-xl hover:bg-purple-600 transition-colors">
                            <div class="text-2xl mb-2">๐๏ธ</div>
                            <div class="font-bold">ุฅูุชุงู ุงูุจุงุฑูุฏ</div>
                            <div class="text-sm mt-1" id="itay-count">0 ุนูุงุฑ</div>
                        </button>
                        <button onclick="searchByLocation('delengat')" class="location-search-btn bg-orange-500 text-white p-4 rounded-xl hover:bg-orange-600 transition-colors">
                            <div class="text-2xl mb-2">๐พ</div>
                            <div class="font-bold">ุงูุฏููุฌุงุช</div>
                            <div class="text-sm mt-1" id="delengat-count">0 ุนูุงุฑ</div>
                        </button>
                    </div>
                    
                    <!-- Advanced Filters -->
                    <div class="bg-gray-50 p-6 rounded-xl mb-6">
                        <h4 class="text-lg font-bold text-gray-700 mb-4">ููุงุชุฑ ุงูุจุญุซ ุงููุชูุฏู</h4>
                        <div class="grid md:grid-cols-3 gap-4">
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">ููุน ุงูุนูุงุฑ</label>
                                <select id="search-property-type" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none">
                                    <option value="">ุฌููุน ุงูุฃููุงุน</option>
                                    <option value="apartment">ุดูุฉ</option>
                                    <option value="house">ุจูุช</option>
                                    <option value="land">ุฃุฑุถ</option>
                                    <option value="shop">ูุญู</option>
                                    <option value="office">ููุชุจ</option>
                                    <option value="villa">ูููุง</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">ููุน ุงูุนููู</label>
                                <select id="search-client-type" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none">
                                    <option value="">ุจุงุฆุน ูุดุงุฑู</option>
                                    <option value="seller">ุจุงุฆุน ููุท</option>
                                    <option value="buyer">ุดุงุฑู ููุท</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">ุงูููุทูุฉ</label>
                                <select id="search-location-filter" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none">
                                    <option value="">ุฌููุน ุงูููุงุทู</option>
                                    <option value="damanhour">ุฏููููุฑ</option>
                                    <option value="kom-hamada">ููู ุญูุงุฏุฉ</option>
                                    <option value="itay">ุฅูุชุงู ุงูุจุงุฑูุฏ</option>
                                    <option value="delengat">ุงูุฏููุฌุงุช</option>
                                </select>
                            </div>
                        </div>
                        <div class="mt-4">
                            <button onclick="applyAdvancedSearch()" class="bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors">ุชุทุจูู ุงูุจุญุซ</button>
                            <button onclick="clearSearchFilters()" class="bg-gray-500 text-white px-6 py-3 rounded-lg hover:bg-gray-600 transition-colors ml-2">ูุณุญ ุงูููุงุชุฑ</button>
                        </div>
                    </div>
                    
                    <!-- Search Results -->
                    <div id="search-results" class="space-y-6">
                        <div class="text-center text-gray-500 py-8">
                            <div class="text-4xl mb-4">๐</div>
                            <p>ุงุฎุชุฑ ููุทูุฉ ุฃู ุงุณุชุฎุฏู ุงูููุงุชุฑ ููุจุญุซ ุนู ุงูุนูุงุฑุงุช</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Properties Tab -->
            <div id="admin-registrations-tab" class="admin-tab active">
                <div class="grid md:grid-cols-2 gap-8">
                    <!-- Properties for Sale -->
                    <div class="bg-white rounded-2xl shadow-xl p-6">
                        <div class="flex justify-between items-center mb-6">
                            <h3 class="text-xl font-bold text-green-700">๐ ุงูุนูุงุฑุงุช ููุจูุน</h3>
                            <span id="sellers-count" class="bg-green-100 text-green-800 px-3 py-1 rounded-full font-semibold">0</span>
                        </div>
                        <div id="admin-sellers" class="space-y-4 max-h-96 overflow-y-auto">
                            <!-- Properties for sale will appear here -->
                        </div>
                    </div>

                    <!-- Property Requests -->
                    <div class="bg-white rounded-2xl shadow-xl p-6">
                        <div class="flex justify-between items-center mb-6">
                            <h3 class="text-xl font-bold text-blue-700">๐ ุทูุจุงุช ุงูุดุฑุงุก</h3>
                            <span id="buyers-count" class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full font-semibold">0</span>
                        </div>
                        <div id="admin-buyers" class="space-y-4 max-h-96 overflow-y-auto">
                            <!-- Property purchase requests will appear here -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Matching System Tab -->
            <div id="admin-matching-tab" class="admin-tab">
                <div class="bg-white rounded-2xl shadow-xl p-8">
                    <h3 class="text-2xl font-bold text-green-700 mb-6">๐ค ูุธุงู ุงูุชูููู ุจูู ุงูุจุงุฆุนูู ูุงููุดุชุฑูู</h3>
                    
                    <!-- Location Matching Buttons -->
                    <div class="grid md:grid-cols-4 gap-4 mb-8">
                        <button onclick="findMatches('damanhour')" class="bg-blue-500 text-white p-4 rounded-xl hover:bg-blue-600 transition-colors">
                            <div class="text-2xl mb-2">๐๏ธ</div>
                            <div class="font-bold">ุฏููููุฑ</div>
                            <div class="text-sm mt-1" id="damanhour-matches">0 ุชูุงูู</div>
                        </button>
                        <button onclick="findMatches('kom-hamada')" class="bg-green-500 text-white p-4 rounded-xl hover:bg-green-600 transition-colors">
                            <div class="text-2xl mb-2">๐ฟ</div>
                            <div class="font-bold">ููู ุญูุงุฏุฉ</div>
                            <div class="text-sm mt-1" id="kom-hamada-matches">0 ุชูุงูู</div>
                        </button>
                        <button onclick="findMatches('itay')" class="bg-purple-500 text-white p-4 rounded-xl hover:bg-purple-600 transition-colors">
                            <div class="text-2xl mb-2">๐๏ธ</div>
                            <div class="font-bold">ุฅูุชุงู ุงูุจุงุฑูุฏ</div>
                            <div class="text-sm mt-1" id="itay-matches">0 ุชูุงูู</div>
                        </button>
                        <button onclick="findMatches('delengat')" class="bg-orange-500 text-white p-4 rounded-xl hover:bg-orange-600 transition-colors">
                            <div class="text-2xl mb-2">๐พ</div>
                            <div class="font-bold">ุงูุฏููุฌุงุช</div>
                            <div class="text-sm mt-1" id="delengat-matches">0 ุชูุงูู</div>
                        </button>
                    </div>
                    
                    <!-- Auto Match Button -->
                    <div class="text-center mb-6">
                        <button onclick="autoMatchAll()" class="bg-gradient-to-r from-green-500 to-blue-500 text-white px-8 py-4 rounded-xl text-lg font-bold hover:from-green-600 hover:to-blue-600 transition-colors">
                            ๐ฏ ุงูุจุญุซ ุงูุชููุงุฆู ุนู ุฌููุน ุงูุชูุงููุงุช
                        </button>
                    </div>
                    
                    <!-- Matching Results -->
                    <div id="matching-results" class="space-y-6">
                        <div class="text-center text-gray-500 py-8">
                            <div class="text-4xl mb-4">๐ค</div>
                            <p>ุงุฎุชุฑ ููุทูุฉ ููุจุญุซ ุนู ุงูุชูุงููุงุช ุฃู ุงุณุชุฎุฏู ุงูุจุญุซ ุงูุชููุงุฆู</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Commission Calculator Tab -->
            <div id="admin-commission-tab" class="admin-tab">
                <div class="bg-white rounded-2xl shadow-xl p-8">
                    <h3 class="text-2xl font-bold text-yellow-700 mb-6">๐ฐ ุญุงุณุจุฉ ุงูุนูููุฉ ุงูุนูุงุฑูุฉ</h3>
                    
                    <!-- Commission Calculator -->
                    <div class="grid md:grid-cols-2 gap-8">
                        <div class="bg-green-50 p-6 rounded-xl">
                            <h4 class="text-lg font-bold text-green-700 mb-4">๐ต ุญุณุงุจ ุนูููุฉ ุงูุจุงุฆุน</h4>
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-semibold text-gray-700 mb-2">ุณุนุฑ ุงูุนูุงุฑ (ุฌููู)</label>
                                    <input type="number" id="seller-property-price" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-green-500 focus:outline-none" placeholder="ูุซุงู: 2000000">
                                </div>
                                <div>
                                    <label class="block text-sm font-semibold text-gray-700 mb-2">ูุณุจุฉ ุงูุนูููุฉ (%)</label>
                                    <select id="seller-commission-rate" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-green-500 focus:outline-none">
                                        <option value="2.5">2.5% (ุงููุนุฏู ุงูุนุงููู)</option>
                                        <option value="2">2% (ูุฎูุถุฉ)</option>
                                        <option value="3">3% (ูุฑุชูุนุฉ)</option>
                                        <option value="1.5">1.5% (ุฎุงุตุฉ)</option>
                                    </select>
                                </div>
                                <button onclick="calculateSellerCommission()" class="w-full bg-green-600 text-white py-3 rounded-lg hover:bg-green-700 transition-colors">ุงุญุณุจ ุนูููุฉ ุงูุจุงุฆุน</button>
                                <div id="seller-commission-result" class="bg-white p-4 rounded-lg border-2 border-green-300 hidden">
                                    <!-- Results will appear here -->
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-blue-50 p-6 rounded-xl">
                            <h4 class="text-lg font-bold text-blue-700 mb-4">๐ณ ุญุณุงุจ ุนูููุฉ ุงููุดุชุฑู</h4>
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-semibold text-gray-700 mb-2">ุณุนุฑ ุงูุนูุงุฑ (ุฌููู)</label>
                                    <input type="number" id="buyer-property-price" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none" placeholder="ูุซุงู: 2000000">
                                </div>
                                <div>
                                    <label class="block text-sm font-semibold text-gray-700 mb-2">ูุณุจุฉ ุงูุนูููุฉ (%)</label>
                                    <select id="buyer-commission-rate" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none">
                                        <option value="2.5">2.5% (ุงููุนุฏู ุงูุนุงููู)</option>
                                        <option value="2">2% (ูุฎูุถุฉ)</option>
                                        <option value="3">3% (ูุฑุชูุนุฉ)</option>
                                        <option value="1.5">1.5% (ุฎุงุตุฉ)</option>
                                    </select>
                                </div>
                                <button onclick="calculateBuyerCommission()" class="w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition-colors">ุงุญุณุจ ุนูููุฉ ุงููุดุชุฑู</button>
                                <div id="buyer-commission-result" class="bg-white p-4 rounded-lg border-2 border-blue-300 hidden">
                                    <!-- Results will appear here -->
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Total Commission Summary -->
                    <div class="mt-8 bg-yellow-50 p-6 rounded-xl">
                        <h4 class="text-lg font-bold text-yellow-700 mb-4">๐ ููุฎุต ุงูุนูููุฉ ุงูุฅุฌูุงููุฉ</h4>
                        <div id="total-commission-summary" class="grid md:grid-cols-3 gap-4">
                            <div class="bg-white p-4 rounded-lg text-center">
                                <div class="text-2xl font-bold text-green-600" id="total-seller-commission">0</div>
                                <div class="text-sm text-gray-600">ุนูููุฉ ุงูุจุงุฆุน</div>
                            </div>
                            <div class="bg-white p-4 rounded-lg text-center">
                                <div class="text-2xl font-bold text-blue-600" id="total-buyer-commission">0</div>
                                <div class="text-sm text-gray-600">ุนูููุฉ ุงููุดุชุฑู</div>
                            </div>
                            <div class="bg-white p-4 rounded-lg text-center">
                                <div class="text-2xl font-bold text-purple-600" id="total-commission">0</div>
                                <div class="text-sm text-gray-600">ุฅุฌูุงูู ุงูุนูููุฉ</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Inquiries Management Tab -->
            <div id="admin-inquiries-tab" class="admin-tab">
                <div class="bg-white rounded-2xl shadow-xl p-8">
                    <h3 class="text-2xl font-bold text-indigo-700 mb-6">๐ ุฅุฏุงุฑุฉ ุงูุงุณุชุนูุงูุงุช ูุงููุชุงุจุนุฉ</h3>
                    
                    <!-- Quick Actions -->
                    <div class="grid md:grid-cols-4 gap-4 mb-8">
                        <button onclick="showInquiryForm()" class="bg-indigo-500 text-white p-4 rounded-xl hover:bg-indigo-600 transition-colors">
                            <div class="text-2xl mb-2">โ</div>
                            <div class="font-bold">ุฅุถุงูุฉ ุงุณุชุนูุงู</div>
                        </button>
                        <button onclick="filterInquiries('pending')" class="bg-yellow-500 text-white p-4 rounded-xl hover:bg-yellow-600 transition-colors">
                            <div class="text-2xl mb-2">โณ</div>
                            <div class="font-bold">ููุฏ ุงููุชุงุจุนุฉ</div>
                            <div class="text-sm mt-1" id="pending-inquiries">0</div>
                        </button>
                        <button onclick="filterInquiries('contacted')" class="bg-green-500 text-white p-4 rounded-xl hover:bg-green-600 transition-colors">
                            <div class="text-2xl mb-2">โ</div>
                            <div class="font-bold">ุชู ุงูุชูุงุตู</div>
                            <div class="text-sm mt-1" id="contacted-inquiries">0</div>
                        </button>
                        <button onclick="filterInquiries('scheduled')" class="bg-blue-500 text-white p-4 rounded-xl hover:bg-blue-600 transition-colors">
                            <div class="text-2xl mb-2">๐</div>
                            <div class="font-bold">ููุงุนูุฏ ูุญุฏุฏุฉ</div>
                            <div class="text-sm mt-1" id="scheduled-inquiries">0</div>
                        </button>
                    </div>
                    
                    <!-- Inquiries List -->
                    <div id="inquiries-list" class="space-y-4">
                        <div class="text-center text-gray-500 py-8">
                            <div class="text-4xl mb-4">๐</div>
                            <p>ูุง ุชูุฌุฏ ุงุณุชุนูุงูุงุช ุญุชู ุงูุขู. ุงุถุบุท "ุฅุถุงูุฉ ุงุณุชุนูุงู" ูุจุฏุก ุงููุชุงุจุนุฉ</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Service Requests Tab -->
            <div id="admin-contracting-tab" class="admin-tab">
                <div class="bg-white rounded-2xl shadow-xl p-8">
                    <h3 class="text-2xl font-bold text-orange-700 mb-6">๐๏ธ ุทูุจุงุช ุงูุฎุฏูุงุช</h3>
                    
                    <!-- Service Requests -->
                    <div class="bg-gray-50 p-6 rounded-xl">
                        <h4 class="text-lg font-bold text-gray-700 mb-4">ุทูุจุงุช ุงูุฎุฏูุงุช ุงููุงุฑุฏุฉ</h4>
                        <div id="service-requests" class="space-y-4">
                            <div class="text-center text-gray-500 py-8">
                                <div class="text-4xl mb-4">๐๏ธ</div>
                                <p>ูุง ุชูุฌุฏ ุทูุจุงุช ุฎุฏูุงุช ุญุชู ุงูุขู</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Contracting Clients Tab -->
            <div id="admin-contracting-clients-tab" class="admin-tab">
                <div class="bg-white rounded-2xl shadow-xl p-8">
                    <div class="flex justify-between items-center mb-8">
                        <h3 class="text-2xl font-bold text-orange-700">๐ท ุนููุงุก ุงูููุงููุงุช</h3>
                        <div class="flex items-center gap-4">
                            <span id="contracting-clients-count" class="bg-orange-100 text-orange-800 px-4 py-2 rounded-full font-semibold">0 ุนููู</span>
                            <button onclick="exportContractingClients()" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors">๐ ุชุตุฏูุฑ ุงูุจูุงูุงุช</button>
                        </div>
                    </div>

                    <!-- Search and Filter -->
                    <div class="bg-orange-50 p-4 rounded-lg mb-6">
                        <div class="grid md:grid-cols-3 gap-4">
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">ุงูุจุญุซ ุจุงูุงุณู ุฃู ุงูุฑูู</label>
                                <input type="text" id="contracting-search" onkeyup="filterContractingClients()" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:outline-none" placeholder="ุงุจุญุซ...">
                            </div>
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">ููุชุฑุฉ ุญุณุจ ุงูุฎุฏูุฉ</label>
                                <select id="contracting-service-filter" onchange="filterContractingClients()" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:outline-none">
                                    <option value="">ุฌููุน ุงูุฎุฏูุงุช</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">ููุชุฑุฉ ุญุณุจ ุงูุญุงูุฉ</label>
                                <select id="contracting-status-filter" onchange="filterContractingClients()" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:outline-none">
                                    <option value="">ุฌููุน ุงูุญุงูุงุช</option>
                                    <option value="pending">ููุฏ ุงููุฑุงุฌุนุฉ</option>
                                    <option value="contacted">ุชู ุงูุชูุงุตู</option>
                                    <option value="in-progress">ููุฏ ุงูุชูููุฐ</option>
                                    <option value="completed">ููุชูู</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Contracting Clients List -->
                    <div id="contracting-clients-list" class="space-y-4">
                        <div class="text-center text-gray-500 py-8">
                            <div class="text-4xl mb-4">๐ท</div>
                            <p>ูุง ุชูุฌุฏ ุนููุงุก ููุงููุงุช ุญุชู ุงูุขู</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Services Management Tab -->
            <div id="admin-services-tab" class="admin-tab">
                <div class="bg-white rounded-2xl shadow-xl p-8">
                    <div class="flex justify-between items-center mb-8">
                        <h3 class="text-2xl font-bold text-orange-700">โ๏ธ ุฅุฏุงุฑุฉ ุงูุฎุฏูุงุช</h3>
                        <button onclick="showAddServiceForm()" class="bg-orange-600 text-white px-6 py-3 rounded-lg hover:bg-orange-700 transition-colors">โ ุฅุถุงูุฉ ุฎุฏูุฉ ุฌุฏูุฏุฉ</button>
                    </div>

                    <!-- Add Service Form -->
                    <div id="add-service-form" class="bg-orange-50 rounded-lg p-6 mb-8 hidden">
                        <h4 class="text-lg font-bold text-orange-700 mb-4">ุฅุถุงูุฉ ุฎุฏูุฉ ุฌุฏูุฏุฉ</h4>
                        <form onsubmit="addNewService(event)">
                            <div class="grid md:grid-cols-2 gap-4 mb-4">
                                <div>
                                    <label class="block text-sm font-semibold text-gray-700 mb-2">ุนููุงู ุงูุฎุฏูุฉ</label>
                                    <input type="text" id="new-service-title" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:outline-none" required>
                                </div>
                                <div>
                                    <label class="block text-sm font-semibold text-gray-700 mb-2">ุงููุฆุฉ</label>
                                    <select id="new-service-category" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:outline-none" required>
                                        <option value="">ุงุฎุชุฑ ุงููุฆุฉ</option>
                                        <option value="ุชุตููู">ุชุตููู</option>
                                        <option value="ููุงููุงุช">ููุงููุงุช</option>
                                        <option value="ุชุดุทูุจุงุช">ุชุดุทูุจุงุช</option>
                                        <option value="ุตูุงูุฉ">ุตูุงูุฉ</option>
                                        <option value="ุงุณุชุดุงุฑุงุช">ุงุณุชุดุงุฑุงุช</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-semibold text-gray-700 mb-2">ุงูุฃููููุฉ</label>
                                    <select id="new-service-icon" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:outline-none" required>
                                        <option value="">ุงุฎุชุฑ ุงูุฃููููุฉ</option>
                                        <option value="๐">๐ ุดูุฉ</option>
                                        <option value="๐ช">๐ช ูุญู</option>
                                        <option value="๐ข">๐ข ููุชุจ</option>
                                        <option value="๐๏ธ">๐๏ธ ุจูุงุก</option>
                                        <option value="๐">๐ ููุชุงุญ</option>
                                        <option value="๐จ">๐จ ุชุตููู</option>
                                        <option value="๐ง">๐ง ุตูุงูุฉ</option>
                                        <option value="๐">๐ ููุฏุณุฉ</option>
                                        <option value="๐ก">๐ก ุฅุถุงุกุฉ</option>
                                        <option value="๐ช">๐ช ููุงูุฐ</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-semibold text-gray-700 mb-2">ุงูุณุนุฑ</label>
                                    <input type="text" id="new-service-price" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:outline-none" placeholder="ูุซุงู: ูุจุฏุฃ ูู 15,000 ุฌููู" required>
                                </div>
                            </div>
                            <div class="mb-4">
                                <label class="block text-sm font-semibold text-gray-700 mb-2">ูุตู ุงูุฎุฏูุฉ</label>
                                <textarea id="new-service-description" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:outline-none h-24" placeholder="ุงูุชุจ ูุตู ููุตู ููุฎุฏูุฉ..." required></textarea>
                            </div>
                            <div class="mb-4">
                                <label class="block text-sm font-semibold text-gray-700 mb-2">ุงููููุฒุงุช (ูู ููุฒุฉ ูู ุณุทุฑ ูููุตู)</label>
                                <textarea id="new-service-features" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:outline-none h-24" placeholder="ุชุตููู ุซูุงุซู ุงูุฃุจุนุงุฏ&#10;ุงุฎุชูุงุฑ ุงูุฃููุงู ูุงูููุงุฏ&#10;ุชุฎุทูุท ุงููุณุงุญุงุช" required></textarea>
                            </div>
                            <div class="mb-4">
                                <label class="flex items-center">
                                    <input type="checkbox" id="new-service-active" class="mr-2 w-5 h-5" checked>
                                    <span class="font-semibold text-gray-700">ุฎุฏูุฉ ูุดุทุฉ (ุณุชุธูุฑ ูู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ)</span>
                                </label>
                            </div>
                            <div class="flex gap-4">
                                <button type="submit" class="bg-orange-600 text-white px-6 py-2 rounded-lg hover:bg-orange-700 transition-colors">ุฅุถุงูุฉ ุงูุฎุฏูุฉ</button>
                                <button type="button" onclick="hideAddServiceForm()" class="bg-gray-500 text-white px-6 py-2 rounded-lg hover:bg-gray-600 transition-colors">ุฅูุบุงุก</button>
                            </div>
                        </form>
                    </div>

                    <!-- Services List -->
                    <div id="services-list" class="space-y-4">
                        <!-- Services will appear here -->
                    </div>
                </div>
            </div>

            <!-- Admins Management Tab -->
            <div id="admin-admins-tab" class="admin-tab">
                <div class="bg-white rounded-2xl shadow-xl p-8">
                    <div class="flex justify-between items-center mb-8">
                        <h3 class="text-2xl font-bold text-purple-700">ุฅุฏุงุฑุฉ ุงููุฏูุฑูู</h3>
                        <button onclick="showAddAdminForm()" class="bg-purple-600 text-white px-6 py-3 rounded-lg hover:bg-purple-700 transition-colors">โ ุฅุถุงูุฉ ูุฏูุฑ ุฌุฏูุฏ</button>
                    </div>

                    <!-- Add Admin Form -->
                    <div id="add-admin-form" class="bg-purple-50 rounded-lg p-6 mb-8 hidden">
                        <h4 class="text-lg font-bold text-purple-700 mb-4">ุฅุถุงูุฉ ูุฏูุฑ ุฌุฏูุฏ</h4>
                        <form onsubmit="addNewAdmin(event)">
                            <div class="grid md:grid-cols-2 gap-4 mb-4">
                                <div>
                                    <label class="block text-sm font-semibold text-gray-700 mb-2">ุงุณู ุงููุณุชุฎุฏู</label>
                                    <input type="text" id="new-admin-username" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none" required>
                                </div>
                                <div>
                                    <label class="block text-sm font-semibold text-gray-700 mb-2">ูููุฉ ุงููุฑูุฑ</label>
                                    <input type="password" id="new-admin-password" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none" required>
                                </div>
                            </div>
                            <div class="mb-4">
                                <label class="block text-sm font-semibold text-gray-700 mb-2">ุงูุงุณู ุงููุงูู</label>
                                <input type="text" id="new-admin-fullname" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none" required>
                            </div>
                            <div class="flex gap-4">
                                <button type="submit" class="bg-purple-600 text-white px-6 py-2 rounded-lg hover:bg-purple-700 transition-colors">ุฅุถุงูุฉ ุงููุฏูุฑ</button>
                                <button type="button" onclick="hideAddAdminForm()" class="bg-gray-500 text-white px-6 py-2 rounded-lg hover:bg-gray-600 transition-colors">ุฅูุบุงุก</button>
                            </div>
                        </form>
                    </div>

                    <!-- Admins List -->
                    <div id="admins-list" class="space-y-4">
                        <!-- Admins will appear here -->
                    </div>
                </div>
            </div>

            <!-- Statistics Tab -->
            <div id="admin-statistics-tab" class="admin-tab">
                <div class="grid md:grid-cols-3 gap-6 mb-8">
                    <div class="bg-white rounded-2xl shadow-xl p-6 text-center">
                        <div class="text-4xl mb-2">๐</div>
                        <h3 class="text-2xl font-bold text-green-600" id="total-properties">0</h3>
                        <p class="text-gray-600">ุฅุฌูุงูู ุงูุนูุงุฑุงุช</p>
                    </div>
                    <div class="bg-white rounded-2xl shadow-xl p-6 text-center">
                        <div class="text-4xl mb-2">๐</div>
                        <h3 class="text-2xl font-bold text-blue-600" id="total-requests">0</h3>
                        <p class="text-gray-600">ุทูุจุงุช ุงูุดุฑุงุก</p>
                    </div>
                    <div class="bg-white rounded-2xl shadow-xl p-6 text-center">
                        <div class="text-4xl mb-2">๐ฅ</div>
                        <h3 class="text-2xl font-bold text-purple-600" id="total-admins">1</h3>
                        <p class="text-gray-600">ุนุฏุฏ ุงููุฏูุฑูู</p>
                    </div>
                </div>

                <div class="bg-white rounded-2xl shadow-xl p-8">
                    <h3 class="text-2xl font-bold text-gray-800 mb-6">ุฅุญุตุงุฆูุงุช ููุตูุฉ</h3>
                    <div class="grid md:grid-cols-2 gap-8">
                        <div>
                            <h4 class="text-lg font-bold text-gray-700 mb-4">ุงูุนูุงุฑุงุช ุญุณุจ ุงูููุน</h4>
                            <div id="property-types-stats" class="space-y-2">
                                <!-- Property type statistics will appear here -->
                            </div>
                        </div>
                        <div>
                            <h4 class="text-lg font-bold text-gray-700 mb-4">ุงูุนูุงุฑุงุช ุญุณุจ ุงูููุทูุฉ</h4>
                            <div id="location-stats" class="space-y-2">
                                <!-- Location statistics will appear here -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentPropertyType = '';
        let currentBuyerPropertyType = '';
        let sellerRegistrations = [];
        let buyerRegistrations = [];
        let currentAdmin = null;
        let adminClickCounter = 0;
        let inquiries = [];
        let notifications = [];
        let serviceRequests = [];
        let contractingClients = [];
        let contractingServices = [
            {
                id: 1,
                title: 'ุชุตููู ุงูุดูู ุงูุณูููุฉ',
                description: 'ุฎุฏูุงุช ุชุตููู ุฏุงุฎูู ูุฎุงุฑุฌู ููุดูู ุงูุณูููุฉ ุจุฃุญุฏุซ ุงูุทุฑู ูุงูุชูููุงุช',
                features: ['ุชุตููู ุซูุงุซู ุงูุฃุจุนุงุฏ', 'ุงุฎุชูุงุฑ ุงูุฃููุงู ูุงูููุงุฏ', 'ุชุฎุทูุท ุงููุณุงุญุงุช', 'ุฅุดุฑุงู ุนูู ุงูุชูููุฐ'],
                price: 'ููุงุณุชุนูุงู ุนู ุงูุฃุณุนุงุฑ ุชูุงุตู ูุนูุง',
                category: 'ุชุตููู',
                icon: '๐',
                active: true,
                createdAt: new Date().toLocaleString('ar-EG')
            },
            {
                id: 2,
                title: 'ุชุตููู ุงููุญูุงุช ุงูุชุฌุงุฑูุฉ',
                description: 'ุชุตููู ูุชุฌููุฒ ุงููุญูุงุช ุงูุชุฌุงุฑูุฉ ูุฌุฐุจ ุงูุนููุงุก ูุฒูุงุฏุฉ ุงููุจูุนุงุช',
                features: ['ุชุตููู ุงููุงุฌูุฉ', 'ุชุฎุทูุท ุงููุณุงุญุฉ ุงูุฏุงุฎููุฉ', 'ุงูุฅุถุงุกุฉ ูุงูุฏูููุฑ', 'ุฃูุธูุฉ ุงูุนุฑุถ'],
                price: 'ููุงุณุชุนูุงู ุนู ุงูุฃุณุนุงุฑ ุชูุงุตู ูุนูุง',
                category: 'ุชุตููู',
                icon: '๐ช',
                active: true,
                createdAt: new Date().toLocaleString('ar-EG')
            },
            {
                id: 3,
                title: 'ููุงููุงุช ุงุณุชูุงู ุนูู ุงูููุชุงุญ',
                description: 'ููุงููุงุช ูุงููุฉ ูู ุงูุจุฏุงูุฉ ุญุชู ุงูุงุณุชูุงู ุงูููุงุฆู ุฌุงูุฒ ููุณูู',
                features: ['ุฃุนูุงู ุงูุจูุงุก ุงููุงููุฉ', 'ุงูุชุดุทูุจุงุช ุงูุฏุงุฎููุฉ', 'ุงูุณุจุงูุฉ ูุงูููุฑุจุงุก', 'ุงูุฏูุงูุงุช ูุงูุฃุฑุถูุงุช'],
                price: 'ููุงุณุชุนูุงู ุนู ุงูุฃุณุนุงุฑ ุชูุงุตู ูุนูุง',
                category: 'ููุงููุงุช',
                icon: '๐',
                active: true,
                createdAt: new Date().toLocaleString('ar-EG')
            }
        ];
        let adminUsers = [
            {
                id: 1,
                username: 'admintito',
                password: '0453328124',
                fullName: 'ุงููุฏูุฑ ุงูุฑุฆูุณู',
                isMainAdmin: true,
                createdAt: new Date().toLocaleString('ar-EG')
            }
        ];

        // Notification system
        function addNotification(title, message, type = 'info') {
            const notification = {
                id: Date.now(),
                title: title,
                message: message,
                type: type,
                timestamp: new Date().toLocaleString('ar-EG'),
                read: false
            };
            
            notifications.unshift(notification);
            updateNotificationBell();
            playNotificationSound();
        }

        function updateNotificationBell() {
            const unreadCount = notifications.filter(n => !n.read).length;
            const countElement = document.getElementById('notification-count');
            
            if (unreadCount > 0) {
                countElement.textContent = unreadCount;
                countElement.classList.remove('hidden');
            } else {
                countElement.classList.add('hidden');
            }
        }

        function playNotificationSound() {
            // Create audio context for notification sound
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.frequency.setValueAtTime(800, audioContext.currentTime);
                oscillator.frequency.setValueAtTime(600, audioContext.currentTime + 0.1);
                
                gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
                
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.3);
            } catch (e) {
                console.log('Audio notification not supported');
            }
        }

        function showNotifications() {
            const modalDiv = document.createElement('div');
            modalDiv.className = 'fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4';
            modalDiv.innerHTML = `
                <div class="bg-white rounded-2xl p-6 max-w-2xl w-full max-h-full overflow-y-auto">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-xl font-bold text-gray-800">๐ ุงูุฅุดุนุงุฑุงุช</h3>
                        <div class="flex gap-2">
                            <button onclick="markAllAsRead()" class="text-sm bg-blue-500 text-white px-3 py-1 rounded hover:bg-blue-600 transition-colors">ุชุญุฏูุฏ ุงููู ูููุฑูุก</button>
                            <button onclick="this.closest('.fixed').remove()" class="text-gray-500 hover:text-gray-700 text-2xl">&times;</button>
                        </div>
                    </div>
                    
                    <div class="space-y-3 max-h-96 overflow-y-auto">
                        ${notifications.length > 0 ? notifications.map(notification => `
                            <div class="p-4 rounded-lg border ${notification.read ? 'bg-gray-50 border-gray-200' : 'bg-blue-50 border-blue-300'} ${!notification.read ? 'font-semibold' : ''}">
                                <div class="flex justify-between items-start mb-2">
                                    <h4 class="text-sm font-bold text-gray-800">${notification.title}</h4>
                                    <span class="text-xs text-gray-500">${notification.timestamp}</span>
                                </div>
                                <p class="text-sm text-gray-600">${notification.message}</p>
                                ${!notification.read ? `<button onclick="markAsRead(${notification.id})" class="text-xs text-blue-600 hover:text-blue-800 mt-2">ุชุญุฏูุฏ ูููุฑูุก</button>` : ''}
                            </div>
                        `).join('') : '<p class="text-center text-gray-500 py-8">ูุง ุชูุฌุฏ ุฅุดุนุงุฑุงุช</p>'}
                    </div>
                </div>
            `;
            document.body.appendChild(modalDiv);
        }

        function markAsRead(notificationId) {
            const notification = notifications.find(n => n.id === notificationId);
            if (notification) {
                notification.read = true;
                updateNotificationBell();
                showNotifications();
                document.querySelector('.fixed').remove();
                showNotifications();
            }
        }

        function markAllAsRead() {
            notifications.forEach(n => n.read = true);
            updateNotificationBell();
            showNotifications();
            document.querySelector('.fixed').remove();
            showNotifications();
        }

        function showSection(section) {
            // Hide all sections
            document.querySelectorAll('.form-section').forEach(s => s.classList.remove('active'));
            document.getElementById('home-section').style.display = 'none';
            
            // Show selected section
            if (section === 'home') {
                document.getElementById('home-section').style.display = 'block';
            } else {
                document.getElementById(section + '-section').classList.add('active');
            }
        }

        function adminClickCount() {
            adminClickCounter++;
            if (adminClickCounter >= 11) {
                adminClickCounter = 0;
                showSection('admin-login');
            }
        }

        function showAdminLogin() {
            showSection('admin-login');
        }

        function adminLogin(event) {
            event.preventDefault();
            
            const username = document.getElementById('admin-username').value;
            const password = document.getElementById('admin-password').value;
            
            const admin = adminUsers.find(a => a.username === username && a.password === password);
            
            if (admin) {
                currentAdmin = admin;
                document.getElementById('admin-welcome').textContent = `ูุฑุญุจุงูุ ${admin.fullName}`;
                showSection('admin-dashboard');
                showAdminTab('registrations');
                updateAdminPanel();
                updateAdminsList();
                updateStatistics();
                
                // Clear login form
                document.getElementById('admin-login-form').reset();
            } else {
                showCustomAlert('ุฎุทุฃ ูู ุชุณุฌูู ุงูุฏุฎูู', 'ุงุณู ุงููุณุชุฎุฏู ุฃู ูููุฉ ุงููุฑูุฑ ุบูุฑ ุตุญูุญุฉ');
            }
        }

        function adminLogout() {
            currentAdmin = null;
            showSection('home');
            showCustomAlert('ุชู ุชุณุฌูู ุงูุฎุฑูุฌ', 'ุชู ุชุณุฌูู ุงูุฎุฑูุฌ ุจูุฌุงุญ');
        }

        function showAdminTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.admin-tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.admin-tab-btn').forEach(btn => {
                btn.classList.remove('active', 'bg-purple-600', 'text-white');
                btn.classList.add('bg-gray-200', 'text-gray-700');
            });
            
            // Show selected tab
            document.getElementById(`admin-${tabName}-tab`).classList.add('active');
            event.target.classList.add('active', 'bg-purple-600', 'text-white');
            event.target.classList.remove('bg-gray-200', 'text-gray-700');
        }

        function showAddAdminForm() {
            document.getElementById('add-admin-form').classList.remove('hidden');
        }

        function hideAddAdminForm() {
            document.getElementById('add-admin-form').classList.add('hidden');
            document.querySelector('#add-admin-form form').reset();
        }

        function addNewAdmin(event) {
            event.preventDefault();
            
            const username = document.getElementById('new-admin-username').value;
            const password = document.getElementById('new-admin-password').value;
            const fullName = document.getElementById('new-admin-fullname').value;
            
            // Check if username already exists
            if (adminUsers.find(a => a.username === username)) {
                showCustomAlert('ุฎุทุฃ', 'ุงุณู ุงููุณุชุฎุฏู ููุฌูุฏ ุจุงููุนู');
                return;
            }
            
            const newAdmin = {
                id: Date.now(),
                username: username,
                password: password,
                fullName: fullName,
                isMainAdmin: false,
                createdAt: new Date().toLocaleString('ar-EG'),
                createdBy: currentAdmin.fullName
            };
            
            adminUsers.push(newAdmin);
            updateAdminsList();
            updateStatistics();
            hideAddAdminForm();
            
            showCustomAlert('ุชู ุจูุฌุงุญ', `ุชู ุฅุถุงูุฉ ุงููุฏูุฑ "${fullName}" ุจูุฌุงุญ`);
        }

        function updateAdminsList() {
            const adminsList = document.getElementById('admins-list');
            
            adminsList.innerHTML = adminUsers.map(admin => `
                <div class="bg-purple-50 border border-purple-200 rounded-lg p-4">
                    <div class="flex justify-between items-start">
                        <div>
                            <h4 class="font-bold text-purple-700">${admin.fullName}</h4>
                            <p class="text-sm text-gray-600">ุงุณู ุงููุณุชุฎุฏู: ${admin.username}</p>
                            <p class="text-sm text-gray-600">ุชุงุฑูุฎ ุงูุฅูุดุงุก: ${admin.createdAt}</p>
                            ${admin.createdBy ? `<p class="text-sm text-gray-600">ุฃูุดุฆ ุจูุงุณุทุฉ: ${admin.createdBy}</p>` : ''}
                            ${admin.isMainAdmin ? '<span class="inline-block bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full text-xs font-semibold mt-2">ุงููุฏูุฑ ุงูุฑุฆูุณู</span>' : ''}
                        </div>
                        <div class="flex gap-2">
                            ${!admin.isMainAdmin ? `
                                <button onclick="editAdmin(${admin.id})" class="text-xs bg-blue-500 text-white px-3 py-1 rounded hover:bg-blue-600 transition-colors">ุชุนุฏูู</button>
                                <button onclick="deleteAdmin(${admin.id})" class="text-xs bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600 transition-colors">ุญุฐู</button>
                            ` : '<span class="text-xs text-gray-500">ูุง ูููู ุญุฐูู</span>'}
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function editAdmin(adminId) {
            showCustomAlert('ุชุนุฏูู ุงููุฏูุฑ', 'ููุฒุฉ ุชุนุฏูู ุจูุงูุงุช ุงููุฏูุฑ ุณุชููู ูุชุงุญุฉ ูุฑูุจุงู');
        }

        function deleteAdmin(adminId) {
            const admin = adminUsers.find(a => a.id === adminId);
            if (!admin) return;
            
            showCustomConfirm('ุญุฐู ุงููุฏูุฑ', `ูู ุฃูุช ูุชุฃูุฏ ูู ุญุฐู ุงููุฏูุฑ "${admin.fullName}"ุ`, () => {
                adminUsers = adminUsers.filter(a => a.id !== adminId);
                updateAdminsList();
                updateStatistics();
                showCustomAlert('ุชู ุงูุญุฐู', 'ุชู ุญุฐู ุงููุฏูุฑ ุจูุฌุงุญ');
            });
        }

        function updateStatistics() {
            // Update counts
            document.getElementById('sellers-count').textContent = sellerRegistrations.length;
            document.getElementById('buyers-count').textContent = buyerRegistrations.length;
            document.getElementById('total-properties').textContent = sellerRegistrations.length;
            document.getElementById('total-requests').textContent = buyerRegistrations.length;
            document.getElementById('total-admins').textContent = adminUsers.length;
            
            // Update property types statistics
            const propertyTypesStats = {};
            sellerRegistrations.forEach(seller => {
                const type = getPropertyTypeArabic(seller.propertyType);
                propertyTypesStats[type] = (propertyTypesStats[type] || 0) + 1;
            });
            
            const propertyTypesContainer = document.getElementById('property-types-stats');
            propertyTypesContainer.innerHTML = Object.entries(propertyTypesStats).map(([type, count]) => `
                <div class="flex justify-between items-center p-2 bg-gray-50 rounded">
                    <span>${type}</span>
                    <span class="font-semibold text-green-600">${count}</span>
                </div>
            `).join('') || '<p class="text-gray-500">ูุง ุชูุฌุฏ ุจูุงูุงุช</p>';
            
            // Update location statistics
            const locationStats = {};
            sellerRegistrations.forEach(seller => {
                const location = getLocationArabic(seller.location);
                locationStats[location] = (locationStats[location] || 0) + 1;
            });
            
            const locationContainer = document.getElementById('location-stats');
            locationContainer.innerHTML = Object.entries(locationStats).map(([location, count]) => `
                <div class="flex justify-between items-center p-2 bg-gray-50 rounded">
                    <span>${location}</span>
                    <span class="font-semibold text-blue-600">${count}</span>
                </div>
            `).join('') || '<p class="text-gray-500">ูุง ุชูุฌุฏ ุจูุงูุงุช</p>';
        }

        function showSellerForm() {
            showSection('seller');
        }

        function showBuyerForm() {
            showSection('buyer');
        }

        function selectPropertyType(type) {
            currentPropertyType = type;
            
            // Update button styles
            document.querySelectorAll('.property-type-btn').forEach(btn => {
                btn.classList.remove('border-green-500', 'bg-green-100');
                btn.classList.add('border-gray-300');
            });
            event.target.closest('.property-type-btn').classList.add('border-green-500', 'bg-green-100');
            
            // Generate appropriate form
            generatePropertyForm(type);
        }

        function selectBuyerPropertyType(type) {
            currentBuyerPropertyType = type;
            
            // Update button styles
            document.querySelectorAll('.buyer-property-type-btn').forEach(btn => {
                btn.classList.remove('border-blue-500', 'bg-blue-100');
                btn.classList.add('border-gray-300');
            });
            event.target.closest('.buyer-property-type-btn').classList.add('border-blue-500', 'bg-blue-100');
        }

        function generatePropertyForm(type) {
            const container = document.getElementById('property-details');
            let formHTML = '';

            switch(type) {
                case 'apartment':
                    formHTML = generateApartmentForm();
                    break;
                case 'house':
                    formHTML = generateHouseForm();
                    break;
                case 'land':
                    formHTML = generateLandForm();
                    break;
                case 'shop':
                    formHTML = generateShopForm();
                    break;
                case 'office':
                    formHTML = generateOfficeForm();
                    break;
                case 'villa':
                    formHTML = generateVillaForm();
                    break;
                case 'building-land':
                    formHTML = generateBuildingLandForm();
                    break;
            }

            container.innerHTML = formHTML;
        }

        function generateApartmentForm() {
            return `
                <div class="mb-8 bg-gray-50 p-6 rounded-lg">
                    <h3 class="text-lg font-semibold text-gray-700 mb-4">ุชูุงุตูู ุงูุดูุฉ</h3>
                    <div class="grid md:grid-cols-2 gap-4 mb-4">
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">ูุณุงุญุฉ ุงูุดูุฉ (ูุชุฑ ูุฑุจุน)</label>
                            <input type="number" id="apartment-area" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-green-500 focus:outline-none" required>
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">ุนุฏุฏ ุงูุบุฑู</label>
                            <select id="apartment-rooms" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-green-500 focus:outline-none" required>
                                <option value="">ุงุฎุชุฑ ุนุฏุฏ ุงูุบุฑู</option>
                                <option value="1">ุบุฑูุฉ ูุงุญุฏุฉ</option>
                                <option value="2">ุบุฑูุชุงู</option>
                                <option value="3">3 ุบุฑู</option>
                                <option value="4">4 ุบุฑู</option>
                                <option value="5+">5 ุบุฑู ุฃู ุฃูุซุฑ</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">ุนุฏุฏ ุงูุญูุงูุงุช</label>
                            <select id="apartment-bathrooms" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-green-500 focus:outline-none" required>
                                <option value="">ุงุฎุชุฑ ุนุฏุฏ ุงูุญูุงูุงุช</option>
                                <option value="1">ุญูุงู ูุงุญุฏ</option>
                                <option value="2">ุญูุงูุงู</option>
                                <option value="3">3 ุญูุงูุงุช</option>
                                <option value="4+">4 ุญูุงูุงุช ุฃู ุฃูุซุฑ</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">ุงูุฏูุฑ</label>
                            <select id="apartment-floor" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-green-500 focus:outline-none" required>
                                <option value="">ุงุฎุชุฑ ุงูุฏูุฑ</option>
                                <option value="ground">ุงูุฃุฑุถู</option>
                                <option value="1">ุงูุฃูู</option>
                                <option value="2">ุงูุซุงูู</option>
                                <option value="3">ุงูุซุงูุซ</option>
                                <option value="4">ุงูุฑุงุจุน</option>
                                <option value="5+">ุงูุฎุงูุณ ุฃู ุฃุนูู</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="grid md:grid-cols-2 gap-4 mb-4">
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">ุญุตุฉ ุงูุดูุฉ ูู ุงูุฃุฑุถ</label>
                            <input type="text" id="apartment-share" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-green-500 focus:outline-none" placeholder="ูุซุงู: 1/8" required>
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">ุณูุฉ ุงููุจุงูู</label>
                            <input type="number" id="apartment-year" min="1980" max="2024" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-green-500 focus:outline-none" required>
                        </div>
                    </div>

                    <div class="mb-4">
                        <label class="block text-sm font-semibold text-gray-700 mb-2">ูุณุชูู ุงูุชุดุทูุจ</label>
                        <select id="apartment-finishing" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-green-500 focus:outline-none" required>
                            <option value="">ุงุฎุชุฑ ูุณุชูู ุงูุชุดุทูุจ</option>
                            <option value="finished">ูุชุดุทุจุฉ ูุงููุฉ</option>
                            <option value="semi-finished">ูุตู ุชุดุทูุจ</option>
                            <option value="unfinished">ุนูู ุงูุทูุจุฉ</option>
                        </select>
                    </div>

                    <div class="mb-4">
                        <label class="block text-sm font-semibold text-gray-700 mb-2">ุงูุนุฏุงุฏุงุช ุงููุชุงุญุฉ</label>
                        <div class="flex gap-4">
                            <label class="flex items-center">
                                <input type="checkbox" id="apartment-electricity" class="mr-2">
                                <span>ููุฑุจุงุก</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" id="apartment-gas" class="mr-2">
                                <span>ุบุงุฒ</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" id="apartment-water" class="mr-2">
                                <span>ููุงู</span>
                            </label>
                        </div>
                    </div>

                    <div class="mb-4">
                        <label class="block text-sm font-semibold text-gray-700 mb-2">ุงูุงูุชูุงุฒุงุช</label>
                        <div class="grid md:grid-cols-2 gap-2">
                            <label class="flex items-center">
                                <input type="checkbox" id="apartment-elevator" class="mr-2">
                                <span>ุฃุณุงูุณูุฑ</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" id="apartment-hotel-entrance" class="mr-2">
                                <span>ูุฏุฎู ููุฏูู</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" id="apartment-security" class="mr-2">
                                <span>ุฃูู ูุญุฑุงุณุฉ</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" id="apartment-garden" class="mr-2">
                                <span>ุญุฏููุฉ</span>
                            </label>
                        </div>
                    </div>

                    ${generatePricingSection('apartment')}
                    ${generateImageUploadSection()}
                    ${generateNotesSection()}
                </div>
            `;
        }

        function generateHouseForm() {
            return `
                <div class="mb-8 bg-gray-50 p-6 rounded-lg">
                    <h3 class="text-lg font-semibold text-gray-700 mb-4">ุชูุงุตูู ุงูุจูุช</h3>
                    <div class="grid md:grid-cols-2 gap-4 mb-4">
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">ูุณุงุญุฉ ุงูุนูุงุฑ (ูุชุฑ ูุฑุจุน)</label>
                            <input type="number" id="house-area" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-green-500 focus:outline-none" required>
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">ุนุฏุฏ ุงูุฃุฏูุงุฑ</label>
                            <select id="house-floors" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-green-500 focus:outline-none" required>
                                <option value="">ุงุฎุชุฑ ุนุฏุฏ ุงูุฃุฏูุงุฑ</option>
                                <option value="1">ุฏูุฑ ูุงุญุฏ</option>
                                <option value="2">ุฏูุฑูู</option>
                                <option value="3">ุซูุงุซุฉ ุฃุฏูุงุฑ</option>
                                <option value="4+">ุฃุฑุจุนุฉ ุฃุฏูุงุฑ ุฃู ุฃูุซุฑ</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">ุนุฏุฏ ุงูุดูู ูู ุงูุฏูุฑ</label>
                            <select id="house-apartments-per-floor" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-green-500 focus:outline-none" required>
                                <option value="">ุงุฎุชุฑ ุนุฏุฏ ุงูุดูู</option>
                                <option value="1">ุดูุฉ ูุงุญุฏุฉ</option>
                                <option value="2">ุดูุชุงู</option>
                                <option value="3">ุซูุงุซ ุดูู</option>
                                <option value="4+">ุฃุฑุจุน ุดูู ุฃู ุฃูุซุฑ</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">ูุณุงุญุฉ ุงูุดูุฉ (ูุชุฑ ูุฑุจุน)</label>
                            <input type="number" id="house-apartment-area" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-green-500 focus:outline-none" required>
                        </div>
                    </div>

                    <div class="grid md:grid-cols-2 gap-4 mb-4">
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">ุณูุฉ ุงููุจุงูู</label>
                            <input type="number" id="house-year" min="1980" max="2024" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-green-500 focus:outline-none" required>
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">ูุณุชูู ุงูุชุดุทูุจ</label>
                            <select id="house-finishing" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-green-500 focus:outline-none" required>
                                <option value="">ุงุฎุชุฑ ูุณุชูู ุงูุชุดุทูุจ</option>
                                <option value="finished">ูุชุดุทุจ ูุงูู</option>
                                <option value="semi-finished">ูุตู ุชุดุทูุจ</option>
                                <option value="unfinished">ุนูู ุงูุทูุจุฉ</option>
                            </select>
                        </div>
                    </div>

                    <div class="mb-4">
                        <label class="block text-sm font-semibold text-gray-700 mb-2">ุงูุนุฏุงุฏุงุช ุงููุชุงุญุฉ</label>
                        <div class="flex gap-4">
                            <label class="flex items-center">
                                <input type="checkbox" id="house-electricity" class="mr-2">
                                <span>ููุฑุจุงุก</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" id="house-gas" class="mr-2">
                                <span>ุบุงุฒ</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" id="house-water" class="mr-2">
                                <span>ููุงู</span>
                            </label>
                        </div>
                    </div>

                    <div class="mb-4">
                        <label class="block text-sm font-semibold text-gray-700 mb-2">ุงูุงูุชูุงุฒุงุช</label>
                        <div class="grid md:grid-cols-2 gap-2">
                            <label class="flex items-center">
                                <input type="checkbox" id="house-security" class="mr-2">
                                <span>ุฃูู ูุญุฑุงุณุฉ</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" id="house-elevator" class="mr-2">
                                <span>ุฃุณุงูุณูุฑ</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" id="house-garden" class="mr-2">
                                <span>ุญุฏููุฉ</span>
                            </label>
                        </div>
                    </div>

                    ${generatePricingSection('house')}
                    ${generateImageUploadSection()}
                    ${generateNotesSection()}
                </div>
            `;
        }

        function generateShopForm() {
            return `
                <div class="mb-8 bg-gray-50 p-6 rounded-lg">
                    <h3 class="text-lg font-semibold text-gray-700 mb-4">ุชูุงุตูู ุงููุญู</h3>
                    <div class="grid md:grid-cols-2 gap-4 mb-4">
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">ูุณุงุญุฉ ุงููุญู (ูุชุฑ ูุฑุจุน)</label>
                            <input type="number" id="shop-area" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-green-500 focus:outline-none" required>
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">ุญุตุฉ ุงููุญู ูู ุงูุฃุฑุถ</label>
                            <input type="text" id="shop-share" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-green-500 focus:outline-none" placeholder="ูุซุงู: 1/10">
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">ุณูุฉ ุงููุจุงูู</label>
                            <input type="number" id="shop-year" min="1980" max="2024" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-green-500 focus:outline-none" required>
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">ูุณุชูู ุงูุชุดุทูุจ</label>
                            <select id="shop-finishing" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-green-500 focus:outline-none" required>
                                <option value="">ุงุฎุชุฑ ูุณุชูู ุงูุชุดุทูุจ</option>
                                <option value="finished">ูุญู ูุฌูุฒ</option>
                                <option value="semi-finished">ูุตู ุชุดุทูุจ</option>
                                <option value="unfinished">ุนูู ุงูุทูุจุฉ</option>
                            </select>
                        </div>
                    </div>

                    <div class="mb-4">
                        <label class="block text-sm font-semibold text-gray-700 mb-2">ุงูุงูุชูุงุฒุงุช</label>
                        <div class="grid md:grid-cols-2 gap-2">
                            <label class="flex items-center">
                                <input type="checkbox" id="shop-street-front" class="mr-2">
                                <span>ูุงุฌูุฉ ุดุงุฑุน ุนูููู</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" id="shop-busy-street" class="mr-2">
                                <span>ุดุงุฑุน ุญููู</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" id="shop-commercial-area" class="mr-2">
                                <span>ููุทูุฉ ุชุฌุงุฑูุฉ</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" id="shop-public-location" class="mr-2">
                                <span>ููุงู ุนูููู</span>
                            </label>
                        </div>
                    </div>

                    ${generatePricingSection('shop', 17, 19)}
                    ${generateImageUploadSection()}
                    ${generateNotesSection()}
                </div>
            `;
        }

        function generateLandForm() {
            return `
                <div class="mb-8 bg-gray-50 p-6 rounded-lg">
                    <h3 class="text-lg font-semibold text-gray-700 mb-4">ุชูุงุตูู ุงูุฃุฑุถ</h3>
                    <div class="grid md:grid-cols-2 gap-4 mb-4">
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">ููุน ุงูุฃุฑุถ</label>
                            <select id="land-type" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-green-500 focus:outline-none" required>
                                <option value="">ุงุฎุชุฑ ููุน ุงูุฃุฑุถ</option>
                                <option value="building">ุฃุฑุถ ูุจุงูู</option>
                                <option value="agricultural">ุฃุฑุถ ุฒุฑุงุนูุฉ</option>
                                <option value="mixed">ูุชุฎููุงุช</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">ุงููุณุงุญุฉ (ูุชุฑ ูุฑุจุน)</label>
                            <input type="number" id="land-area-meters" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-green-500 focus:outline-none" required>
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">ุงููุณุงุญุฉ (ููุฑุงุท)</label>
                            <input type="number" step="0.01" id="land-area-qirat" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-green-500 focus:outline-none">
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">ุงูุฃุฑุถ ูุฑุฎุตุฉุ</label>
                            <select id="land-licensed" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-green-500 focus:outline-none" required>
                                <option value="">ุงุฎุชุฑ</option>
                                <option value="yes">ูุนูุ ูุฑุฎุตุฉ</option>
                                <option value="no">ูุงุ ุบูุฑ ูุฑุฎุตุฉ</option>
                            </select>
                        </div>
                    </div>

                    <div id="building-license-year" class="mb-4" style="display: none;">
                        <label class="block text-sm font-semibold text-gray-700 mb-2">ูุฑุฏูู ุงููุจุงูู ูู ุณูุฉ</label>
                        <input type="number" min="1980" max="2024" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-green-500 focus:outline-none">
                    </div>

                    ${generatePricingSection('land', 14, 17)}
                    ${generateImageUploadSection()}
                    ${generateNotesSection()}
                </div>
            `;
        }

        function generateVillaForm() {
            return `
                <div class="mb-8 bg-gray-50 p-6 rounded-lg">
                    <h3 class="text-lg font-semibold text-gray-700 mb-4">ุชูุงุตูู ุงููููุง</h3>
                    <div class="grid md:grid-cols-2 gap-4 mb-4">
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">ุงููุณุงุญุฉ (ูุชุฑ ูุฑุจุน)</label>
                            <input type="number" id="villa-area-meters" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-green-500 focus:outline-none" required>
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">ุงููุณุงุญุฉ (ููุฑุงุท)</label>
                            <input type="number" step="0.01" id="villa-area-qirat" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-green-500 focus:outline-none">
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">ุนุฏุฏ ุงูุฃุฏูุงุฑ</label>
                            <select id="villa-floors" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-green-500 focus:outline-none" required>
                                <option value="">ุงุฎุชุฑ ุนุฏุฏ ุงูุฃุฏูุงุฑ</option>
                                <option value="1">ุฏูุฑ ูุงุญุฏ</option>
                                <option value="2">ุฏูุฑูู</option>
                                <option value="3">ุซูุงุซุฉ ุฃุฏูุงุฑ</option>
                                <option value="4+">ุฃุฑุจุนุฉ ุฃุฏูุงุฑ ุฃู ุฃูุซุฑ</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">ุนุฏุฏ ุงููุฑุงูู</label>
                            <input type="number" id="villa-facilities" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-green-500 focus:outline-none" placeholder="ูุซุงู: 8">
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">ุณูุฉ ุงููุจุงูู</label>
                            <input type="number" id="villa-year" min="1980" max="2024" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-green-500 focus:outline-none" required>
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">ุณูุฉ ุงูุฑุฎุตุฉ</label>
                            <input type="number" id="villa-license-year" min="1980" max="2024" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-green-500 focus:outline-none">
                        </div>
                    </div>

                    <div class="mb-4">
                        <label class="block text-sm font-semibold text-gray-700 mb-2">ุงูุชุฌููุฒุงุช</label>
                        <select id="villa-furnished" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-green-500 focus:outline-none" required>
                            <option value="">ุงุฎุชุฑ ูุณุชูู ุงูุชุฌููุฒ</option>
                            <option value="furnished">ูุฌูุฒุฉ ุจุงููุงูู</option>
                            <option value="unfurnished">ุจุฏูู ุชุฌููุฒุงุช</option>
                        </select>
                    </div>

                    <div class="mb-4">
                        <label class="block text-sm font-semibold text-gray-700 mb-2">ุงูุนุฏุงุฏุงุช ุงููุชุงุญุฉ</label>
                        <div class="flex gap-4">
                            <label class="flex items-center">
                                <input type="checkbox" id="villa-electricity" class="mr-2">
                                <span>ููุฑุจุงุก</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" id="villa-gas" class="mr-2">
                                <span>ุบุงุฒ</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" id="villa-water" class="mr-2">
                                <span>ููุงู</span>
                            </label>
                        </div>
                    </div>

                    ${generatePricingSection('villa', 20, 21)}
                    ${generateImageUploadSection()}
                    ${generateNotesSection()}
                </div>
            `;
        }

        function generateOfficeForm() {
            return generateApartmentForm().replace(/apartment/g, 'office').replace('ุชูุงุตูู ุงูุดูุฉ', 'ุชูุงุตูู ุงูููุชุจ');
        }

        function generateBuildingLandForm() {
            return generateLandForm().replace('ุชูุงุตูู ุงูุฃุฑุถ', 'ุชูุงุตูู ุฃุฑุถ ุงููุจุงูู');
        }

        function generatePricingSection(type, minPrice = 14, maxPrice = 16) {
            return `
                <div class="mb-4">
                    <label class="block text-sm font-semibold text-gray-700 mb-2">ุณุนุฑ ุงููุชุฑ (ุฌููู)</label>
                    <input type="number" id="${type}-price-per-meter" onchange="checkPricing('${type}', ${minPrice}, ${maxPrice})" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-green-500 focus:outline-none" required>
                    <div id="${type}-price-warning" class="price-warning mt-2 p-3 rounded-lg hidden">
                        <p class="text-amber-800 font-semibold">โ๏ธ ุณุนุฑ ุงููุชุฑ ุงููุญุฏุฏ ููููุทูุฉ ูู ${minPrice} - ${maxPrice} ุฌููู ูููุชุฑ. ุฅุฐุง ูุงู ุงูุณุนุฑ ุฃุนููุ ุณูุชู ูุถุน ุงูุนูุงุฑ ูู "ูุงุจู ููุชูุงูุถ"</p>
                    </div>
                </div>
                <div class="grid md:grid-cols-2 gap-4 mb-4">
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">ุงูุณุนุฑ ุงูููู (ุฌููู)</label>
                        <input type="number" id="${type}-total-price" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-green-500 focus:outline-none" required>
                    </div>
                    <div id="${type}-negotiable-container" class="hidden">
                        <label class="flex items-center mt-8">
                            <input type="checkbox" id="${type}-negotiable" class="mr-2 w-5 h-5">
                            <span class="font-semibold text-amber-700">ูุงุจู ููุชูุงูุถ</span>
                        </label>
                    </div>
                </div>
            `;
        }

        function generateImageUploadSection() {
            return `
                <div class="mb-6">
                    <label class="block text-lg font-semibold text-gray-700 mb-4">ุตูุฑ ุงูุนูุงุฑ (ูุทููุจ 4 ุตูุฑ ุนูู ุงูุฃูู)</label>
                    <div class="bg-blue-50 border-2 border-dashed border-blue-300 rounded-lg p-6">
                        <div class="text-center mb-4">
                            <div class="text-4xl mb-2">๐ท</div>
                            <p class="text-blue-700 font-semibold mb-2">ุงุฎุชุฑ ุตูุฑ ุงูุนูุงุฑ</p>
                            <p class="text-sm text-blue-600">ููููู ุงุฎุชูุงุฑ ุนุฏุฉ ุตูุฑ ูู ููุณ ุงูููุช (ุงูุญุฏ ุงูุฃุฏูู 4 ุตูุฑ)</p>
                        </div>
                        <input type="file" id="property-images" accept="image/*" multiple required class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-green-500 focus:outline-none">
                        <div id="image-preview" class="mt-4 grid grid-cols-2 md:grid-cols-4 gap-4 hidden">
                            <!-- Image previews will appear here -->
                        </div>
                        <div id="image-count" class="mt-2 text-sm text-gray-600 hidden">
                            <!-- Image count will appear here -->
                        </div>
                    </div>
                </div>
            `;
        }

        function generateNotesSection() {
            return `
                <div class="mb-4">
                    <label class="block text-sm font-semibold text-gray-700 mb-2">ููุงุญุธุงุช ุฅุถุงููุฉ</label>
                    <textarea class="w-full p-4 border-2 border-gray-300 rounded-lg focus:border-green-500 focus:outline-none h-32" placeholder="ุงูุชุจ ุฃู ููุงุญุธุงุช ุฃู ุงูุชูุงุฒุงุช ุฅุถุงููุฉ..."></textarea>
                </div>
            `;
        }

        function checkPricing(type, minPrice, maxPrice) {
            const priceInput = document.getElementById(`${type}-price-per-meter`);
            const warningDiv = document.getElementById(`${type}-price-warning`);
            const negotiableContainer = document.getElementById(`${type}-negotiable-container`);
            const negotiableCheckbox = document.getElementById(`${type}-negotiable`);
            
            const price = parseFloat(priceInput.value);
            
            if (price > maxPrice) {
                warningDiv.classList.remove('hidden');
                negotiableContainer.classList.remove('hidden');
                negotiableCheckbox.required = true;
                negotiableCheckbox.checked = true;
            } else {
                warningDiv.classList.add('hidden');
                negotiableContainer.classList.add('hidden');
                negotiableCheckbox.required = false;
                negotiableCheckbox.checked = false;
            }
        }

        function updatePriceRange() {
            const location = document.getElementById('buyer-location').value;
            const infoDiv = document.getElementById('price-range-info');
            
            if (location) {
                infoDiv.classList.remove('hidden');
                let priceRange = '';
                
                switch(location) {
                    case 'damanhour':
                        priceRange = 'ุฏููููุฑ: ุงูุฃุณุนุงุฑ ุชุจุฏุฃ ูู 16,000 ุฅูู 22,000 ุฌููู ูููุชุฑ ุญุณุจ ุงููููุน';
                        break;
                    case 'kom-hamada':
                        priceRange = 'ููู ุญูุงุฏุฉ: ุงูุฃุณุนุงุฑ ุชุชุฑุงูุญ ูู 16,000 ุฅูู 24,000 ุฌููู ูููุชุฑ ุญุณุจ ุญูููุฉ ุงูููุทูุฉ';
                        break;
                    case 'itay':
                        priceRange = 'ุฅูุชุงู ุงูุจุงุฑูุฏ: ุงูุฃุณุนุงุฑ ุชุชุฑุงูุญ ูู 14,000 ุฅูู 20,000 ุฌููู ูููุชุฑ';
                        break;
                    case 'delengat':
                        priceRange = 'ุงูุฏููุฌุงุช: ุงูุฃุณุนุงุฑ ุชุชุฑุงูุญ ูู 12,000 ุฅูู 18,000 ุฌููู ูููุชุฑ';
                        break;
                }
                
                infoDiv.innerHTML = `<p class="text-sm text-blue-800 font-semibold">๐ก ${priceRange}</p>
                                   <p class="text-sm text-blue-600 mt-1">ุงูุฃุณุนุงุฑ ุชุชุญุฏุฏ ุญุณุจ ุงููุณุงุญุฉ ูุงููููุน ูุงููุจุงูู (ุญุฏูุซุฉ ุฃู ูุฏููุฉ) ููุณุชูู ุงูุชุดุทูุจ</p>`;
            } else {
                infoDiv.classList.add('hidden');
            }
        }

        function validateWhatsApp(phoneNumber) {
            // Egyptian phone number validation
            const egyptianPhoneRegex = /^(010|011|012|015)\d{8}$/;
            return egyptianPhoneRegex.test(phoneNumber.replace(/\s+/g, ''));
        }

        function submitSellerForm(event) {
            event.preventDefault();
            
            const whatsappNumber = document.getElementById('seller-whatsapp').value;
            if (!validateWhatsApp(whatsappNumber)) {
                showCustomAlert('ุฎุทุฃ', 'ุฑูู ุงููุงุชุณุงุจ ุบูุฑ ุตุญูุญ. ูุฌุจ ุฃู ูุจุฏุฃ ุจู 010, 011, 012, ุฃู 015 ููุชููู ูู 11 ุฑูู');
                return;
            }
            
            if (!currentPropertyType) {
                showCustomAlert('ุฎุทุฃ', 'ูุฑุฌู ุงุฎุชูุงุฑ ููุน ุงูุนูุงุฑ');
                return;
            }
            
            // Collect form data
            const formData = {
                id: Date.now(),
                type: 'seller',
                propertyType: currentPropertyType,
                location: document.getElementById('seller-location').value,
                mapLocation: document.getElementById('map-location').value,
                name: document.getElementById('seller-name').value,
                whatsapp: whatsappNumber,
                timestamp: new Date().toLocaleString('ar-EG')
            };
            
            // Add property-specific data
            const propertyData = collectPropertyData(currentPropertyType);
            Object.assign(formData, propertyData);
            
            // Add images data
            const imageInput = document.getElementById('property-images');
            if (imageInput && imageInput.files.length > 0) {
                formData.images = [];
                Array.from(imageInput.files).forEach((file, index) => {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        formData.images.push({
                            name: file.name,
                            size: file.size,
                            type: file.type,
                            data: e.target.result
                        });
                        
                        // Save when all images are processed
                        if (formData.images.length === imageInput.files.length) {
                            saveSellerRegistration(formData);
                        }
                    };
                    reader.readAsDataURL(file);
                });
                return; // Exit here, saveSellerRegistration will be called after images are processed
            } else {
                saveSellerRegistration(formData);
            }
        }

        function saveSellerRegistration(formData) {
            // Save to registrations
            sellerRegistrations.push(formData);
            
            // Add notification for new property
            addNotification('ุนูุงุฑ ุฌุฏูุฏ ูุณุฌู', `ุชู ุชุณุฌูู ${getPropertyTypeArabic(formData.propertyType)} ุฌุฏูุฏ ูู ${getLocationArabic(formData.location)} ุจูุงุณุทุฉ ${formData.name}`, 'success');
            
            // Update admin panel
            updateAdminPanel();
            
            // Update listings
            updateListings();
            
            // Update search counts
            updateLocationCounts();
            
            showCustomAlert('ุชู ุจูุฌุงุญ', 'ุชู ุชุณุฌูู ุงูุนูุงุฑ ุจูุฌุงุญ! ุณูุชู ุงูุชูุงุตู ูุนู ูุฑูุจุงู.');
            
            // Reset form
            document.getElementById('seller-form').reset();
            currentPropertyType = '';
            document.getElementById('property-details').innerHTML = '';
            document.querySelectorAll('.property-type-btn').forEach(btn => {
                btn.classList.remove('border-green-500', 'bg-green-100');
                btn.classList.add('border-gray-300');
            });
            
            // Reset image preview
            const previewContainer = document.getElementById('image-preview');
            const countContainer = document.getElementById('image-count');
            if (previewContainer) previewContainer.classList.add('hidden');
            if (countContainer) countContainer.classList.add('hidden');
        }

        // Advanced Search Functions
        function searchByLocation(location) {
            const sellers = sellerRegistrations.filter(s => s.location === location);
            const buyers = buyerRegistrations.filter(b => b.location === location);
            
            displaySearchResults(sellers, buyers, location);
        }

        function applyAdvancedSearch() {
            const propertyType = document.getElementById('search-property-type').value;
            const clientType = document.getElementById('search-client-type').value;
            const location = document.getElementById('search-location-filter').value;
            
            let sellers = sellerRegistrations;
            let buyers = buyerRegistrations;
            
            // Apply filters
            if (propertyType) {
                sellers = sellers.filter(s => s.propertyType === propertyType);
                buyers = buyers.filter(b => b.propertyType === propertyType);
            }
            
            if (location) {
                sellers = sellers.filter(s => s.location === location);
                buyers = buyers.filter(b => b.location === location);
            }
            
            // Apply client type filter
            if (clientType === 'seller') {
                buyers = [];
            } else if (clientType === 'buyer') {
                sellers = [];
            }
            
            displaySearchResults(sellers, buyers, location || 'ุฌููุน ุงูููุงุทู');
        }

        function clearSearchFilters() {
            document.getElementById('search-property-type').value = '';
            document.getElementById('search-client-type').value = '';
            document.getElementById('search-location-filter').value = '';
            
            const resultsContainer = document.getElementById('search-results');
            resultsContainer.innerHTML = `
                <div class="text-center text-gray-500 py-8">
                    <div class="text-4xl mb-4">๐</div>
                    <p>ุงุฎุชุฑ ููุทูุฉ ุฃู ุงุณุชุฎุฏู ุงูููุงุชุฑ ููุจุญุซ ุนู ุงูุนูุงุฑุงุช</p>
                </div>
            `;
        }

        function displaySearchResults(sellers, buyers, locationName) {
            const resultsContainer = document.getElementById('search-results');
            
            resultsContainer.innerHTML = `
                <div class="mb-6">
                    <h4 class="text-xl font-bold text-gray-800 mb-4">ูุชุงุฆุฌ ุงูุจุญุซ - ${locationName}</h4>
                    <div class="grid md:grid-cols-3 gap-4 mb-6">
                        <div class="bg-green-50 p-4 rounded-lg text-center">
                            <div class="text-2xl font-bold text-green-600">${sellers.length}</div>
                            <div class="text-sm text-gray-600">ุนูุงุฑ ููุจูุน</div>
                        </div>
                        <div class="bg-blue-50 p-4 rounded-lg text-center">
                            <div class="text-2xl font-bold text-blue-600">${buyers.length}</div>
                            <div class="text-sm text-gray-600">ุทูุจ ุดุฑุงุก</div>
                        </div>
                        <div class="bg-purple-50 p-4 rounded-lg text-center">
                            <div class="text-2xl font-bold text-purple-600">${sellers.length + buyers.length}</div>
                            <div class="text-sm text-gray-600">ุฅุฌูุงูู ุงูุนููุงุก</div>
                        </div>
                    </div>
                </div>
                
                <div class="grid md:grid-cols-2 gap-8">
                    <!-- Sellers -->
                    <div class="bg-green-50 p-6 rounded-xl">
                        <h5 class="text-lg font-bold text-green-700 mb-4">๐ ุงูุนูุงุฑุงุช ููุจูุน (${sellers.length})</h5>
                        <div class="space-y-3 max-h-96 overflow-y-auto">
                            ${sellers.length > 0 ? sellers.map(seller => `
                                <div class="bg-white p-3 rounded-lg border border-green-200">
                                    <div class="flex justify-between items-start mb-2">
                                        <h6 class="font-bold text-green-700">${getPropertyTypeArabic(seller.propertyType)}</h6>
                                        <span class="text-xs text-gray-500">${seller.timestamp}</span>
                                    </div>
                                    <p class="text-sm text-gray-600">๐ค ${seller.name}</p>
                                    <p class="text-sm text-gray-600">๐ฑ ${seller.whatsapp}</p>
                                    ${seller.area ? `<p class="text-sm text-gray-600">๐ ${seller.area} ูยฒ</p>` : ''}
                                    ${seller.totalPrice ? `<p class="text-sm font-bold text-green-600">๐ฐ ${Number(seller.totalPrice).toLocaleString()} ุฌููู</p>` : ''}
                                    <div class="mt-2 flex gap-2">
                                        <button onclick="copyWhatsAppLink('${seller.whatsapp}', 'seller')" class="text-xs bg-green-500 text-white px-2 py-1 rounded">ูุงุชุณุงุจ</button>
                                        <button onclick="viewFullDetails(${seller.id}, 'seller')" class="text-xs bg-blue-500 text-white px-2 py-1 rounded">ุงูุชูุงุตูู</button>
                                    </div>
                                </div>
                            `).join('') : '<p class="text-center text-gray-500 py-4">ูุง ุชูุฌุฏ ุนูุงุฑุงุช ููุจูุน</p>'}
                        </div>
                    </div>
                    
                    <!-- Buyers -->
                    <div class="bg-blue-50 p-6 rounded-xl">
                        <h5 class="text-lg font-bold text-blue-700 mb-4">๐ ุทูุจุงุช ุงูุดุฑุงุก (${buyers.length})</h5>
                        <div class="space-y-3 max-h-96 overflow-y-auto">
                            ${buyers.length > 0 ? buyers.map(buyer => `
                                <div class="bg-white p-3 rounded-lg border border-blue-200">
                                    <div class="flex justify-between items-start mb-2">
                                        <h6 class="font-bold text-blue-700">ูุทููุจ ${getPropertyTypeArabic(buyer.propertyType)}</h6>
                                        <span class="text-xs text-gray-500">${buyer.timestamp}</span>
                                    </div>
                                    <p class="text-sm text-gray-600">๐ค ${buyer.name}</p>
                                    <p class="text-sm text-gray-600">๐ฑ ${buyer.whatsapp}</p>
                                    <div class="mt-2 flex gap-2">
                                        <button onclick="copyWhatsAppLink('${buyer.whatsapp}', 'buyer')" class="text-xs bg-blue-500 text-white px-2 py-1 rounded">ูุงุชุณุงุจ</button>
                                        <button onclick="editBuyerData(${buyer.id})" class="text-xs bg-gray-500 text-white px-2 py-1 rounded">ุชุนุฏูู</button>
                                    </div>
                                </div>
                            `).join('') : '<p class="text-center text-gray-500 py-4">ูุง ุชูุฌุฏ ุทูุจุงุช ุดุฑุงุก</p>'}
                        </div>
                    </div>
                </div>
            `;
        }

        function updateLocationCounts() {
            const locations = ['damanhour', 'kom-hamada', 'itay', 'delengat'];
            
            locations.forEach(location => {
                const sellersCount = sellerRegistrations.filter(s => s.location === location).length;
                const buyersCount = buyerRegistrations.filter(b => b.location === location).length;
                const totalCount = sellersCount + buyersCount;
                
                const countElement = document.getElementById(`${location}-count`);
                if (countElement) {
                    countElement.textContent = `${totalCount} ุนูุงุฑ`;
                }
            });
        }

        // Matching System Functions
        function findMatches(location) {
            const sellers = sellerRegistrations.filter(s => s.location === location);
            const buyers = buyerRegistrations.filter(b => b.location === location);
            
            const matches = [];
            
            sellers.forEach(seller => {
                buyers.forEach(buyer => {
                    if (seller.propertyType === buyer.propertyType) {
                        const matchScore = calculateMatchScore(seller, buyer);
                        if (matchScore > 0) {
                            matches.push({
                                seller: seller,
                                buyer: buyer,
                                score: matchScore,
                                location: location
                            });
                        }
                    }
                });
            });
            
            displayMatchingResults(matches, location);
        }

        function autoMatchAll() {
            const allMatches = [];
            const locations = ['damanhour', 'kom-hamada', 'itay', 'delengat'];
            
            locations.forEach(location => {
                const sellers = sellerRegistrations.filter(s => s.location === location);
                const buyers = buyerRegistrations.filter(b => b.location === location);
                
                sellers.forEach(seller => {
                    buyers.forEach(buyer => {
                        if (seller.propertyType === buyer.propertyType) {
                            const matchScore = calculateMatchScore(seller, buyer);
                            if (matchScore > 0) {
                                allMatches.push({
                                    seller: seller,
                                    buyer: buyer,
                                    score: matchScore,
                                    location: location
                                });
                            }
                        }
                    });
                });
            });
            
            // Sort by match score
            allMatches.sort((a, b) => b.score - a.score);
            
            displayMatchingResults(allMatches, 'ุฌููุน ุงูููุงุทู');
        }

        function calculateMatchScore(seller, buyer) {
            let score = 0;
            
            // Same property type
            if (seller.propertyType === buyer.propertyType) {
                score += 50;
            }
            
            // Same location
            if (seller.location === buyer.location) {
                score += 30;
            }
            
            // Price compatibility (if available)
            if (seller.totalPrice && buyer.budget) {
                const priceDiff = Math.abs(seller.totalPrice - buyer.budget) / seller.totalPrice;
                if (priceDiff <= 0.1) score += 20; // Within 10%
                else if (priceDiff <= 0.2) score += 10; // Within 20%
            }
            
            return score;
        }

        function displayMatchingResults(matches, locationName) {
            const resultsContainer = document.getElementById('matching-results');
            
            resultsContainer.innerHTML = `
                <div class="mb-6">
                    <h4 class="text-xl font-bold text-gray-800 mb-4">ูุชุงุฆุฌ ุงูุชูููู - ${locationName}</h4>
                    <div class="bg-green-50 p-4 rounded-lg text-center mb-6">
                        <div class="text-3xl font-bold text-green-600">${matches.length}</div>
                        <div class="text-sm text-gray-600">ุชูุงูู ูุญุชูู</div>
                    </div>
                </div>
                
                <div class="space-y-4">
                    ${matches.length > 0 ? matches.map((match, index) => `
                        <div class="bg-white p-6 rounded-xl border-2 border-green-200 hover:shadow-lg transition-shadow">
                            <div class="flex justify-between items-start mb-4">
                                <h5 class="text-lg font-bold text-green-700">ุชูุงูู #${index + 1}</h5>
                                <div class="flex items-center gap-2">
                                    <span class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-semibold">ูุณุจุฉ ุงูุชูุงูู: ${match.score}%</span>
                                    <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm">${getLocationArabic(match.location)}</span>
                                </div>
                            </div>
                            
                            <div class="grid md:grid-cols-2 gap-6">
                                <!-- Seller Info -->
                                <div class="bg-green-50 p-4 rounded-lg">
                                    <h6 class="font-bold text-green-700 mb-2">๐ ุงูุจุงุฆุน</h6>
                                    <p class="text-sm text-gray-600 mb-1"><strong>ุงูููุน:</strong> ${getPropertyTypeArabic(match.seller.propertyType)}</p>
                                    <p class="text-sm text-gray-600 mb-1"><strong>ุงูุงุณู:</strong> ${match.seller.name}</p>
                                    <p class="text-sm text-gray-600 mb-1"><strong>ุงููุงุชุณุงุจ:</strong> ${match.seller.whatsapp}</p>
                                    ${match.seller.area ? `<p class="text-sm text-gray-600 mb-1"><strong>ุงููุณุงุญุฉ:</strong> ${match.seller.area} ูยฒ</p>` : ''}
                                    ${match.seller.totalPrice ? `<p class="text-sm font-bold text-green-600"><strong>ุงูุณุนุฑ:</strong> ${Number(match.seller.totalPrice).toLocaleString()} ุฌููู</p>` : ''}
                                </div>
                                
                                <!-- Buyer Info -->
                                <div class="bg-blue-50 p-4 rounded-lg">
                                    <h6 class="font-bold text-blue-700 mb-2">๐ ุงููุดุชุฑู</h6>
                                    <p class="text-sm text-gray-600 mb-1"><strong>ูุจุญุซ ุนู:</strong> ${getPropertyTypeArabic(match.buyer.propertyType)}</p>
                                    <p class="text-sm text-gray-600 mb-1"><strong>ุงูุงุณู:</strong> ${match.buyer.name}</p>
                                    <p class="text-sm text-gray-600 mb-1"><strong>ุงููุงุชุณุงุจ:</strong> ${match.buyer.whatsapp}</p>
                                </div>
                            </div>
                            
                            <div class="mt-4 flex gap-3 justify-center">
                                <button onclick="contactBoth('${match.seller.whatsapp}', '${match.buyer.whatsapp}')" class="bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition-colors">ุชูุงุตู ูุน ุงูุทุฑููู</button>
                                <button onclick="createInquiry(${match.seller.id}, ${match.buyer.id})" class="bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors">ุฅูุดุงุก ุงุณุชุนูุงู</button>
                                <button onclick="scheduleViewing(${match.seller.id}, ${match.buyer.id})" class="bg-purple-500 text-white px-4 py-2 rounded-lg hover:bg-purple-600 transition-colors">ุชุญุฏูุฏ ููุนุฏ ูุนุงููุฉ</button>
                            </div>
                        </div>
                    `).join('') : '<p class="text-center text-gray-500 py-8">ูุง ุชูุฌุฏ ุชูุงููุงุช ูู ูุฐู ุงูููุทูุฉ</p>'}
                </div>
            `;
        }

        function contactBoth(sellerWhatsapp, buyerWhatsapp) {
            const sellerMessage = encodeURIComponent('ูุฑุญุจุงูุ ูุฏููุง ุนููู ููุชู ุจุนูุงุฑู ุงููุนุฑูุถ ููุจูุน ุนูู ูููุน ุงููุณุชูุจู ููุชุณููู ุงูุนูุงุฑู');
            const buyerMessage = encodeURIComponent('ูุฑุญุจุงูุ ูุฌุฏูุง ุนูุงุฑ ูุฏ ููุงุณุจ ุทูุจู ุนูู ูููุน ุงููุณุชูุจู ููุชุณููู ุงูุนูุงุฑู');
            
            const sellerLink = `https://wa.me/2${sellerWhatsapp}?text=${sellerMessage}`;
            const buyerLink = `https://wa.me/2${buyerWhatsapp}?text=${buyerMessage}`;
            
            // Open both links
            window.open(sellerLink, '_blank');
            setTimeout(() => {
                window.open(buyerLink, '_blank');
            }, 1000);
            
            showCustomAlert('ุชู ูุชุญ ุงูุฑูุงุจุท', 'ุชู ูุชุญ ุฑูุงุจุท ุงููุงุชุณุงุจ ููุทุฑููู ูู ููุงูุฐ ุฌุฏูุฏุฉ');
        }

        // Function to view property images
        function viewPropertyImages(sellerId) {
            const seller = sellerRegistrations.find(s => s.id === sellerId);
            if (!seller || !seller.images || seller.images.length === 0) {
                showCustomAlert('ูุง ุชูุฌุฏ ุตูุฑ', 'ูุง ุชูุฌุฏ ุตูุฑ ูุฑููุฉ ููุฐุง ุงูุนูุงุฑ');
                return;
            }
            
            const modalDiv = document.createElement('div');
            modalDiv.className = 'fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4';
            modalDiv.innerHTML = `
                <div class="bg-white rounded-2xl p-6 max-w-4xl w-full max-h-full overflow-y-auto">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-xl font-bold text-gray-800">ุตูุฑ ุงูุนูุงุฑ - ${getPropertyTypeArabic(seller.propertyType)}</h3>
                        <button onclick="this.closest('.fixed').remove()" class="text-gray-500 hover:text-gray-700 text-2xl">&times;</button>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                        ${seller.images.map((image, index) => `
                            <div class="relative group">
                                <img src="${image.data}" alt="ุตูุฑุฉ ุงูุนูุงุฑ ${index + 1}" class="w-full h-48 object-cover rounded-lg border-2 border-gray-300 cursor-pointer hover:border-blue-500 transition-colors" onclick="openImageFullscreen('${image.data}')">
                                <div class="absolute bottom-2 left-2 bg-black bg-opacity-75 text-white px-2 py-1 rounded text-xs">
                                    ุตูุฑุฉ ${index + 1}
                                </div>
                            </div>
                        `).join('')}
                    </div>
                    <div class="mt-4 text-center">
                        <p class="text-sm text-gray-600">ุฅุฌูุงูู ุงูุตูุฑ: ${seller.images.length}</p>
                    </div>
                </div>
            `;
            document.body.appendChild(modalDiv);
        }

        // Function to open image in fullscreen
        function openImageFullscreen(imageSrc) {
            const fullscreenDiv = document.createElement('div');
            fullscreenDiv.className = 'fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50 cursor-pointer';
            fullscreenDiv.innerHTML = `
                <img src="${imageSrc}" alt="ุตูุฑุฉ ุงูุนูุงุฑ" class="max-w-full max-h-full object-contain">
                <button onclick="this.closest('.fixed').remove()" class="absolute top-4 right-4 text-white text-3xl hover:text-gray-300">&times;</button>
            `;
            fullscreenDiv.onclick = function(e) {
                if (e.target === fullscreenDiv) {
                    fullscreenDiv.remove();
                }
            };
            document.body.appendChild(fullscreenDiv);
        }

        function submitBuyerForm(event) {
            event.preventDefault();
            
            const whatsappNumber = document.getElementById('buyer-whatsapp').value;
            if (!validateWhatsApp(whatsappNumber)) {
                showCustomAlert('ุฎุทุฃ', 'ุฑูู ุงููุงุชุณุงุจ ุบูุฑ ุตุญูุญ. ูุฌุจ ุฃู ูุจุฏุฃ ุจู 010, 011, 012, ุฃู 015 ููุชููู ูู 11 ุฑูู');
                return;
            }
            
            if (!currentBuyerPropertyType) {
                showCustomAlert('ุฎุทุฃ', 'ูุฑุฌู ุงุฎุชูุงุฑ ููุน ุงูุนูุงุฑ ุงููุทููุจ');
                return;
            }
            
            // Collect form data
            const formData = {
                id: Date.now(),
                type: 'buyer',
                propertyType: currentBuyerPropertyType,
                location: document.getElementById('buyer-location').value,
                name: document.getElementById('buyer-name').value,
                whatsapp: whatsappNumber,
                timestamp: new Date().toLocaleString('ar-EG')
            };
            
            // Save to registrations
            buyerRegistrations.push(formData);
            
            // Update admin panel
            updateAdminPanel();
            
            // Update listings
            updateListings();
            
            showCustomAlert('ุชู ุจูุฌุงุญ', 'ุชู ุชุณุฌูู ุทูุจ ุงูุจุญุซ ุจูุฌุงุญ! ุณูุชู ุงูุชูุงุตู ูุนู ุนูุฏ ุชููุฑ ุนูุงุฑ ููุงุณุจ.');
            
            // Reset form
            document.getElementById('buyer-form').reset();
            currentBuyerPropertyType = '';
            document.querySelectorAll('.buyer-property-type-btn').forEach(btn => {
                btn.classList.remove('border-blue-500', 'bg-blue-100');
                btn.classList.add('border-gray-300');
            });
        }

        function collectPropertyData(type) {
            const data = {};
            
            // Common fields
            const areaField = document.getElementById(`${type}-area`) || document.getElementById(`${type}-area-meters`);
            if (areaField) data.area = areaField.value;
            
            const yearField = document.getElementById(`${type}-year`);
            if (yearField) data.year = yearField.value;
            
            const pricePerMeterField = document.getElementById(`${type}-price-per-meter`);
            if (pricePerMeterField) data.pricePerMeter = pricePerMeterField.value;
            
            const totalPriceField = document.getElementById(`${type}-total-price`);
            if (totalPriceField) data.totalPrice = totalPriceField.value;
            
            const negotiableField = document.getElementById(`${type}-negotiable`);
            if (negotiableField) data.negotiable = negotiableField.checked;
            
            // Type-specific fields
            switch(type) {
                case 'apartment':
                    data.rooms = document.getElementById('apartment-rooms').value;
                    data.bathrooms = document.getElementById('apartment-bathrooms').value;
                    data.floor = document.getElementById('apartment-floor').value;
                    data.finishing = document.getElementById('apartment-finishing').value;
                    data.apartmentShare = document.getElementById('apartment-share').value;
                    break;
                case 'house':
                    data.floors = document.getElementById('house-floors').value;
                    data.apartmentsPerFloor = document.getElementById('house-apartments-per-floor').value;
                    data.apartmentArea = document.getElementById('house-apartment-area').value;
                    data.finishing = document.getElementById('house-finishing').value;
                    break;
                case 'land':
                    data.landType = document.getElementById('land-type').value;
                    data.areaQirat = document.getElementById('land-area-qirat').value;
                    data.licensed = document.getElementById('land-licensed').value;
                    break;
                case 'villa':
                    data.floors = document.getElementById('villa-floors').value;
                    data.facilities = document.getElementById('villa-facilities').value;
                    data.furnished = document.getElementById('villa-furnished').value;
                    data.areaQirat = document.getElementById('villa-area-qirat').value;
                    break;
            }
            
            return data;
        }

        function updateAdminPanel() {
            const sellersContainer = document.getElementById('admin-sellers');
            const buyersContainer = document.getElementById('admin-buyers');
            
            // Update sellers
            sellersContainer.innerHTML = sellerRegistrations.map(seller => `
                <div class="bg-white p-4 rounded-lg border border-green-200 hover:shadow-md transition-shadow">
                    <div class="flex justify-between items-start mb-3">
                        <h4 class="font-bold text-green-700">${getPropertyTypeArabic(seller.propertyType)} ููุจูุน</h4>
                        <span class="text-xs text-gray-500">${seller.timestamp}</span>
                    </div>
                    
                    <!-- ุงูุจูุงูุงุช ุงูุฃุณุงุณูุฉ -->
                    <div class="grid grid-cols-2 gap-2 mb-3 text-sm">
                        <p class="text-gray-600">๐ ${getLocationArabic(seller.location)}</p>
                        <p class="text-gray-600">๐ค ${seller.name}</p>
                        <p class="text-gray-600">๐ฑ ${seller.whatsapp}</p>
                        ${seller.area ? `<p class="text-gray-600">๐ ${seller.area} ูยฒ</p>` : ''}
                        ${seller.rooms ? `<p class="text-gray-600">๐ ${seller.rooms} ุบุฑู</p>` : ''}
                        ${seller.floors ? `<p class="text-gray-600">๐ข ${seller.floors} ุฃุฏูุงุฑ</p>` : ''}
                        ${seller.year ? `<p class="text-gray-600">๐๏ธ ูุจุงูู ${seller.year}</p>` : ''}
                        ${seller.finishing ? `<p class="text-gray-600">๐จ ${getFinishingArabic(seller.finishing)}</p>` : ''}
                        ${seller.apartmentShare ? `<p class="text-gray-600">๐ ุญุตุฉ: ${seller.apartmentShare}</p>` : ''}
                        ${seller.floor ? `<p class="text-gray-600">๐ ุงูุฏูุฑ: ${getFloorArabic(seller.floor)}</p>` : ''}
                    </div>
                    
                    ${seller.mapLocation ? `<p class="text-sm text-gray-600 mb-2">๐บ๏ธ ${seller.mapLocation}</p>` : ''}
                    
                    <!-- ุงูุณุนุฑ -->
                    <div class="mb-3 p-2 bg-green-50 rounded">
                        ${seller.pricePerMeter ? `<p class="text-sm text-gray-600">ุณุนุฑ ุงููุชุฑ: ${Number(seller.pricePerMeter).toLocaleString()} ุฌููู</p>` : ''}
                        ${seller.totalPrice ? `<p class="text-lg font-bold text-green-600">๐ฐ ${Number(seller.totalPrice).toLocaleString()} ุฌููู</p>` : ''}
                        ${seller.negotiable ? `<p class="text-xs text-amber-600 font-semibold">โ๏ธ ูุงุจู ููุชูุงูุถ</p>` : ''}
                    </div>
                    
                    ${seller.images && seller.images.length > 0 ? `<p class="text-xs text-blue-600 font-semibold mb-2">๐ท ${seller.images.length} ุตูุฑุฉ ูุฑููุฉ</p>` : ''}
                    
                    <div class="flex gap-2 flex-wrap">
                        <button onclick="viewFullDetails(${seller.id}, 'seller')" class="text-xs bg-indigo-500 text-white px-3 py-1 rounded hover:bg-indigo-600 transition-colors">ุนุฑุถ ุงูุชูุงุตูู ุงููุงููุฉ</button>
                        <button onclick="generatePropertyCard(${seller.id})" class="text-xs bg-purple-500 text-white px-3 py-1 rounded hover:bg-purple-600 transition-colors">ุฅูุดุงุก ููุทู</button>
                        ${seller.images && seller.images.length > 0 ? `<button onclick="viewPropertyImages(${seller.id})" class="text-xs bg-orange-500 text-white px-3 py-1 rounded hover:bg-orange-600 transition-colors">ุนุฑุถ ุงูุตูุฑ</button>` : ''}
                        <button onclick="editSellerData(${seller.id})" class="text-xs bg-blue-500 text-white px-3 py-1 rounded hover:bg-blue-600 transition-colors">ุชุนุฏูู</button>
                        <button onclick="deleteRegistration('seller', ${seller.id})" class="text-xs bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600 transition-colors">ุญุฐู</button>
                    </div>
                </div>
            `).join('') || '<p class="text-gray-500 text-center py-8">ูุง ุชูุฌุฏ ุชุณุฌููุงุช ุจุงุฆุนูู ุญุชู ุงูุขู</p>';
            
            // Update buyers
            buyersContainer.innerHTML = buyerRegistrations.map(buyer => `
                <div class="bg-white p-4 rounded-lg border border-blue-200 hover:shadow-md transition-shadow">
                    <div class="flex justify-between items-start mb-2">
                        <h4 class="font-bold text-blue-700">ูุทููุจ ${getPropertyTypeArabic(buyer.propertyType)}</h4>
                        <span class="text-xs text-gray-500">${buyer.timestamp}</span>
                    </div>
                    <p class="text-sm text-gray-600 mb-1">๐ ${getLocationArabic(buyer.location)}</p>
                    <p class="text-sm text-gray-600 mb-1">๐ค ${buyer.name}</p>
                    <p class="text-sm text-gray-600 mb-1">๐ฑ ${buyer.whatsapp}</p>
                    <div class="mt-3 flex gap-2 flex-wrap">
                        <button onclick="copyWhatsAppLink('${buyer.whatsapp}', 'buyer')" class="text-xs bg-blue-500 text-white px-3 py-1 rounded hover:bg-blue-600 transition-colors">ูุณุฎ ุฑุงุจุท ูุงุชุณุงุจ</button>
                        <button onclick="editBuyerData(${buyer.id})" class="text-xs bg-gray-500 text-white px-3 py-1 rounded hover:bg-gray-600 transition-colors">ุชุนุฏูู ุงูุจูุงูุงุช</button>
                        <button onclick="deleteRegistration('buyer', ${buyer.id})" class="text-xs bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600 transition-colors">ุญุฐู</button>
                    </div>
                </div>
            `).join('') || '<p class="text-gray-500 text-center py-8">ูุง ุชูุฌุฏ ุทูุจุงุช ูุดุชุฑูู ุญุชู ุงูุขู</p>';
            
            // Update statistics
            updateStatistics();
        }

        function updateListings() {
            const saleListings = document.getElementById('sale-listings');
            const wantedListings = document.getElementById('wanted-listings');
            
            // Update sale listings
            saleListings.innerHTML = sellerRegistrations.map(seller => `
                <div class="border-2 border-green-200 rounded-lg p-4 hover:shadow-lg transition-shadow">
                    <div class="flex justify-between items-start mb-2">
                        <h4 class="font-bold text-lg text-gray-800">${getPropertyTypeArabic(seller.propertyType)} ููุจูุน</h4>
                        <span class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-semibold">ููุจูุน</span>
                    </div>
                    
                    ${seller.images && seller.images.length >= 2 ? `
                    <div class="grid grid-cols-2 gap-2 mb-3">
                        <img src="${seller.images[0].data}" alt="ุตูุฑุฉ ุงูุนูุงุฑ 1" class="w-full h-24 object-cover rounded-lg border cursor-pointer hover:opacity-75" onclick="openImageFullscreen('${seller.images[0].data}')">
                        <img src="${seller.images[1].data}" alt="ุตูุฑุฉ ุงูุนูุงุฑ 2" class="w-full h-24 object-cover rounded-lg border cursor-pointer hover:opacity-75" onclick="openImageFullscreen('${seller.images[1].data}')">
                    </div>
                    ` : seller.images && seller.images.length === 1 ? `
                    <div class="mb-3">
                        <img src="${seller.images[0].data}" alt="ุตูุฑุฉ ุงูุนูุงุฑ" class="w-full h-32 object-cover rounded-lg border cursor-pointer hover:opacity-75" onclick="openImageFullscreen('${seller.images[0].data}')">
                    </div>
                    ` : ''}
                    
                    <p class="text-gray-600 mb-2">๐ ${getLocationArabic(seller.location)}</p>
                    ${seller.area ? `<p class="text-gray-600 mb-2">๐ ุงููุณุงุญุฉ: ${seller.area} ูุชุฑ ูุฑุจุน</p>` : ''}
                    ${seller.rooms ? `<p class="text-gray-600 mb-2">๐ ${seller.rooms} ุบุฑู</p>` : ''}
                    ${seller.year ? `<p class="text-gray-600 mb-2">๐๏ธ ูุจุงูู ${seller.year}</p>` : ''}
                    ${seller.images && seller.images.length > 2 ? `<p class="text-xs text-blue-600 mb-2">๐ท ${seller.images.length} ุตูุฑ ูุชุงุญุฉ</p>` : ''}
                    <div class="flex justify-between items-center mt-4">
                        <div>
                            ${seller.pricePerMeter ? `<p class="text-sm text-gray-500">ุณุนุฑ ุงููุชุฑ: ${Number(seller.pricePerMeter).toLocaleString()} ุฌููู</p>` : ''}
                            ${seller.totalPrice ? `<p class="text-xl font-bold text-green-600">ุงูุณุนุฑ ุงูููู: ${Number(seller.totalPrice).toLocaleString()} ุฌููู</p>` : ''}
                            ${seller.negotiable ? `<p class="text-sm text-amber-600 font-semibold">ูุงุจู ููุชูุงูุถ</p>` : ''}
                        </div>
                        <button onclick="copyCompanyWhatsAppLink()" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors">ุชูุงุตู ูุนูุง ุนุจุฑ ูุงุชุณุงุจ</button>
                    </div>
                </div>
            `).join('');
            
            // Update wanted listings
            wantedListings.innerHTML = buyerRegistrations.map(buyer => `
                <div class="border-2 border-blue-200 rounded-lg p-4 hover:shadow-lg transition-shadow">
                    <div class="flex justify-between items-start mb-2">
                        <h4 class="font-bold text-lg text-gray-800">ูุทููุจ ${getPropertyTypeArabic(buyer.propertyType)}</h4>
                        <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-semibold">ูุทููุจ</span>
                    </div>
                    <p class="text-gray-600 mb-2">๐ ${getLocationArabic(buyer.location)}</p>
                    <div class="flex justify-between items-center mt-4">
                        <div>
                            <p class="text-xl font-bold text-blue-600">ูุจุญุซ ุนู ุนูุงุฑ ููุงุณุจ</p>
                        </div>
                        <button onclick="copyCompanyWhatsAppLink()" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors">ุชูุงุตู ูุนูุง ุนุจุฑ ูุงุชุณุงุจ</button>
                    </div>
                </div>
            `).join('');
        }

        function getPropertyTypeArabic(type) {
            const types = {
                'apartment': 'ุดูุฉ',
                'house': 'ุจูุช',
                'land': 'ุฃุฑุถ',
                'shop': 'ูุญู',
                'office': 'ููุชุจ ุชุฌุงุฑู',
                'villa': 'ูููุง',
                'building-land': 'ุฃุฑุถ ูุจุงูู'
            };
            return types[type] || type;
        }

        function getLocationArabic(location) {
            const locations = {
                'damanhour': 'ุฏููููุฑ',
                'kom-hamada': 'ููู ุญูุงุฏุฉ',
                'itay': 'ุฅูุชุงู ุงูุจุงุฑูุฏ',
                'delengat': 'ุงูุฏููุฌุงุช'
            };
            return locations[location] || location;
        }

        function copyWhatsAppLink(whatsapp, type) {
            let message = '';
            if (type === 'seller') {
                message = encodeURIComponent('ูุฑุญุจุงูุ ุฃูุง ููุชู ุจุงูุนูุงุฑ ุงููุนุฑูุถ ููุจูุน ุนูู ูููุน ุงููุณุชูุจู ููุชุณููู ุงูุนูุงุฑู');
            } else {
                message = encodeURIComponent('ูุฑุญุจุงูุ ูุฏู ุนูุงุฑ ูุฏ ููุงุณุจ ุทูุจู ุนูู ูููุน ุงููุณุชูุจู ููุชุณููู ุงูุนูุงุฑู');
            }
            
            const whatsappLink = `https://wa.me/2${whatsapp}?text=${message}`;
            
            // Copy to clipboard
            navigator.clipboard.writeText(whatsappLink).then(() => {
                showCustomAlert('ุชู ุงููุณุฎ', 'ุชู ูุณุฎ ุฑุงุจุท ุงููุงุชุณุงุจ ุจูุฌุงุญ! ููููู ุงูุขู ูุตูู ูู ุฃู ููุงู');
            }).catch(() => {
                // Fallback for older browsers
                const textArea = document.createElement('textarea');
                textArea.value = whatsappLink;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                showCustomAlert('ุชู ุงููุณุฎ', 'ุชู ูุณุฎ ุฑุงุจุท ุงููุงุชุณุงุจ ุจูุฌุงุญ! ููููู ุงูุขู ูุตูู ูู ุฃู ููุงู');
            });
        }

        function editSellerData(sellerId) {
            const seller = sellerRegistrations.find(s => s.id === sellerId);
            if (!seller) return;
            
            showEditSellerModal(seller);
        }

        function editBuyerData(buyerId) {
            const buyer = buyerRegistrations.find(b => b.id === buyerId);
            if (!buyer) return;
            
            showEditBuyerModal(buyer);
        }

        function showEditSellerModal(seller) {
            const modalDiv = document.createElement('div');
            modalDiv.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4';
            modalDiv.innerHTML = `
                <div class="bg-white rounded-2xl p-6 max-w-2xl w-full max-h-96 overflow-y-auto">
                    <h3 class="text-xl font-bold text-green-700 mb-4">ุชุนุฏูู ุจูุงูุงุช ุงูุจุงุฆุน</h3>
                    <form onsubmit="updateSellerData(event, ${seller.id})">
                        <div class="grid md:grid-cols-2 gap-4 mb-4">
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">ุงูุงุณู</label>
                                <input type="text" id="edit-seller-name" value="${seller.name}" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-green-500 focus:outline-none" required>
                            </div>
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">ุฑูู ุงููุงุชุณุงุจ</label>
                                <input type="tel" id="edit-seller-whatsapp" value="${seller.whatsapp}" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-green-500 focus:outline-none" required>
                            </div>
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">ุงูููุทูุฉ</label>
                                <select id="edit-seller-location" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-green-500 focus:outline-none" required>
                                    <option value="damanhour" ${seller.location === 'damanhour' ? 'selected' : ''}>ุฏููููุฑ</option>
                                    <option value="kom-hamada" ${seller.location === 'kom-hamada' ? 'selected' : ''}>ููู ุญูุงุฏุฉ</option>
                                    <option value="itay" ${seller.location === 'itay' ? 'selected' : ''}>ุฅูุชุงู ุงูุจุงุฑูุฏ</option>
                                    <option value="delengat" ${seller.location === 'delengat' ? 'selected' : ''}>ุงูุฏููุฌุงุช</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">ุงููุณุงุญุฉ (ูุชุฑ ูุฑุจุน)</label>
                                <input type="number" id="edit-seller-area" value="${seller.area || ''}" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-green-500 focus:outline-none">
                            </div>
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">ุณุนุฑ ุงููุชุฑ (ุฌููู)</label>
                                <input type="number" id="edit-seller-price-per-meter" value="${seller.pricePerMeter || ''}" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-green-500 focus:outline-none">
                            </div>
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">ุงูุณุนุฑ ุงูููู (ุฌููู)</label>
                                <input type="number" id="edit-seller-total-price" value="${seller.totalPrice || ''}" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-green-500 focus:outline-none">
                            </div>
                        </div>
                        <div class="mb-4">
                            <label class="block text-sm font-semibold text-gray-700 mb-2">ูููุน ุงูุนูุงุฑ ุจุงูุชูุตูู</label>
                            <input type="text" id="edit-seller-map-location" value="${seller.mapLocation || ''}" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-green-500 focus:outline-none" placeholder="ุงูุชุจ ุงุณู ุงูููุงู ุจุงูุชูุตูู">
                        </div>
                        <div class="flex gap-4 justify-end">
                            <button type="button" onclick="this.closest('.fixed').remove()" class="bg-gray-500 text-white px-6 py-2 rounded-lg hover:bg-gray-600 transition-colors">ุฅูุบุงุก</button>
                            <button type="submit" class="bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition-colors">ุญูุธ ุงูุชุนุฏููุงุช</button>
                        </div>
                    </form>
                </div>
            `;
            document.body.appendChild(modalDiv);
        }

        function showEditBuyerModal(buyer) {
            const modalDiv = document.createElement('div');
            modalDiv.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4';
            modalDiv.innerHTML = `
                <div class="bg-white rounded-2xl p-6 max-w-2xl w-full max-h-96 overflow-y-auto">
                    <h3 class="text-xl font-bold text-blue-700 mb-4">ุชุนุฏูู ุจูุงูุงุช ุงููุดุชุฑู</h3>
                    <form onsubmit="updateBuyerData(event, ${buyer.id})">
                        <div class="grid md:grid-cols-2 gap-4 mb-4">
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">ุงูุงุณู</label>
                                <input type="text" id="edit-buyer-name" value="${buyer.name}" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none" required>
                            </div>
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">ุฑูู ุงููุงุชุณุงุจ</label>
                                <input type="tel" id="edit-buyer-whatsapp" value="${buyer.whatsapp}" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none" required>
                            </div>
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">ุงูููุทูุฉ ุงููุทููุจุฉ</label>
                                <select id="edit-buyer-location" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none" required>
                                    <option value="damanhour" ${buyer.location === 'damanhour' ? 'selected' : ''}>ุฏููููุฑ</option>
                                    <option value="kom-hamada" ${buyer.location === 'kom-hamada' ? 'selected' : ''}>ููู ุญูุงุฏุฉ</option>
                                    <option value="itay" ${buyer.location === 'itay' ? 'selected' : ''}>ุฅูุชุงู ุงูุจุงุฑูุฏ</option>
                                    <option value="delengat" ${buyer.location === 'delengat' ? 'selected' : ''}>ุงูุฏููุฌุงุช</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">ููุน ุงูุนูุงุฑ ุงููุทููุจ</label>
                                <select id="edit-buyer-property-type" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none" required>
                                    <option value="apartment" ${buyer.propertyType === 'apartment' ? 'selected' : ''}>ุดูุฉ</option>
                                    <option value="house" ${buyer.propertyType === 'house' ? 'selected' : ''}>ุจูุช</option>
                                    <option value="land" ${buyer.propertyType === 'land' ? 'selected' : ''}>ุฃุฑุถ</option>
                                    <option value="shop" ${buyer.propertyType === 'shop' ? 'selected' : ''}>ูุญู</option>
                                    <option value="office" ${buyer.propertyType === 'office' ? 'selected' : ''}>ููุชุจ</option>
                                    <option value="villa" ${buyer.propertyType === 'villa' ? 'selected' : ''}>ูููุง</option>
                                </select>
                            </div>
                        </div>
                        <div class="flex gap-4 justify-end">
                            <button type="button" onclick="this.closest('.fixed').remove()" class="bg-gray-500 text-white px-6 py-2 rounded-lg hover:bg-gray-600 transition-colors">ุฅูุบุงุก</button>
                            <button type="submit" class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors">ุญูุธ ุงูุชุนุฏููุงุช</button>
                        </div>
                    </form>
                </div>
            `;
            document.body.appendChild(modalDiv);
        }

        function updateSellerData(event, sellerId) {
            event.preventDefault();
            
            const sellerIndex = sellerRegistrations.findIndex(s => s.id === sellerId);
            if (sellerIndex === -1) return;
            
            // Update seller data
            sellerRegistrations[sellerIndex].name = document.getElementById('edit-seller-name').value;
            sellerRegistrations[sellerIndex].whatsapp = document.getElementById('edit-seller-whatsapp').value;
            sellerRegistrations[sellerIndex].location = document.getElementById('edit-seller-location').value;
            sellerRegistrations[sellerIndex].area = document.getElementById('edit-seller-area').value;
            sellerRegistrations[sellerIndex].pricePerMeter = document.getElementById('edit-seller-price-per-meter').value;
            sellerRegistrations[sellerIndex].totalPrice = document.getElementById('edit-seller-total-price').value;
            sellerRegistrations[sellerIndex].mapLocation = document.getElementById('edit-seller-map-location').value;
            
            // Update displays
            updateAdminPanel();
            updateListings();
            
            // Close modal
            event.target.closest('.fixed').remove();
            
            showCustomAlert('ุชู ุงูุชุญุฏูุซ', 'ุชู ุชุญุฏูุซ ุจูุงูุงุช ุงูุจุงุฆุน ุจูุฌุงุญ');
        }

        function updateBuyerData(event, buyerId) {
            event.preventDefault();
            
            const buyerIndex = buyerRegistrations.findIndex(b => b.id === buyerId);
            if (buyerIndex === -1) return;
            
            // Update buyer data
            buyerRegistrations[buyerIndex].name = document.getElementById('edit-buyer-name').value;
            buyerRegistrations[buyerIndex].whatsapp = document.getElementById('edit-buyer-whatsapp').value;
            buyerRegistrations[buyerIndex].location = document.getElementById('edit-buyer-location').value;
            buyerRegistrations[buyerIndex].propertyType = document.getElementById('edit-buyer-property-type').value;
            
            // Update displays
            updateAdminPanel();
            updateListings();
            
            // Close modal
            event.target.closest('.fixed').remove();
            
            showCustomAlert('ุชู ุงูุชุญุฏูุซ', 'ุชู ุชุญุฏูุซ ุจูุงูุงุช ุงููุดุชุฑู ุจูุฌุงุญ');
        }



        function deleteRegistration(type, id) {
            showCustomConfirm('ุญุฐู ุงูุชุณุฌูู', 'ูู ุฃูุช ูุชุฃูุฏ ูู ุญุฐู ูุฐุง ุงูุชุณุฌููุ', () => {
                if (type === 'seller') {
                    sellerRegistrations = sellerRegistrations.filter(s => s.id !== id);
                } else {
                    buyerRegistrations = buyerRegistrations.filter(b => b.id !== id);
                }
                updateAdminPanel();
                updateListings();
                showCustomAlert('ุชู ุงูุญุฐู', 'ุชู ุญุฐู ุงูุชุณุฌูู ุจูุฌุงุญ');
            });
        }

        function showCustomAlert(title, message) {
            const alertDiv = document.createElement('div');
            alertDiv.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            alertDiv.innerHTML = `
                <div class="bg-white rounded-2xl p-8 max-w-md mx-4 text-center">
                    <h3 class="text-xl font-bold text-gray-800 mb-4">${title}</h3>
                    <p class="text-gray-600 mb-6">${message}</p>
                    <button onclick="this.closest('.fixed').remove()" class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors">ููุงูู</button>
                </div>
            `;
            document.body.appendChild(alertDiv);
        }

        function showCustomConfirm(title, message, onConfirm) {
            const confirmDiv = document.createElement('div');
            confirmDiv.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            confirmDiv.innerHTML = `
                <div class="bg-white rounded-2xl p-8 max-w-md mx-4 text-center">
                    <h3 class="text-xl font-bold text-gray-800 mb-4">${title}</h3>
                    <p class="text-gray-600 mb-6">${message}</p>
                    <div class="flex gap-4 justify-center">
                        <button onclick="this.closest('.fixed').remove()" class="bg-gray-500 text-white px-6 py-2 rounded-lg hover:bg-gray-600 transition-colors">ุฅูุบุงุก</button>
                        <button onclick="(${onConfirm})(); this.closest('.fixed').remove()" class="bg-red-600 text-white px-6 py-2 rounded-lg hover:bg-red-700 transition-colors">ุชุฃููุฏ</button>
                    </div>
                </div>
            `;
            document.body.appendChild(confirmDiv);
        }

        // Event listener for land type change
        document.addEventListener('change', function(e) {
            if (e.target.id === 'land-licensed') {
                const buildingYearDiv = document.getElementById('building-license-year');
                if (e.target.value === 'yes') {
                    buildingYearDiv.style.display = 'block';
                } else {
                    buildingYearDiv.style.display = 'none';
                }
            }
        });

        // Image upload functionality
        document.addEventListener('change', function(e) {
            if (e.target.id === 'property-images') {
                handleImageUpload(e.target.files);
            }
        });

        function handleImageUpload(files) {
            const previewContainer = document.getElementById('image-preview');
            const countContainer = document.getElementById('image-count');
            
            if (files.length < 4) {
                showCustomAlert('ุนุฏุฏ ุงูุตูุฑ ุบูุฑ ูุงูู', 'ูุฌุจ ุงุฎุชูุงุฑ 4 ุตูุฑ ุนูู ุงูุฃูู ููุนูุงุฑ');
                return;
            }
            
            if (files.length > 10) {
                showCustomAlert('ุนุฏุฏ ุงูุตูุฑ ูุซูุฑ', 'ุงูุญุฏ ุงูุฃูุตู ูู 10 ุตูุฑ ููุนูุงุฑ');
                return;
            }
            
            previewContainer.innerHTML = '';
            previewContainer.classList.remove('hidden');
            countContainer.classList.remove('hidden');
            
            Array.from(files).forEach((file, index) => {
                if (file.type.startsWith('image/')) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        const imageDiv = document.createElement('div');
                        imageDiv.className = 'relative group';
                        imageDiv.innerHTML = `
                            <img src="${e.target.result}" alt="ุตูุฑุฉ ุงูุนูุงุฑ ${index + 1}" class="w-full h-24 object-cover rounded-lg border-2 border-gray-300">
                            <div class="absolute inset-0 bg-black bg-opacity-50 opacity-0 group-hover:opacity-100 transition-opacity rounded-lg flex items-center justify-center">
                                <span class="text-white text-xs font-semibold">ุตูุฑุฉ ${index + 1}</span>
                            </div>
                        `;
                        previewContainer.appendChild(imageDiv);
                    };
                    reader.readAsDataURL(file);
                }
            });
            
            countContainer.innerHTML = `
                <div class="flex items-center justify-between">
                    <span class="text-green-600 font-semibold">โ ุชู ุงุฎุชูุงุฑ ${files.length} ุตูุฑุฉ</span>
                    <span class="text-xs text-gray-500">ุงูุญุฏ ุงูุฃูุตู: 10 ุตูุฑ</span>
                </div>
            `;
        }

        // Map functionality
        function showMap(area) {
            // Hide all maps first
            document.querySelectorAll('.map-iframe').forEach(map => {
                map.classList.add('hidden');
            });
            
            // Hide default message
            document.getElementById('default-map-message').classList.add('hidden');
            
            // Show selected map
            document.getElementById(`${area}-map`).classList.remove('hidden');
            
            // Update button styles
            document.querySelectorAll('.map-area-btn').forEach(btn => {
                btn.classList.remove('bg-green-500', 'text-white');
                btn.classList.add('bg-blue-500', 'text-white');
            });
            
            // Highlight selected button
            event.target.classList.remove('bg-blue-500');
            event.target.classList.add('bg-green-500');
            
            // Show selected area display
            const areaDisplay = document.getElementById('selected-area-display');
            const areaName = document.getElementById('area-name');
            const coordinatesDiv = document.getElementById('selected-coordinates');
            
            areaDisplay.classList.remove('hidden');
            areaName.textContent = getLocationArabic(area);
            
            coordinatesDiv.classList.remove('hidden');
            coordinatesDiv.innerHTML = `๐ ุชู ุนุฑุถ ุฎุฑูุทุฉ: ${getLocationArabic(area)} - ุงููุฑ ุนูู ุงูููุงุทู ุงููุฑุนูุฉ ูุชุญุฏูุฏ ุงููููุน`;
            
            // Update the location input field
            const locationSelect = document.getElementById('seller-location');
            if (locationSelect) {
                locationSelect.value = area;
            }
        }

        // Function to select specific map location
        function selectMapLocation(location) {
            const mapLocationInput = document.getElementById('map-location');
            if (mapLocationInput) {
                mapLocationInput.value = location;
            }
            
            // Update coordinates display
            const coordinatesDiv = document.getElementById('selected-coordinates');
            if (coordinatesDiv) {
                coordinatesDiv.innerHTML = `โ ุชู ุชุญุฏูุฏ ุงููููุน: ${location}`;
                coordinatesDiv.classList.remove('hidden');
            }
            
            // Show success message
            showCustomAlert('ุชู ุชุญุฏูุฏ ุงููููุน', `ุชู ุชุญุฏูุฏ ูููุน ุงูุนูุงุฑ: ${location}`);
        }

        // Legacy function for backward compatibility
        function selectMapArea(area) {
            showMap(area);
        }

        // Helper functions for Arabic translations
        function getFinishingArabic(finishing) {
            const finishings = {
                'finished': 'ูุชุดุทุจ ูุงูู',
                'semi-finished': 'ูุตู ุชุดุทูุจ',
                'unfinished': 'ุนูู ุงูุทูุจุฉ'
            };
            return finishings[finishing] || finishing;
        }

        function getFloorArabic(floor) {
            const floors = {
                'ground': 'ุงูุฃุฑุถู',
                '1': 'ุงูุฃูู',
                '2': 'ุงูุซุงูู',
                '3': 'ุงูุซุงูุซ',
                '4': 'ุงูุฑุงุจุน',
                '5+': 'ุงูุฎุงูุณ ุฃู ุฃุนูู'
            };
            return floors[floor] || floor;
        }

        // View full details function
        function viewFullDetails(id, type) {
            const item = type === 'seller' ? sellerRegistrations.find(s => s.id === id) : buyerRegistrations.find(b => b.id === id);
            if (!item) return;
            
            const modalDiv = document.createElement('div');
            modalDiv.className = 'fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4';
            modalDiv.innerHTML = `
                <div class="bg-white rounded-2xl p-6 max-w-4xl w-full max-h-full overflow-y-auto">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-2xl font-bold text-gray-800">ุงูุชูุงุตูู ุงููุงููุฉ - ${getPropertyTypeArabic(item.propertyType)}</h3>
                        <button onclick="this.closest('.fixed').remove()" class="text-gray-500 hover:text-gray-700 text-2xl">&times;</button>
                    </div>
                    
                    <div class="grid md:grid-cols-2 gap-6">
                        <!-- ุงูุจูุงูุงุช ุงูุฃุณุงุณูุฉ -->
                        <div class="bg-gray-50 p-4 rounded-lg">
                            <h4 class="font-bold text-gray-700 mb-3">ุงูุจูุงูุงุช ุงูุฃุณุงุณูุฉ</h4>
                            <div class="space-y-2 text-sm">
                                <p><strong>ููุน ุงูุนูุงุฑ:</strong> ${getPropertyTypeArabic(item.propertyType)}</p>
                                <p><strong>ุงูููุทูุฉ:</strong> ${getLocationArabic(item.location)}</p>
                                <p><strong>ุงุณู ุงููุงูู:</strong> ${item.name}</p>
                                <p><strong>ุฑูู ุงููุงุชุณุงุจ:</strong> ${item.whatsapp}</p>
                                <p><strong>ุชุงุฑูุฎ ุงูุชุณุฌูู:</strong> ${item.timestamp}</p>
                                ${item.mapLocation ? `<p><strong>ุงููููุน ุจุงูุชูุตูู:</strong> ${item.mapLocation}</p>` : ''}
                            </div>
                        </div>
                        
                        <!-- ุชูุงุตูู ุงูุนูุงุฑ -->
                        <div class="bg-blue-50 p-4 rounded-lg">
                            <h4 class="font-bold text-gray-700 mb-3">ุชูุงุตูู ุงูุนูุงุฑ</h4>
                            <div class="space-y-2 text-sm">
                                ${item.area ? `<p><strong>ุงููุณุงุญุฉ:</strong> ${item.area} ูุชุฑ ูุฑุจุน</p>` : ''}
                                ${item.rooms ? `<p><strong>ุนุฏุฏ ุงูุบุฑู:</strong> ${item.rooms}</p>` : ''}
                                ${item.bathrooms ? `<p><strong>ุนุฏุฏ ุงูุญูุงูุงุช:</strong> ${item.bathrooms}</p>` : ''}
                                ${item.floors ? `<p><strong>ุนุฏุฏ ุงูุฃุฏูุงุฑ:</strong> ${item.floors}</p>` : ''}
                                ${item.floor ? `<p><strong>ุงูุฏูุฑ:</strong> ${getFloorArabic(item.floor)}</p>` : ''}
                                ${item.apartmentShare ? `<p><strong>ุญุตุฉ ุงูุดูุฉ:</strong> ${item.apartmentShare}</p>` : ''}
                                ${item.year ? `<p><strong>ุณูุฉ ุงููุจุงูู:</strong> ${item.year}</p>` : ''}
                                ${item.finishing ? `<p><strong>ูุณุชูู ุงูุชุดุทูุจ:</strong> ${getFinishingArabic(item.finishing)}</p>` : ''}
                                ${item.apartmentsPerFloor ? `<p><strong>ุดูู ูู ุงูุฏูุฑ:</strong> ${item.apartmentsPerFloor}</p>` : ''}
                                ${item.apartmentArea ? `<p><strong>ูุณุงุญุฉ ุงูุดูุฉ:</strong> ${item.apartmentArea} ูยฒ</p>` : ''}
                            </div>
                        </div>
                        
                        <!-- ูุนูููุงุช ุงูุณุนุฑ -->
                        ${type === 'seller' && (item.pricePerMeter || item.totalPrice) ? `
                        <div class="bg-green-50 p-4 rounded-lg">
                            <h4 class="font-bold text-gray-700 mb-3">ูุนูููุงุช ุงูุณุนุฑ</h4>
                            <div class="space-y-2 text-sm">
                                ${item.pricePerMeter ? `<p><strong>ุณุนุฑ ุงููุชุฑ:</strong> ${Number(item.pricePerMeter).toLocaleString()} ุฌููู</p>` : ''}
                                ${item.totalPrice ? `<p><strong>ุงูุณุนุฑ ุงูููู:</strong> ${Number(item.totalPrice).toLocaleString()} ุฌููู</p>` : ''}
                                ${item.negotiable ? `<p class="text-amber-600 font-semibold">โ๏ธ ูุงุจู ููุชูุงูุถ</p>` : ''}
                            </div>
                        </div>
                        ` : ''}
                        
                        <!-- ุงูุตูุฑ -->
                        ${item.images && item.images.length > 0 ? `
                        <div class="bg-purple-50 p-4 rounded-lg">
                            <h4 class="font-bold text-gray-700 mb-3">ุงูุตูุฑ ุงููุฑููุฉ (${item.images.length})</h4>
                            <div class="grid grid-cols-3 gap-2">
                                ${item.images.slice(0, 6).map((image, index) => `
                                    <img src="${image.data}" alt="ุตูุฑุฉ ${index + 1}" class="w-full h-16 object-cover rounded border cursor-pointer hover:opacity-75" onclick="openImageFullscreen('${image.data}')">
                                `).join('')}
                                ${item.images.length > 6 ? `<div class="w-full h-16 bg-gray-200 rounded border flex items-center justify-center text-xs text-gray-600">+${item.images.length - 6} ุตูุฑ ุฃุฎุฑู</div>` : ''}
                            </div>
                        </div>
                        ` : ''}
                    </div>
                    
                    <div class="mt-6 flex gap-4 justify-center">
                        <button onclick="copyWhatsAppLink('${item.whatsapp}', '${type}')" class="bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition-colors">ูุณุฎ ุฑุงุจุท ูุงุชุณุงุจ</button>
                        ${type === 'seller' ? `<button onclick="generatePropertyCard(${item.id})" class="bg-purple-500 text-white px-6 py-2 rounded-lg hover:bg-purple-600 transition-colors">ุฅูุดุงุก ููุทู</button>` : ''}
                        <button onclick="editSellerData(${item.id})" class="bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600 transition-colors">ุชุนุฏูู ุงูุจูุงูุงุช</button>
                    </div>
                </div>
            `;
            document.body.appendChild(modalDiv);
        }

        // Generate property card function
        function generatePropertyCard(sellerId) {
            const seller = sellerRegistrations.find(s => s.id === sellerId);
            if (!seller) return;
            
            const modalDiv = document.createElement('div');
            modalDiv.className = 'fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4';
            modalDiv.innerHTML = `
                <div class="bg-white rounded-2xl p-6 max-w-4xl w-full max-h-full overflow-y-auto">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-xl font-bold text-purple-700">ุฅูุดุงุก ูุชุฎุตูุต ููุทู ุงูุนูุงุฑ</h3>
                        <button onclick="this.closest('.fixed').remove()" class="text-gray-500 hover:text-gray-700 text-2xl">&times;</button>
                    </div>
                    
                    <div class="grid md:grid-cols-2 gap-6">
                        <!-- Customization Panel -->
                        <div class="bg-gray-50 p-6 rounded-xl">
                            <h4 class="text-lg font-bold text-gray-700 mb-4">๐จ ุชุฎุตูุต ุงูููุทู</h4>
                            
                            <!-- Title Customization -->
                            <div class="mb-4">
                                <label class="block text-sm font-semibold text-gray-700 mb-2">ุนููุงู ุงูููุทู</label>
                                <input type="text" id="card-title" value="${getPropertyTypeArabic(seller.propertyType)} ููุจูุน" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none" onchange="updateCardPreview()">
                            </div>
                            
                            <!-- Location Customization -->
                            <div class="mb-4">
                                <label class="block text-sm font-semibold text-gray-700 mb-2">ุงููููุน ุงููุนุฑูุถ</label>
                                <input type="text" id="card-location" value="${getLocationArabic(seller.location)}" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none" onchange="updateCardPreview()">
                            </div>
                            
                            <!-- Additional Notes -->
                            <div class="mb-4">
                                <label class="block text-sm font-semibold text-gray-700 mb-2">ููุงุญุธุงุช ุฅุถุงููุฉ</label>
                                <textarea id="card-notes" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none h-20" placeholder="ุงูุชุจ ุฃู ููุงุญุธุงุช ุฃู ูููุฒุงุช ุฅุถุงููุฉ..." onchange="updateCardPreview()"></textarea>
                            </div>
                            
                            <!-- Special Features -->
                            <div class="mb-4">
                                <label class="block text-sm font-semibold text-gray-700 mb-2">ุงููููุฒุงุช ุงูุฎุงุตุฉ</label>
                                <div class="space-y-2">
                                    <label class="flex items-center">
                                        <input type="checkbox" id="feature-urgent" class="mr-2" onchange="updateCardPreview()">
                                        <span class="text-sm">๐ฅ ุนุฑุถ ุนุงุฌู</span>
                                    </label>
                                    <label class="flex items-center">
                                        <input type="checkbox" id="feature-exclusive" class="mr-2" onchange="updateCardPreview()">
                                        <span class="text-sm">โญ ุญุตุฑู</span>
                                    </label>
                                    <label class="flex items-center">
                                        <input type="checkbox" id="feature-new" class="mr-2" onchange="updateCardPreview()">
                                        <span class="text-sm">๐ ุฌุฏูุฏ</span>
                                    </label>
                                    <label class="flex items-center">
                                        <input type="checkbox" id="feature-reduced" class="mr-2" onchange="updateCardPreview()">
                                        <span class="text-sm">๐ธ ุณุนุฑ ูุฎูุถ</span>
                                    </label>
                                </div>
                            </div>
                            
                            <!-- Contact Info Customization -->
                            <div class="mb-4">
                                <label class="block text-sm font-semibold text-gray-700 mb-2">ุฑูู ุงูุชูุงุตู</label>
                                <input type="text" id="card-contact" value="01091020887" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none" onchange="updateCardPreview()">
                            </div>
                            
                            <!-- Additional Details -->
                            <div class="mb-4">
                                <label class="block text-sm font-semibold text-gray-700 mb-2">ุชูุงุตูู ุฅุถุงููุฉ</label>
                                <div class="space-y-2">
                                    <input type="text" id="extra-detail-1" placeholder="ุชูุตูู ุฅุถุงูู 1" class="w-full p-2 border border-gray-300 rounded focus:border-purple-500 focus:outline-none text-sm" onchange="updateCardPreview()">
                                    <input type="text" id="extra-detail-2" placeholder="ุชูุตูู ุฅุถุงูู 2" class="w-full p-2 border border-gray-300 rounded focus:border-purple-500 focus:outline-none text-sm" onchange="updateCardPreview()">
                                    <input type="text" id="extra-detail-3" placeholder="ุชูุตูู ุฅุถุงูู 3" class="w-full p-2 border border-gray-300 rounded focus:border-purple-500 focus:outline-none text-sm" onchange="updateCardPreview()">
                                </div>
                            </div>
                            
                            <!-- Card Style -->
                            <div class="mb-4">
                                <label class="block text-sm font-semibold text-gray-700 mb-2">ููุท ุงูููุทู</label>
                                <select id="card-style" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none" onchange="updateCardPreview()">
                                    <option value="classic">ููุงุณููู</option>
                                    <option value="modern">ุนุตุฑู</option>
                                    <option value="elegant">ุฃููู</option>
                                </select>
                            </div>
                        </div>
                        
                        <!-- Property Card Preview -->
                        <div id="property-card-preview" class="bg-gradient-to-br from-blue-50 to-green-50 p-6 rounded-xl border-2 border-gray-300">
                            <div class="text-center mb-4">
                                <div id="card-badges" class="mb-2">
                                    <!-- Special badges will appear here -->
                                </div>
                                <h2 id="preview-title" class="text-2xl font-bold text-gray-800 mb-2">${getPropertyTypeArabic(seller.propertyType)} ููุจูุน</h2>
                                <p id="preview-location" class="text-lg text-blue-600 font-semibold">๐ ${getLocationArabic(seller.location)}</p>
                            </div>
                            
                            <!-- Images Section -->
                            ${seller.images && seller.images.length >= 2 ? `
                            <div class="grid grid-cols-2 gap-3 mb-4">
                                <img src="${seller.images[0].data}" alt="ุตูุฑุฉ ุงูุนูุงุฑ 1" class="w-full h-32 object-cover rounded-lg border-2 border-gray-300">
                                <img src="${seller.images[1].data}" alt="ุตูุฑุฉ ุงูุนูุงุฑ 2" class="w-full h-32 object-cover rounded-lg border-2 border-gray-300">
                            </div>
                            ` : seller.images && seller.images.length === 1 ? `
                            <div class="mb-4">
                                <img src="${seller.images[0].data}" alt="ุตูุฑุฉ ุงูุนูุงุฑ" class="w-full h-40 object-cover rounded-lg border-2 border-gray-300">
                            </div>
                            ` : ''}
                            
                            <!-- Property Details -->
                            <div class="grid grid-cols-2 gap-3 mb-4 text-sm">
                                ${seller.area ? `<div class="bg-white p-2 rounded border"><strong>ุงููุณุงุญุฉ:</strong> ${seller.area} ูยฒ</div>` : ''}
                                ${seller.rooms ? `<div class="bg-white p-2 rounded border"><strong>ุงูุบุฑู:</strong> ${seller.rooms}</div>` : ''}
                                ${seller.apartmentShare ? `<div class="bg-white p-2 rounded border"><strong>ุงูุญุตุฉ:</strong> ${seller.apartmentShare}</div>` : ''}
                                ${seller.year ? `<div class="bg-white p-2 rounded border"><strong>ุงููุจุงูู:</strong> ${seller.year}</div>` : ''}
                                ${seller.finishing ? `<div class="bg-white p-2 rounded border"><strong>ุงูุชุดุทูุจ:</strong> ${getFinishingArabic(seller.finishing)}</div>` : ''}
                                ${seller.floor ? `<div class="bg-white p-2 rounded border"><strong>ุงูุฏูุฑ:</strong> ${getFloorArabic(seller.floor)}</div>` : ''}
                            </div>
                            
                            <!-- Extra Details -->
                            <div id="extra-details" class="mb-4">
                                <!-- Extra details will appear here -->
                            </div>
                            
                            <!-- Price Section -->
                            <div class="bg-white p-4 rounded-lg border-2 border-green-300 mb-4">
                                ${seller.pricePerMeter ? `<p class="text-sm text-gray-600 mb-1">ุณุนุฑ ุงููุชุฑ: ${Number(seller.pricePerMeter).toLocaleString()} ุฌููู</p>` : ''}
                                ${seller.totalPrice ? `<p class="text-xl font-bold text-green-600">๐ฐ ุงูุณุนุฑ: ${Number(seller.totalPrice).toLocaleString()} ุฌููู</p>` : ''}
                                ${seller.negotiable ? `<p class="text-sm text-amber-600 font-semibold">โ๏ธ ูุงุจู ููุชูุงูุถ</p>` : ''}
                            </div>
                            
                            <!-- Additional Notes -->
                            <div id="card-notes-preview" class="mb-4" style="display: none;">
                                <div class="bg-yellow-50 p-3 rounded-lg border border-yellow-200">
                                    <p class="text-sm text-gray-700"><strong>ููุงุญุธุงุช:</strong> <span id="notes-text"></span></p>
                                </div>
                            </div>
                            
                            <!-- Contact Section -->
                            <div class="bg-blue-100 p-4 rounded-lg text-center">
                                <p class="text-lg font-bold text-blue-800 mb-2">ููุชูุงุตู ุนุจุฑ ูุงุชุณุงุจ</p>
                                <p id="preview-contact" class="text-xl font-bold text-blue-900">๐ฑ 01091020887</p>
                                <button onclick="copyPropertyCardWhatsApp()" class="mt-2 bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition-colors">ูุณุฎ ุฑุงุจุท ูุงุชุณุงุจ</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Action Buttons -->
                    <div class="flex gap-4 justify-center mt-6">
                        <button onclick="copyPropertyCard()" class="bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600 transition-colors">๐ ูุณุฎ ุงูููุทู</button>
                        <button onclick="publishPropertyCard(${sellerId})" class="bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition-colors">๐ข ูุดุฑ ูู ุงูุนูุงุฑุงุช ุงููุชุงุญุฉ</button>
                        <button onclick="sharePropertyCard()" class="bg-purple-500 text-white px-6 py-2 rounded-lg hover:bg-purple-600 transition-colors">๐ค ูุดุงุฑูุฉ ุงูููุทู</button>
                        <button onclick="saveCardTemplate(${sellerId})" class="bg-orange-500 text-white px-6 py-2 rounded-lg hover:bg-orange-600 transition-colors">๐พ ุญูุธ ููุงูุจ</button>
                    </div>
                </div>
            `;
            document.body.appendChild(modalDiv);
        }

        // Copy property card WhatsApp link
        function copyPropertyCardWhatsApp() {
            const message = encodeURIComponent('ูุฑุญุจุงูุ ุฃูุง ููุชู ุจุงูุนูุงุฑ ุงููุนุฑูุถ ููุจูุน ุนูู ูููุน ุงููุณุชูุจู ููุชุณููู ุงูุนูุงุฑู');
            const whatsappLink = `https://wa.me/201031020887?text=${message}`;
            
            navigator.clipboard.writeText(whatsappLink).then(() => {
                showCustomAlert('ุชู ุงููุณุฎ', 'ุชู ูุณุฎ ุฑุงุจุท ุงููุงุชุณุงุจ ุจูุฌุงุญ!');
            });
        }

        function copyCompanyWhatsAppLink() {
            const message = encodeURIComponent('ูุฑุญุจุงูุ ุฃูุง ููุชู ุจุงูุนูุงุฑุงุช ุงููุนุฑูุถุฉ ุนูู ูููุน ุงููุณุชูุจู ููุชุณููู ุงูุนูุงุฑู');
            const whatsappLink = `https://wa.me/201091020887?text=${message}`;
            
            navigator.clipboard.writeText(whatsappLink).then(() => {
                showCustomAlert('ุชู ุงููุณุฎ', 'ุชู ูุณุฎ ุฑุงุจุท ุงููุงุชุณุงุจ ุจูุฌุงุญ! ููููู ุงูุขู ูุตูู ูู ุฃู ููุงู');
            }).catch(() => {
                // Fallback for older browsers
                const textArea = document.createElement('textarea');
                textArea.value = whatsappLink;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                showCustomAlert('ุชู ุงููุณุฎ', 'ุชู ูุณุฎ ุฑุงุจุท ุงููุงุชุณุงุจ ุจูุฌุงุญ! ููููู ุงูุขู ูุตูู ูู ุฃู ููุงู');
            });
        }

        // Update card preview function
        function updateCardPreview() {
            // Update title
            const title = document.getElementById('card-title').value;
            document.getElementById('preview-title').textContent = title;
            
            // Update location
            const location = document.getElementById('card-location').value;
            document.getElementById('preview-location').textContent = `๐ ${location}`;
            
            // Update contact
            const contact = document.getElementById('card-contact').value;
            document.getElementById('preview-contact').textContent = `๐ฑ ${contact}`;
            
            // Update notes
            const notes = document.getElementById('card-notes').value;
            const notesPreview = document.getElementById('card-notes-preview');
            const notesText = document.getElementById('notes-text');
            
            if (notes.trim()) {
                notesText.textContent = notes;
                notesPreview.style.display = 'block';
            } else {
                notesPreview.style.display = 'none';
            }
            
            // Update special features badges
            const badgesContainer = document.getElementById('card-badges');
            let badges = '';
            
            if (document.getElementById('feature-urgent').checked) {
                badges += '<span class="inline-block bg-red-100 text-red-800 px-2 py-1 rounded-full text-xs font-semibold mr-2 mb-2">๐ฅ ุนุฑุถ ุนุงุฌู</span>';
            }
            if (document.getElementById('feature-exclusive').checked) {
                badges += '<span class="inline-block bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full text-xs font-semibold mr-2 mb-2">โญ ุญุตุฑู</span>';
            }
            if (document.getElementById('feature-new').checked) {
                badges += '<span class="inline-block bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs font-semibold mr-2 mb-2">๐ ุฌุฏูุฏ</span>';
            }
            if (document.getElementById('feature-reduced').checked) {
                badges += '<span class="inline-block bg-purple-100 text-purple-800 px-2 py-1 rounded-full text-xs font-semibold mr-2 mb-2">๐ธ ุณุนุฑ ูุฎูุถ</span>';
            }
            
            badgesContainer.innerHTML = badges;
            
            // Update extra details
            const extraDetailsContainer = document.getElementById('extra-details');
            let extraDetails = '';
            
            const detail1 = document.getElementById('extra-detail-1').value;
            const detail2 = document.getElementById('extra-detail-2').value;
            const detail3 = document.getElementById('extra-detail-3').value;
            
            if (detail1.trim() || detail2.trim() || detail3.trim()) {
                extraDetails = '<div class="grid grid-cols-1 gap-2 text-sm">';
                if (detail1.trim()) extraDetails += `<div class="bg-white p-2 rounded border">โข ${detail1}</div>`;
                if (detail2.trim()) extraDetails += `<div class="bg-white p-2 rounded border">โข ${detail2}</div>`;
                if (detail3.trim()) extraDetails += `<div class="bg-white p-2 rounded border">โข ${detail3}</div>`;
                extraDetails += '</div>';
            }
            
            extraDetailsContainer.innerHTML = extraDetails;
            
            // Update card style
            const cardStyle = document.getElementById('card-style').value;
            const cardPreview = document.getElementById('property-card-preview');
            
            // Reset classes
            cardPreview.className = 'p-6 rounded-xl border-2 border-gray-300';
            
            switch(cardStyle) {
                case 'classic':
                    cardPreview.className += ' bg-gradient-to-br from-blue-50 to-green-50';
                    break;
                case 'modern':
                    cardPreview.className += ' bg-gradient-to-br from-gray-50 to-blue-50';
                    break;
                case 'elegant':
                    cardPreview.className += ' bg-gradient-to-br from-purple-50 to-pink-50';
                    break;
            }
        }

        // Copy property card content
        function copyPropertyCard() {
            const cardContent = document.getElementById('property-card-preview').innerText;
            navigator.clipboard.writeText(cardContent).then(() => {
                showCustomAlert('ุชู ุงููุณุฎ', 'ุชู ูุณุฎ ูุญุชูู ุงูููุทู ุจูุฌุงุญ!');
            });
        }

        // Save card template function
        function saveCardTemplate(sellerId) {
            const template = {
                id: Date.now(),
                sellerId: sellerId,
                title: document.getElementById('card-title').value,
                location: document.getElementById('card-location').value,
                notes: document.getElementById('card-notes').value,
                contact: document.getElementById('card-contact').value,
                features: {
                    urgent: document.getElementById('feature-urgent').checked,
                    exclusive: document.getElementById('feature-exclusive').checked,
                    new: document.getElementById('feature-new').checked,
                    reduced: document.getElementById('feature-reduced').checked
                },
                extraDetails: [
                    document.getElementById('extra-detail-1').value,
                    document.getElementById('extra-detail-2').value,
                    document.getElementById('extra-detail-3').value
                ].filter(detail => detail.trim() !== ''),
                style: document.getElementById('card-style').value,
                createdAt: new Date().toLocaleString('ar-EG'),
                createdBy: currentAdmin ? currentAdmin.fullName : 'ูุฌููู'
            };
            
            // Save to localStorage or a templates array
            let savedTemplates = JSON.parse(localStorage.getItem('propertyCardTemplates') || '[]');
            savedTemplates.push(template);
            localStorage.setItem('propertyCardTemplates', JSON.stringify(savedTemplates));
            
            showCustomAlert('ุชู ุงูุญูุธ', 'ุชู ุญูุธ ูุงูุจ ุงูููุทู ุจูุฌุงุญ! ููููู ุงุณุชุฎุฏุงูู ูุงุญูุงู');
            addNotification('ูุงูุจ ุฌุฏูุฏ', `ุชู ุญูุธ ูุงูุจ ููุทู ุฌุฏูุฏ ููุนูุงุฑ`, 'success');
        }

        // Publish property card
        function publishPropertyCard(sellerId) {
            const seller = sellerRegistrations.find(s => s.id === sellerId);
            if (!seller) return;
            
            seller.published = true;
            seller.publishedAt = new Date().toLocaleString('ar-EG');
            
            updateListings();
            showCustomAlert('ุชู ุงููุดุฑ', 'ุชู ูุดุฑ ุงูุนูุงุฑ ูู ูุณู ุงูุนูุงุฑุงุช ุงููุชุงุญุฉ ุจูุฌุงุญ!');
            
            // Close modal
            document.querySelector('.fixed').remove();
        }

        // Share property card
        function sharePropertyCard() {
            if (navigator.share) {
                navigator.share({
                    title: 'ุนูุงุฑ ููุจูุน - ุณูู ุนูุงุฑู',
                    text: 'ุดุงูุฏ ูุฐุง ุงูุนูุงุฑ ุงููููุฒ ููุจูุน',
                    url: window.location.href
                });
            } else {
                showCustomAlert('ุงููุดุงุฑูุฉ', 'ููููู ูุณุฎ ุงูููุทู ููุดุงุฑูุชู ูุฏููุงู');
            }
        }

        // Enhanced form submission with images
        function collectPropertyImages() {
            const imageInput = document.getElementById('property-images');
            const images = [];
            
            if (imageInput && imageInput.files.length > 0) {
                Array.from(imageInput.files).forEach(file => {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        images.push({
                            name: file.name,
                            size: file.size,
                            type: file.type,
                            data: e.target.result
                        });
                    };
                    reader.readAsDataURL(file);
                });
            }
            
            return images;
        }

        // Commission Calculator Functions
        function calculateSellerCommission() {
            const price = parseFloat(document.getElementById('seller-property-price').value);
            const rate = parseFloat(document.getElementById('seller-commission-rate').value);
            
            if (!price || price <= 0) {
                showCustomAlert('ุฎุทุฃ', 'ูุฑุฌู ุฅุฏุฎุงู ุณุนุฑ ุงูุนูุงุฑ');
                return;
            }
            
            const commission = (price * rate) / 100;
            
            const resultDiv = document.getElementById('seller-commission-result');
            resultDiv.innerHTML = `
                <div class="text-center">
                    <h5 class="text-lg font-bold text-green-700 mb-2">ูุชูุฌุฉ ุญุณุงุจ ุนูููุฉ ุงูุจุงุฆุน</h5>
                    <div class="space-y-2">
                        <p class="text-sm text-gray-600">ุณุนุฑ ุงูุนูุงุฑ: ${price.toLocaleString()} ุฌููู</p>
                        <p class="text-sm text-gray-600">ูุณุจุฉ ุงูุนูููุฉ: ${rate}%</p>
                        <p class="text-xl font-bold text-green-600">ุงูุนูููุฉ: ${commission.toLocaleString()} ุฌููู</p>
                    </div>
                </div>
            `;
            resultDiv.classList.remove('hidden');
            
            document.getElementById('total-seller-commission').textContent = commission.toLocaleString();
            updateTotalCommission();
        }

        function calculateBuyerCommission() {
            const price = parseFloat(document.getElementById('buyer-property-price').value);
            const rate = parseFloat(document.getElementById('buyer-commission-rate').value);
            
            if (!price || price <= 0) {
                showCustomAlert('ุฎุทุฃ', 'ูุฑุฌู ุฅุฏุฎุงู ุณุนุฑ ุงูุนูุงุฑ');
                return;
            }
            
            const commission = (price * rate) / 100;
            
            const resultDiv = document.getElementById('buyer-commission-result');
            resultDiv.innerHTML = `
                <div class="text-center">
                    <h5 class="text-lg font-bold text-blue-700 mb-2">ูุชูุฌุฉ ุญุณุงุจ ุนูููุฉ ุงููุดุชุฑู</h5>
                    <div class="space-y-2">
                        <p class="text-sm text-gray-600">ุณุนุฑ ุงูุนูุงุฑ: ${price.toLocaleString()} ุฌููู</p>
                        <p class="text-sm text-gray-600">ูุณุจุฉ ุงูุนูููุฉ: ${rate}%</p>
                        <p class="text-xl font-bold text-blue-600">ุงูุนูููุฉ: ${commission.toLocaleString()} ุฌููู</p>
                    </div>
                </div>
            `;
            resultDiv.classList.remove('hidden');
            
            document.getElementById('total-buyer-commission').textContent = commission.toLocaleString();
            updateTotalCommission();
        }

        function updateTotalCommission() {
            const sellerCommission = parseFloat(document.getElementById('total-seller-commission').textContent.replace(/,/g, '')) || 0;
            const buyerCommission = parseFloat(document.getElementById('total-buyer-commission').textContent.replace(/,/g, '')) || 0;
            const total = sellerCommission + buyerCommission;
            
            document.getElementById('total-commission').textContent = total.toLocaleString();
        }

        // Inquiries Management Functions
        function showInquiryForm() {
            const modalDiv = document.createElement('div');
            modalDiv.className = 'fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4';
            modalDiv.innerHTML = `
                <div class="bg-white rounded-2xl p-6 max-w-2xl w-full max-h-full overflow-y-auto">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-xl font-bold text-indigo-700">๐ ุฅุถุงูุฉ ุงุณุชุนูุงู ุฌุฏูุฏ</h3>
                        <button onclick="this.closest('.fixed').remove()" class="text-gray-500 hover:text-gray-700 text-2xl">&times;</button>
                    </div>
                    
                    <form onsubmit="addInquiry(event)">
                        <div class="grid md:grid-cols-2 gap-4 mb-4">
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">ุงุณู ุงูุนููู</label>
                                <input type="text" id="inquiry-client-name" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-indigo-500 focus:outline-none" required>
                            </div>
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">ุฑูู ุงููุงุชุณุงุจ</label>
                                <input type="tel" id="inquiry-whatsapp" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-indigo-500 focus:outline-none" required>
                            </div>
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">ููุน ุงูุงุณุชุนูุงู</label>
                                <select id="inquiry-type" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-indigo-500 focus:outline-none" required>
                                    <option value="">ุงุฎุชุฑ ููุน ุงูุงุณุชุนูุงู</option>
                                    <option value="property-inquiry">ุงุณุชุนูุงู ุนู ุนูุงุฑ</option>
                                    <option value="viewing-request">ุทูุจ ูุนุงููุฉ</option>
                                    <option value="price-negotiation">ุชูุงูุถ ุนูู ุงูุณุนุฑ</option>
                                    <option value="general-inquiry">ุงุณุชุนูุงู ุนุงู</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">ุงูุฃููููุฉ</label>
                                <select id="inquiry-priority" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-indigo-500 focus:outline-none" required>
                                    <option value="normal">ุนุงุฏูุฉ</option>
                                    <option value="high">ุนุงููุฉ</option>
                                    <option value="urgent">ุนุงุฌูุฉ</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="mb-4">
                            <label class="block text-sm font-semibold text-gray-700 mb-2">ุชูุงุตูู ุงูุงุณุชุนูุงู</label>
                            <textarea id="inquiry-details" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-indigo-500 focus:outline-none h-24" placeholder="ุงูุชุจ ุชูุงุตูู ุงูุงุณุชุนูุงู..." required></textarea>
                        </div>
                        
                        <div class="mb-4">
                            <label class="block text-sm font-semibold text-gray-700 mb-2">ููุนุฏ ุงููุชุงุจุนุฉ (ุงุฎุชูุงุฑู)</label>
                            <input type="datetime-local" id="inquiry-follow-date" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-indigo-500 focus:outline-none">
                        </div>
                        
                        <div class="flex gap-4 justify-end">
                            <button type="button" onclick="this.closest('.fixed').remove()" class="bg-gray-500 text-white px-6 py-2 rounded-lg hover:bg-gray-600 transition-colors">ุฅูุบุงุก</button>
                            <button type="submit" class="bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700 transition-colors">ุฅุถุงูุฉ ุงูุงุณุชุนูุงู</button>
                        </div>
                    </form>
                </div>
            `;
            document.body.appendChild(modalDiv);
        }

        function addInquiry(event) {
            event.preventDefault();
            
            const inquiry = {
                id: Date.now(),
                clientName: document.getElementById('inquiry-client-name').value,
                whatsapp: document.getElementById('inquiry-whatsapp').value,
                type: document.getElementById('inquiry-type').value,
                priority: document.getElementById('inquiry-priority').value,
                details: document.getElementById('inquiry-details').value,
                followDate: document.getElementById('inquiry-follow-date').value,
                status: 'pending',
                createdAt: new Date().toLocaleString('ar-EG'),
                createdBy: currentAdmin.fullName
            };
            
            inquiries.push(inquiry);
            updateInquiriesList();
            
            // Close modal
            event.target.closest('.fixed').remove();
            
            // Add notification
            addNotification('ุงุณุชุนูุงู ุฌุฏูุฏ', `ุชู ุฅุถุงูุฉ ุงุณุชุนูุงู ุฌุฏูุฏ ูู ${inquiry.clientName}`, 'info');
            
            // Set reminder if follow date is set
            if (inquiry.followDate) {
                setInquiryReminder(inquiry);
            }
            
            showCustomAlert('ุชู ุจูุฌุงุญ', 'ุชู ุฅุถุงูุฉ ุงูุงุณุชุนูุงู ุจูุฌุงุญ');
        }

        function updateInquiriesList() {
            const inquiriesList = document.getElementById('inquiries-list');
            
            inquiriesList.innerHTML = inquiries.length > 0 ? inquiries.map(inquiry => `
                <div class="bg-white p-4 rounded-lg border-2 ${getPriorityBorderColor(inquiry.priority)} hover:shadow-md transition-shadow">
                    <div class="flex justify-between items-start mb-3">
                        <div>
                            <h5 class="font-bold text-gray-800">${inquiry.clientName}</h5>
                            <p class="text-sm text-gray-600">${getInquiryTypeArabic(inquiry.type)}</p>
                        </div>
                        <div class="flex items-center gap-2">
                            <span class="px-2 py-1 rounded-full text-xs font-semibold ${getPriorityBadgeClass(inquiry.priority)}">${getPriorityArabic(inquiry.priority)}</span>
                            <span class="px-2 py-1 rounded-full text-xs font-semibold ${getStatusBadgeClass(inquiry.status)}">${getStatusArabic(inquiry.status)}</span>
                        </div>
                    </div>
                    
                    <p class="text-sm text-gray-600 mb-2">๐ฑ ${inquiry.whatsapp}</p>
                    <p class="text-sm text-gray-600 mb-2">${inquiry.details}</p>
                    ${inquiry.followDate ? `<p class="text-sm text-blue-600 mb-2">๐ ูุชุงุจุนุฉ: ${new Date(inquiry.followDate).toLocaleString('ar-EG')}</p>` : ''}
                    <p class="text-xs text-gray-500 mb-3">ุชู ุงูุฅูุดุงุก: ${inquiry.createdAt} ุจูุงุณุทุฉ ${inquiry.createdBy}</p>
                    
                    <div class="flex gap-2 flex-wrap">
                        <button onclick="updateInquiryStatus(${inquiry.id}, 'contacted')" class="text-xs bg-green-500 text-white px-3 py-1 rounded hover:bg-green-600 transition-colors">ุชู ุงูุชูุงุตู</button>
                        <button onclick="updateInquiryStatus(${inquiry.id}, 'scheduled')" class="text-xs bg-blue-500 text-white px-3 py-1 rounded hover:bg-blue-600 transition-colors">ุชุญุฏูุฏ ููุนุฏ</button>
                        <button onclick="copyWhatsAppLink('${inquiry.whatsapp}', 'inquiry')" class="text-xs bg-purple-500 text-white px-3 py-1 rounded hover:bg-purple-600 transition-colors">ูุงุชุณุงุจ</button>
                        <button onclick="editInquiry(${inquiry.id})" class="text-xs bg-yellow-500 text-white px-3 py-1 rounded hover:bg-yellow-600 transition-colors">ุชุนุฏูู</button>
                        <button onclick="deleteInquiry(${inquiry.id})" class="text-xs bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600 transition-colors">ุญุฐู</button>
                    </div>
                </div>
            `).join('') : `
                <div class="text-center text-gray-500 py-8">
                    <div class="text-4xl mb-4">๐</div>
                    <p>ูุง ุชูุฌุฏ ุงุณุชุนูุงูุงุช ุญุชู ุงูุขู. ุงุถุบุท "ุฅุถุงูุฉ ุงุณุชุนูุงู" ูุจุฏุก ุงููุชุงุจุนุฉ</p>
                </div>
            `;
            
            // Update counters
            updateInquiryCounters();
        }

        function updateInquiryCounters() {
            const pending = inquiries.filter(i => i.status === 'pending').length;
            const contacted = inquiries.filter(i => i.status === 'contacted').length;
            const scheduled = inquiries.filter(i => i.status === 'scheduled').length;
            
            document.getElementById('pending-inquiries').textContent = pending;
            document.getElementById('contacted-inquiries').textContent = contacted;
            document.getElementById('scheduled-inquiries').textContent = scheduled;
        }

        function filterInquiries(status) {
            const filtered = inquiries.filter(i => i.status === status);
            const inquiriesList = document.getElementById('inquiries-list');
            
            inquiriesList.innerHTML = filtered.length > 0 ? filtered.map(inquiry => `
                <div class="bg-white p-4 rounded-lg border-2 ${getPriorityBorderColor(inquiry.priority)} hover:shadow-md transition-shadow">
                    <div class="flex justify-between items-start mb-3">
                        <div>
                            <h5 class="font-bold text-gray-800">${inquiry.clientName}</h5>
                            <p class="text-sm text-gray-600">${getInquiryTypeArabic(inquiry.type)}</p>
                        </div>
                        <div class="flex items-center gap-2">
                            <span class="px-2 py-1 rounded-full text-xs font-semibold ${getPriorityBadgeClass(inquiry.priority)}">${getPriorityArabic(inquiry.priority)}</span>
                            <span class="px-2 py-1 rounded-full text-xs font-semibold ${getStatusBadgeClass(inquiry.status)}">${getStatusArabic(inquiry.status)}</span>
                        </div>
                    </div>
                    
                    <p class="text-sm text-gray-600 mb-2">๐ฑ ${inquiry.whatsapp}</p>
                    <p class="text-sm text-gray-600 mb-2">${inquiry.details}</p>
                    ${inquiry.followDate ? `<p class="text-sm text-blue-600 mb-2">๐ ูุชุงุจุนุฉ: ${new Date(inquiry.followDate).toLocaleString('ar-EG')}</p>` : ''}
                    
                    <div class="flex gap-2 flex-wrap">
                        <button onclick="updateInquiryStatus(${inquiry.id}, 'contacted')" class="text-xs bg-green-500 text-white px-3 py-1 rounded hover:bg-green-600 transition-colors">ุชู ุงูุชูุงุตู</button>
                        <button onclick="copyWhatsAppLink('${inquiry.whatsapp}', 'inquiry')" class="text-xs bg-purple-500 text-white px-3 py-1 rounded hover:bg-purple-600 transition-colors">ูุงุชุณุงุจ</button>
                    </div>
                </div>
            `).join('') : `<p class="text-center text-gray-500 py-8">ูุง ุชูุฌุฏ ุงุณุชุนูุงูุงุช ุจุญุงูุฉ "${getStatusArabic(status)}"</p>`;
        }

        function updateInquiryStatus(inquiryId, newStatus) {
            const inquiry = inquiries.find(i => i.id === inquiryId);
            if (inquiry) {
                inquiry.status = newStatus;
                inquiry.lastUpdated = new Date().toLocaleString('ar-EG');
                updateInquiriesList();
                showCustomAlert('ุชู ุงูุชุญุฏูุซ', `ุชู ุชุญุฏูุซ ุญุงูุฉ ุงูุงุณุชุนูุงู ุฅูู "${getStatusArabic(newStatus)}"`);
            }
        }

        function createInquiry(sellerId, buyerId) {
            const seller = sellerRegistrations.find(s => s.id === sellerId);
            const buyer = buyerRegistrations.find(b => b.id === buyerId);
            
            if (!seller || !buyer) return;
            
            const inquiry = {
                id: Date.now(),
                clientName: `${seller.name} & ${buyer.name}`,
                whatsapp: `${seller.whatsapp} / ${buyer.whatsapp}`,
                type: 'property-matching',
                priority: 'high',
                details: `ุชูููู ุจูู ุจุงุฆุน ${getPropertyTypeArabic(seller.propertyType)} (${seller.name}) ููุดุชุฑู (${buyer.name}) ูู ${getLocationArabic(seller.location)}`,
                status: 'pending',
                createdAt: new Date().toLocaleString('ar-EG'),
                createdBy: currentAdmin.fullName,
                sellerId: sellerId,
                buyerId: buyerId
            };
            
            inquiries.push(inquiry);
            updateInquiriesList();
            
            addNotification('ุงุณุชุนูุงู ุชูููู ุฌุฏูุฏ', `ุชู ุฅูุดุงุก ุงุณุชุนูุงู ุชูููู ุจูู ${seller.name} ู ${buyer.name}`, 'success');
            showCustomAlert('ุชู ุจูุฌุงุญ', 'ุชู ุฅูุดุงุก ุงุณุชุนูุงู ุงูุชูููู ุจูุฌุงุญ');
        }

        function scheduleViewing(sellerId, buyerId) {
            const seller = sellerRegistrations.find(s => s.id === sellerId);
            const buyer = buyerRegistrations.find(b => b.id === buyerId);
            
            if (!seller || !buyer) return;
            
            const modalDiv = document.createElement('div');
            modalDiv.className = 'fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4';
            modalDiv.innerHTML = `
                <div class="bg-white rounded-2xl p-6 max-w-md w-full">
                    <h3 class="text-xl font-bold text-purple-700 mb-4">๐ ุชุญุฏูุฏ ููุนุฏ ูุนุงููุฉ</h3>
                    
                    <div class="mb-4">
                        <p class="text-sm text-gray-600 mb-2"><strong>ุงูุจุงุฆุน:</strong> ${seller.name} (${seller.whatsapp})</p>
                        <p class="text-sm text-gray-600 mb-2"><strong>ุงููุดุชุฑู:</strong> ${buyer.name} (${buyer.whatsapp})</p>
                        <p class="text-sm text-gray-600 mb-4"><strong>ุงูุนูุงุฑ:</strong> ${getPropertyTypeArabic(seller.propertyType)} ูู ${getLocationArabic(seller.location)}</p>
                    </div>
                    
                    <form onsubmit="confirmViewing(event, ${sellerId}, ${buyerId})">
                        <div class="mb-4">
                            <label class="block text-sm font-semibold text-gray-700 mb-2">ููุนุฏ ุงููุนุงููุฉ</label>
                            <input type="datetime-local" id="viewing-date" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none" required>
                        </div>
                        
                        <div class="mb-4">
                            <label class="block text-sm font-semibold text-gray-700 mb-2">ููุงุญุธุงุช</label>
                            <textarea id="viewing-notes" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none h-20" placeholder="ููุงุญุธุงุช ุฅุถุงููุฉ..."></textarea>
                        </div>
                        
                        <div class="flex gap-4 justify-end">
                            <button type="button" onclick="this.closest('.fixed').remove()" class="bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition-colors">ุฅูุบุงุก</button>
                            <button type="submit" class="bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors">ุชุฃููุฏ ุงูููุนุฏ</button>
                        </div>
                    </form>
                </div>
            `;
            document.body.appendChild(modalDiv);
        }

        function confirmViewing(event, sellerId, buyerId) {
            event.preventDefault();
            
            const seller = sellerRegistrations.find(s => s.id === sellerId);
            const buyer = buyerRegistrations.find(b => b.id === buyerId);
            const viewingDate = document.getElementById('viewing-date').value;
            const notes = document.getElementById('viewing-notes').value;
            
            const inquiry = {
                id: Date.now(),
                clientName: `ูุนุงููุฉ: ${seller.name} & ${buyer.name}`,
                whatsapp: `${seller.whatsapp} / ${buyer.whatsapp}`,
                type: 'viewing-request',
                priority: 'high',
                details: `ููุนุฏ ูุนุงููุฉ ${getPropertyTypeArabic(seller.propertyType)} ูู ${getLocationArabic(seller.location)}. ${notes ? 'ููุงุญุธุงุช: ' + notes : ''}`,
                followDate: viewingDate,
                status: 'scheduled',
                createdAt: new Date().toLocaleString('ar-EG'),
                createdBy: currentAdmin.fullName,
                sellerId: sellerId,
                buyerId: buyerId
            };
            
            inquiries.push(inquiry);
            updateInquiriesList();
            
            // Set reminder
            setInquiryReminder(inquiry);
            
            // Close modal
            event.target.closest('.fixed').remove();
            
            addNotification('ููุนุฏ ูุนุงููุฉ ุฌุฏูุฏ', `ุชู ุชุญุฏูุฏ ููุนุฏ ูุนุงููุฉ ูู ${new Date(viewingDate).toLocaleString('ar-EG')}`, 'info');
            showCustomAlert('ุชู ุจูุฌุงุญ', 'ุชู ุชุญุฏูุฏ ููุนุฏ ุงููุนุงููุฉ ุจูุฌุงุญ');
        }

        function setInquiryReminder(inquiry) {
            if (!inquiry.followDate) return;
            
            const reminderTime = new Date(inquiry.followDate).getTime() - Date.now();
            
            if (reminderTime > 0) {
                setTimeout(() => {
                    addNotification('ุชุฐููุฑ ููุนุฏ', `ุญุงู ููุนุฏ ูุชุงุจุนุฉ ุงูุงุณุชุนูุงู ูุน ${inquiry.clientName}`, 'reminder');
                }, reminderTime);
            }
        }

        // Legacy service request function (for backward compatibility)
        function requestService(serviceType) {
            // Find service by old type mapping
            const typeMapping = {
                'apartment-design': 1,
                'shop-design': 2,
                'turnkey': 3
            };
            
            const serviceId = typeMapping[serviceType];
            if (serviceId) {
                requestServiceFromHome(serviceId);
            }
        }

        function updateServiceRequests() {
            const container = document.getElementById('service-requests');
            
            container.innerHTML = serviceRequests.length > 0 ? serviceRequests.map(request => `
                <div class="bg-white p-4 rounded-lg border border-orange-200 hover:shadow-md transition-shadow">
                    <div class="flex justify-between items-start mb-2">
                        <h5 class="font-bold text-orange-700">${request.serviceTitle}</h5>
                        <span class="px-2 py-1 rounded-full text-xs font-semibold ${request.status === 'pending' ? 'bg-yellow-100 text-yellow-800' : 'bg-green-100 text-green-800'}">
                            ${request.status === 'pending' ? 'ููุฏ ุงููุฑุงุฌุนุฉ' : 'ุชู ุงูุชูุงุตู'}
                        </span>
                    </div>
                    <div class="mb-3">
                        <p class="text-sm text-gray-600 mb-1">๐ค <strong>ุงูุนููู:</strong> ${request.clientName}</p>
                        <p class="text-sm text-gray-600 mb-1">๐ฑ <strong>ุงููุงุชุณุงุจ:</strong> ${request.whatsapp}</p>
                        <p class="text-sm text-gray-600 mb-1">๐ <strong>ุชุงุฑูุฎ ุงูุทูุจ:</strong> ${request.createdAt}</p>
                    </div>
                    <div class="mb-3 p-3 bg-gray-50 rounded-lg">
                        <p class="text-sm text-gray-700"><strong>ุชูุงุตูู ุงููุดุฑูุน:</strong></p>
                        <p class="text-sm text-gray-600 mt-1">${request.details}</p>
                    </div>
                    <div class="flex gap-2 flex-wrap">
                        <button onclick="copyWhatsAppLink('${request.whatsapp}', 'service')" class="text-xs bg-green-500 text-white px-3 py-1 rounded hover:bg-green-600 transition-colors">๐ฑ ูุงุชุณุงุจ</button>
                        ${request.status === 'pending' ? `<button onclick="updateServiceRequestStatus(${request.id}, 'contacted')" class="text-xs bg-blue-500 text-white px-3 py-1 rounded hover:bg-blue-600 transition-colors">โ ุชู ุงูุชูุงุตู</button>` : ''}
                        <button onclick="viewServiceRequestDetails(${request.id})" class="text-xs bg-purple-500 text-white px-3 py-1 rounded hover:bg-purple-600 transition-colors">๐๏ธ ุงูุชูุงุตูู</button>
                        <button onclick="deleteServiceRequest(${request.id})" class="text-xs bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600 transition-colors">๐๏ธ ุญุฐู</button>
                    </div>
                </div>
            `).join('') : `
                <div class="text-center text-gray-500 py-8">
                    <div class="text-4xl mb-4">๐๏ธ</div>
                    <p>ูุง ุชูุฌุฏ ุทูุจุงุช ุฎุฏูุงุช ุญุชู ุงูุขู</p>
                </div>
            `;
        }

        function updateServiceRequestStatus(requestId, newStatus) {
            const request = serviceRequests.find(r => r.id === requestId);
            if (request) {
                request.status = newStatus;
                request.updatedAt = new Date().toLocaleString('ar-EG');
                updateServiceRequests();
                showCustomAlert('ุชู ุงูุชุญุฏูุซ', 'ุชู ุชุญุฏูุซ ุญุงูุฉ ุทูุจ ุงูุฎุฏูุฉ ุจูุฌุงุญ');
            }
        }

        function viewServiceRequestDetails(requestId) {
            const request = serviceRequests.find(r => r.id === requestId);
            if (!request) return;
            
            const modalDiv = document.createElement('div');
            modalDiv.className = 'fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4';
            modalDiv.innerHTML = `
                <div class="bg-white rounded-2xl p-6 max-w-2xl w-full max-h-full overflow-y-auto">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-xl font-bold text-orange-700">ุชูุงุตูู ุทูุจ ุงูุฎุฏูุฉ</h3>
                        <button onclick="this.closest('.fixed').remove()" class="text-gray-500 hover:text-gray-700 text-2xl">&times;</button>
                    </div>
                    
                    <div class="space-y-4">
                        <div class="bg-orange-50 p-4 rounded-lg">
                            <h4 class="font-bold text-orange-700 mb-2">ูุนูููุงุช ุงูุฎุฏูุฉ</h4>
                            <p class="text-gray-700"><strong>ููุน ุงูุฎุฏูุฉ:</strong> ${request.serviceTitle}</p>
                            <p class="text-gray-700"><strong>ุงูุญุงูุฉ:</strong> 
                                <span class="px-2 py-1 rounded-full text-xs font-semibold ${request.status === 'pending' ? 'bg-yellow-100 text-yellow-800' : 'bg-green-100 text-green-800'}">
                                    ${request.status === 'pending' ? 'ููุฏ ุงููุฑุงุฌุนุฉ' : 'ุชู ุงูุชูุงุตู'}
                                </span>
                            </p>
                        </div>
                        
                        <div class="bg-blue-50 p-4 rounded-lg">
                            <h4 class="font-bold text-blue-700 mb-2">ูุนูููุงุช ุงูุนููู</h4>
                            <p class="text-gray-700"><strong>ุงูุงุณู:</strong> ${request.clientName}</p>
                            <p class="text-gray-700"><strong>ุฑูู ุงููุงุชุณุงุจ:</strong> ${request.whatsapp}</p>
                            <p class="text-gray-700"><strong>ุชุงุฑูุฎ ุงูุทูุจ:</strong> ${request.createdAt}</p>
                            ${request.updatedAt ? `<p class="text-gray-700"><strong>ุขุฎุฑ ุชุญุฏูุซ:</strong> ${request.updatedAt}</p>` : ''}
                        </div>
                        
                        <div class="bg-gray-50 p-4 rounded-lg">
                            <h4 class="font-bold text-gray-700 mb-2">ุชูุงุตูู ุงููุดุฑูุน</h4>
                            <p class="text-gray-700 whitespace-pre-wrap">${request.details}</p>
                        </div>
                    </div>
                    
                    <div class="flex gap-4 justify-center mt-6">
                        <button onclick="copyWhatsAppLink('${request.whatsapp}', 'service')" class="bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition-colors">ุชูุงุตู ุนุจุฑ ูุงุชุณุงุจ</button>
                        ${request.status === 'pending' ? `<button onclick="updateServiceRequestStatus(${request.id}, 'contacted'); this.closest('.fixed').remove()" class="bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600 transition-colors">ุชู ุงูุชูุงุตู</button>` : ''}
                        <button onclick="this.closest('.fixed').remove()" class="bg-gray-500 text-white px-6 py-2 rounded-lg hover:bg-gray-600 transition-colors">ุฅุบูุงู</button>
                    </div>
                </div>
            `;
            document.body.appendChild(modalDiv);
        }

        function deleteServiceRequest(requestId) {
            const request = serviceRequests.find(r => r.id === requestId);
            if (!request) return;
            
            showCustomConfirm('ุญุฐู ุทูุจ ุงูุฎุฏูุฉ', `ูู ุฃูุช ูุชุฃูุฏ ูู ุญุฐู ุทูุจ ุงูุฎุฏูุฉ ูู "${request.clientName}"ุ`, () => {
                serviceRequests = serviceRequests.filter(r => r.id !== requestId);
                updateServiceRequests();
                showCustomAlert('ุชู ุงูุญุฐู', 'ุชู ุญุฐู ุทูุจ ุงูุฎุฏูุฉ ุจูุฌุงุญ');
            });
        }

        // Helper functions for Arabic translations
        function getInquiryTypeArabic(type) {
            const types = {
                'property-inquiry': 'ุงุณุชุนูุงู ุนู ุนูุงุฑ',
                'viewing-request': 'ุทูุจ ูุนุงููุฉ',
                'price-negotiation': 'ุชูุงูุถ ุนูู ุงูุณุนุฑ',
                'general-inquiry': 'ุงุณุชุนูุงู ุนุงู',
                'property-matching': 'ุชูููู ุนูุงุฑู'
            };
            return types[type] || type;
        }

        function getPriorityArabic(priority) {
            const priorities = {
                'normal': 'ุนุงุฏูุฉ',
                'high': 'ุนุงููุฉ',
                'urgent': 'ุนุงุฌูุฉ'
            };
            return priorities[priority] || priority;
        }

        function getStatusArabic(status) {
            const statuses = {
                'pending': 'ููุฏ ุงููุชุงุจุนุฉ',
                'contacted': 'ุชู ุงูุชูุงุตู',
                'scheduled': 'ููุนุฏ ูุญุฏุฏ',
                'completed': 'ููุชูู'
            };
            return statuses[status] || status;
        }

        function getPriorityBorderColor(priority) {
            const colors = {
                'normal': 'border-gray-300',
                'high': 'border-yellow-400',
                'urgent': 'border-red-400'
            };
            return colors[priority] || 'border-gray-300';
        }

        function getPriorityBadgeClass(priority) {
            const classes = {
                'normal': 'bg-gray-100 text-gray-800',
                'high': 'bg-yellow-100 text-yellow-800',
                'urgent': 'bg-red-100 text-red-800'
            };
            return classes[priority] || 'bg-gray-100 text-gray-800';
        }

        function getStatusBadgeClass(status) {
            const classes = {
                'pending': 'bg-yellow-100 text-yellow-800',
                'contacted': 'bg-green-100 text-green-800',
                'scheduled': 'bg-blue-100 text-blue-800',
                'completed': 'bg-purple-100 text-purple-800'
            };
            return classes[status] || 'bg-gray-100 text-gray-800';
        }

        function getServiceTypeArabic(type) {
            const types = {
                'apartment-design': 'ุชุตููู ุดูุฉ',
                'shop-design': 'ุชุตููู ูุญู',
                'turnkey': 'ุงุณุชูุงู ุนูู ุงูููุชุงุญ'
            };
            return types[type] || type;
        }

        // Services Management Functions
        function showAddServiceForm() {
            document.getElementById('add-service-form').classList.remove('hidden');
        }

        function hideAddServiceForm() {
            document.getElementById('add-service-form').classList.add('hidden');
            document.querySelector('#add-service-form form').reset();
        }

        function addNewService(event) {
            event.preventDefault();
            
            const title = document.getElementById('new-service-title').value;
            const category = document.getElementById('new-service-category').value;
            const icon = document.getElementById('new-service-icon').value;
            const price = document.getElementById('new-service-price').value;
            const description = document.getElementById('new-service-description').value;
            const featuresText = document.getElementById('new-service-features').value;
            const active = document.getElementById('new-service-active').checked;
            
            const features = featuresText.split('\n').filter(f => f.trim() !== '');
            
            const newService = {
                id: Date.now(),
                title: title,
                description: description,
                features: features,
                price: price,
                category: category,
                icon: icon,
                active: active,
                createdAt: new Date().toLocaleString('ar-EG'),
                createdBy: currentAdmin.fullName
            };
            
            contractingServices.push(newService);
            updateServicesList();
            updateHomeServices();
            hideAddServiceForm();
            
            showCustomAlert('ุชู ุจูุฌุงุญ', `ุชู ุฅุถุงูุฉ ุงูุฎุฏูุฉ "${title}" ุจูุฌุงุญ`);
            addNotification('ุฎุฏูุฉ ุฌุฏูุฏุฉ', `ุชู ุฅุถุงูุฉ ุฎุฏูุฉ ุฌุฏูุฏุฉ: ${title}`, 'success');
        }

        function updateServicesList() {
            const servicesList = document.getElementById('services-list');
            
            servicesList.innerHTML = contractingServices.map(service => `
                <div class="bg-orange-50 border border-orange-200 rounded-lg p-6">
                    <div class="flex justify-between items-start mb-4">
                        <div class="flex items-center gap-3">
                            <div class="text-3xl">${service.icon}</div>
                            <div>
                                <h4 class="font-bold text-orange-700 text-lg">${service.title}</h4>
                                <p class="text-sm text-gray-600">ุงููุฆุฉ: ${service.category}</p>
                            </div>
                        </div>
                        <div class="flex items-center gap-2">
                            <span class="px-3 py-1 rounded-full text-xs font-semibold ${service.active ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}">
                                ${service.active ? 'ูุดุทุฉ' : 'ุบูุฑ ูุดุทุฉ'}
                            </span>
                        </div>
                    </div>
                    
                    <p class="text-gray-600 mb-3">${service.description}</p>
                    
                    <div class="mb-3">
                        <h5 class="font-semibold text-gray-700 mb-2">ุงููููุฒุงุช:</h5>
                        <ul class="list-disc list-inside text-sm text-gray-600 space-y-1">
                            ${service.features.map(feature => `<li>${feature}</li>`).join('')}
                        </ul>
                    </div>
                    
                    <div class="mb-4">
                        <p class="text-lg font-bold text-orange-600">๐ฐ ${service.price}</p>
                    </div>
                    
                    <div class="text-xs text-gray-500 mb-4">
                        <p>ุชู ุงูุฅูุดุงุก: ${service.createdAt}</p>
                        ${service.createdBy ? `<p>ุจูุงุณุทุฉ: ${service.createdBy}</p>` : ''}
                    </div>
                    
                    <div class="flex gap-2 flex-wrap">
                        <button onclick="toggleServiceStatus(${service.id})" class="text-xs ${service.active ? 'bg-red-500 hover:bg-red-600' : 'bg-green-500 hover:bg-green-600'} text-white px-3 py-1 rounded transition-colors">
                            ${service.active ? 'ุฅูุบุงุก ุงูุชูุนูู' : 'ุชูุนูู'}
                        </button>
                        <button onclick="editService(${service.id})" class="text-xs bg-blue-500 text-white px-3 py-1 rounded hover:bg-blue-600 transition-colors">ุชุนุฏูู</button>
                        <button onclick="duplicateService(${service.id})" class="text-xs bg-purple-500 text-white px-3 py-1 rounded hover:bg-purple-600 transition-colors">ูุณุฎ</button>
                        <button onclick="deleteService(${service.id})" class="text-xs bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600 transition-colors">ุญุฐู</button>
                        <button onclick="viewServiceDetails(${service.id})" class="text-xs bg-gray-500 text-white px-3 py-1 rounded hover:bg-gray-600 transition-colors">ุนุฑุถ ุงูุชูุงุตูู</button>
                    </div>
                </div>
            `).join('') || '<p class="text-center text-gray-500 py-8">ูุง ุชูุฌุฏ ุฎุฏูุงุช ูุถุงูุฉ ุญุชู ุงูุขู</p>';
        }

        function updateHomeServices() {
            const homeServicesGrid = document.getElementById('home-services-grid');
            const activeServices = contractingServices.filter(service => service.active);
            
            if (activeServices.length === 0) {
                document.getElementById('contracting-services-section').style.display = 'none';
                return;
            }
            
            document.getElementById('contracting-services-section').style.display = 'block';
            
            homeServicesGrid.innerHTML = activeServices.map(service => `
                <div class="property-card bg-white rounded-2xl shadow-xl p-6 border-t-4 border-orange-500">
                    <div class="text-center mb-4">
                        <div class="text-4xl mb-3">${service.icon}</div>
                        <h4 class="text-xl font-bold text-orange-700 mb-2">${service.title}</h4>
                        <p class="text-gray-600 text-sm mb-3">${service.description}</p>
                        <div class="text-sm text-gray-600 mb-4">ููุงุณุชุนูุงู ุนู ุงูุฃุณุนุงุฑ ุชูุงุตู ูุนูุง</div>
                    </div>
                    <button onclick="requestServiceFromHome(${service.id})" class="w-full bg-orange-600 text-white py-3 rounded-xl text-lg font-semibold hover:bg-orange-700 transition-colors">
                        ุทูุจ ุงูุฎุฏูุฉ
                    </button>
                </div>
            `).join('');
        }

        function toggleServiceStatus(serviceId) {
            const service = contractingServices.find(s => s.id === serviceId);
            if (service) {
                service.active = !service.active;
                updateServicesList();
                updateHomeServices();
                
                const status = service.active ? 'ุชู ุชูุนูู' : 'ุชู ุฅูุบุงุก ุชูุนูู';
                showCustomAlert('ุชู ุงูุชุญุฏูุซ', `${status} ุงูุฎุฏูุฉ "${service.title}"`);
            }
        }

        function editService(serviceId) {
            const service = contractingServices.find(s => s.id === serviceId);
            if (!service) return;
            
            const modalDiv = document.createElement('div');
            modalDiv.className = 'fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4';
            modalDiv.innerHTML = `
                <div class="bg-white rounded-2xl p-6 max-w-2xl w-full max-h-full overflow-y-auto">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-xl font-bold text-orange-700">ุชุนุฏูู ุงูุฎุฏูุฉ</h3>
                        <button onclick="this.closest('.fixed').remove()" class="text-gray-500 hover:text-gray-700 text-2xl">&times;</button>
                    </div>
                    
                    <form onsubmit="updateService(event, ${serviceId})">
                        <div class="grid md:grid-cols-2 gap-4 mb-4">
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">ุนููุงู ุงูุฎุฏูุฉ</label>
                                <input type="text" id="edit-service-title" value="${service.title}" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:outline-none" required>
                            </div>
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">ุงููุฆุฉ</label>
                                <select id="edit-service-category" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:outline-none" required>
                                    <option value="ุชุตููู" ${service.category === 'ุชุตููู' ? 'selected' : ''}>ุชุตููู</option>
                                    <option value="ููุงููุงุช" ${service.category === 'ููุงููุงุช' ? 'selected' : ''}>ููุงููุงุช</option>
                                    <option value="ุชุดุทูุจุงุช" ${service.category === 'ุชุดุทูุจุงุช' ? 'selected' : ''}>ุชุดุทูุจุงุช</option>
                                    <option value="ุตูุงูุฉ" ${service.category === 'ุตูุงูุฉ' ? 'selected' : ''}>ุตูุงูุฉ</option>
                                    <option value="ุงุณุชุดุงุฑุงุช" ${service.category === 'ุงุณุชุดุงุฑุงุช' ? 'selected' : ''}>ุงุณุชุดุงุฑุงุช</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">ุงูุฃููููุฉ</label>
                                <select id="edit-service-icon" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:outline-none" required>
                                    <option value="๐" ${service.icon === '๐' ? 'selected' : ''}>๐ ุดูุฉ</option>
                                    <option value="๐ช" ${service.icon === '๐ช' ? 'selected' : ''}>๐ช ูุญู</option>
                                    <option value="๐ข" ${service.icon === '๐ข' ? 'selected' : ''}>๐ข ููุชุจ</option>
                                    <option value="๐๏ธ" ${service.icon === '๐๏ธ' ? 'selected' : ''}>๐๏ธ ุจูุงุก</option>
                                    <option value="๐" ${service.icon === '๐' ? 'selected' : ''}>๐ ููุชุงุญ</option>
                                    <option value="๐จ" ${service.icon === '๐จ' ? 'selected' : ''}>๐จ ุชุตููู</option>
                                    <option value="๐ง" ${service.icon === '๐ง' ? 'selected' : ''}>๐ง ุตูุงูุฉ</option>
                                    <option value="๐" ${service.icon === '๐' ? 'selected' : ''}>๐ ููุฏุณุฉ</option>
                                    <option value="๐ก" ${service.icon === '๐ก' ? 'selected' : ''}>๐ก ุฅุถุงุกุฉ</option>
                                    <option value="๐ช" ${service.icon === '๐ช' ? 'selected' : ''}>๐ช ููุงูุฐ</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">ุงูุณุนุฑ</label>
                                <input type="text" id="edit-service-price" value="${service.price}" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:outline-none" required>
                            </div>
                        </div>
                        <div class="mb-4">
                            <label class="block text-sm font-semibold text-gray-700 mb-2">ูุตู ุงูุฎุฏูุฉ</label>
                            <textarea id="edit-service-description" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:outline-none h-24" required>${service.description}</textarea>
                        </div>
                        <div class="mb-4">
                            <label class="block text-sm font-semibold text-gray-700 mb-2">ุงููููุฒุงุช (ูู ููุฒุฉ ูู ุณุทุฑ ูููุตู)</label>
                            <textarea id="edit-service-features" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:outline-none h-24" required>${service.features.join('\n')}</textarea>
                        </div>
                        <div class="mb-4">
                            <label class="flex items-center">
                                <input type="checkbox" id="edit-service-active" class="mr-2 w-5 h-5" ${service.active ? 'checked' : ''}>
                                <span class="font-semibold text-gray-700">ุฎุฏูุฉ ูุดุทุฉ</span>
                            </label>
                        </div>
                        <div class="flex gap-4 justify-end">
                            <button type="button" onclick="this.closest('.fixed').remove()" class="bg-gray-500 text-white px-6 py-2 rounded-lg hover:bg-gray-600 transition-colors">ุฅูุบุงุก</button>
                            <button type="submit" class="bg-orange-600 text-white px-6 py-2 rounded-lg hover:bg-orange-700 transition-colors">ุญูุธ ุงูุชุนุฏููุงุช</button>
                        </div>
                    </form>
                </div>
            `;
            document.body.appendChild(modalDiv);
        }

        function updateService(event, serviceId) {
            event.preventDefault();
            
            const serviceIndex = contractingServices.findIndex(s => s.id === serviceId);
            if (serviceIndex === -1) return;
            
            const title = document.getElementById('edit-service-title').value;
            const category = document.getElementById('edit-service-category').value;
            const icon = document.getElementById('edit-service-icon').value;
            const price = document.getElementById('edit-service-price').value;
            const description = document.getElementById('edit-service-description').value;
            const featuresText = document.getElementById('edit-service-features').value;
            const active = document.getElementById('edit-service-active').checked;
            
            const features = featuresText.split('\n').filter(f => f.trim() !== '');
            
            contractingServices[serviceIndex] = {
                ...contractingServices[serviceIndex],
                title: title,
                description: description,
                features: features,
                price: price,
                category: category,
                icon: icon,
                active: active,
                updatedAt: new Date().toLocaleString('ar-EG'),
                updatedBy: currentAdmin.fullName
            };
            
            updateServicesList();
            updateHomeServices();
            
            // Close modal
            event.target.closest('.fixed').remove();
            
            showCustomAlert('ุชู ุงูุชุญุฏูุซ', `ุชู ุชุญุฏูุซ ุงูุฎุฏูุฉ "${title}" ุจูุฌุงุญ`);
        }

        function duplicateService(serviceId) {
            const service = contractingServices.find(s => s.id === serviceId);
            if (!service) return;
            
            const duplicatedService = {
                ...service,
                id: Date.now(),
                title: service.title + ' (ูุณุฎุฉ)',
                active: false,
                createdAt: new Date().toLocaleString('ar-EG'),
                createdBy: currentAdmin.fullName
            };
            
            contractingServices.push(duplicatedService);
            updateServicesList();
            
            showCustomAlert('ุชู ุงููุณุฎ', `ุชู ูุณุฎ ุงูุฎุฏูุฉ "${service.title}" ุจูุฌุงุญ`);
        }

        function deleteService(serviceId) {
            const service = contractingServices.find(s => s.id === serviceId);
            if (!service) return;
            
            showCustomConfirm('ุญุฐู ุงูุฎุฏูุฉ', `ูู ุฃูุช ูุชุฃูุฏ ูู ุญุฐู ุงูุฎุฏูุฉ "${service.title}"ุ`, () => {
                contractingServices = contractingServices.filter(s => s.id !== serviceId);
                updateServicesList();
                updateHomeServices();
                showCustomAlert('ุชู ุงูุญุฐู', 'ุชู ุญุฐู ุงูุฎุฏูุฉ ุจูุฌุงุญ');
            });
        }

        function viewServiceDetails(serviceId) {
            const service = contractingServices.find(s => s.id === serviceId);
            if (!service) return;
            
            const modalDiv = document.createElement('div');
            modalDiv.className = 'fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4';
            modalDiv.innerHTML = `
                <div class="bg-white rounded-2xl p-6 max-w-2xl w-full max-h-full overflow-y-auto">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-xl font-bold text-orange-700">ุชูุงุตูู ุงูุฎุฏูุฉ</h3>
                        <button onclick="this.closest('.fixed').remove()" class="text-gray-500 hover:text-gray-700 text-2xl">&times;</button>
                    </div>
                    
                    <div class="text-center mb-6">
                        <div class="text-6xl mb-4">${service.icon}</div>
                        <h4 class="text-2xl font-bold text-orange-700 mb-2">${service.title}</h4>
                        <p class="text-gray-600 mb-2">ุงููุฆุฉ: ${service.category}</p>
                        <span class="px-3 py-1 rounded-full text-sm font-semibold ${service.active ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}">
                            ${service.active ? 'ุฎุฏูุฉ ูุดุทุฉ' : 'ุฎุฏูุฉ ุบูุฑ ูุดุทุฉ'}
                        </span>
                    </div>
                    
                    <div class="mb-6">
                        <h5 class="font-bold text-gray-700 mb-2">ูุตู ุงูุฎุฏูุฉ:</h5>
                        <p class="text-gray-600 mb-4">${service.description}</p>
                        
                        <h5 class="font-bold text-gray-700 mb-2">ุงููููุฒุงุช ุงููุชุถููุฉ:</h5>
                        <ul class="list-disc list-inside space-y-1 mb-4">
                            ${service.features.map(feature => `<li class="text-gray-600">${feature}</li>`).join('')}
                        </ul>
                        
                        <div class="bg-orange-50 p-4 rounded-lg mb-4">
                            <p class="text-lg font-bold text-orange-700">๐ฐ ุงูุณุนุฑ: ${service.price}</p>
                        </div>
                        
                        <div class="text-xs text-gray-500">
                            <p>ุชู ุงูุฅูุดุงุก: ${service.createdAt}</p>
                            ${service.createdBy ? `<p>ุจูุงุณุทุฉ: ${service.createdBy}</p>` : ''}
                            ${service.updatedAt ? `<p>ุขุฎุฑ ุชุญุฏูุซ: ${service.updatedAt}</p>` : ''}
                            ${service.updatedBy ? `<p>ุชู ุงูุชุญุฏูุซ ุจูุงุณุทุฉ: ${service.updatedBy}</p>` : ''}
                        </div>
                    </div>
                    
                    <div class="flex gap-4 justify-center">
                        <button onclick="editService(${service.id}); this.closest('.fixed').remove()" class="bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600 transition-colors">ุชุนุฏูู ุงูุฎุฏูุฉ</button>
                        <button onclick="this.closest('.fixed').remove()" class="bg-gray-500 text-white px-6 py-2 rounded-lg hover:bg-gray-600 transition-colors">ุฅุบูุงู</button>
                    </div>
                </div>
            `;
            document.body.appendChild(modalDiv);
        }

        function requestServiceFromHome(serviceId) {
            const service = contractingServices.find(s => s.id === serviceId);
            if (!service) return;
            
            const modalDiv = document.createElement('div');
            modalDiv.className = 'fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4';
            modalDiv.innerHTML = `
                <div class="bg-white rounded-2xl p-6 max-w-md w-full">
                    <div class="text-center mb-4">
                        <div class="text-4xl mb-2">${service.icon}</div>
                        <h3 class="text-xl font-bold text-orange-700">${service.title}</h3>
                        <p class="text-gray-600 text-sm">${service.description}</p>
                    </div>
                    
                    <form onsubmit="submitServiceRequest(event, ${serviceId})">
                        <div class="mb-4">
                            <label class="block text-sm font-semibold text-gray-700 mb-2">ุงุณู ุงูุนููู</label>
                            <input type="text" id="service-client-name" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:outline-none" required>
                        </div>
                        
                        <div class="mb-4">
                            <label class="block text-sm font-semibold text-gray-700 mb-2">ุฑูู ุงููุงุชุณุงุจ</label>
                            <input type="tel" id="service-whatsapp" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:outline-none" required>
                        </div>
                        
                        <div class="mb-4">
                            <label class="block text-sm font-semibold text-gray-700 mb-2">ุชูุงุตูู ุงููุดุฑูุน</label>
                            <textarea id="service-details" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:outline-none h-24" placeholder="ุงูุชุจ ุชูุงุตูู ุงููุดุฑูุน..." required></textarea>
                        </div>
                        
                        <div class="flex gap-4 justify-end">
                            <button type="button" onclick="this.closest('.fixed').remove()" class="bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition-colors">ุฅูุบุงุก</button>
                            <button type="submit" class="bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700 transition-colors">ุฅุฑุณุงู ุงูุทูุจ</button>
                        </div>
                    </form>
                </div>
            `;
            document.body.appendChild(modalDiv);
        }

        function submitServiceRequest(event, serviceId) {
            event.preventDefault();
            
            const service = contractingServices.find(s => s.id === serviceId);
            const clientName = document.getElementById('service-client-name').value;
            const whatsapp = document.getElementById('service-whatsapp').value;
            const details = document.getElementById('service-details').value;
            
            // Add to service requests
            const request = {
                id: Date.now(),
                serviceId: serviceId,
                serviceTitle: service ? service.title : 'ุฎุฏูุฉ ูุญุฐููุฉ',
                clientName: clientName,
                whatsapp: whatsapp,
                details: details,
                status: 'pending',
                createdAt: new Date().toLocaleString('ar-EG')
            };
            
            serviceRequests.push(request);
            
            // Add to contracting clients
            const contractingClient = {
                id: Date.now() + 1, // Different ID
                serviceId: serviceId,
                serviceTitle: service ? service.title : 'ุฎุฏูุฉ ูุญุฐููุฉ',
                serviceCategory: service ? service.category : 'ุบูุฑ ูุญุฏุฏ',
                clientName: clientName,
                whatsapp: whatsapp,
                projectDetails: details,
                status: 'pending',
                createdAt: new Date().toLocaleString('ar-EG'),
                source: 'website'
            };
            
            contractingClients.push(contractingClient);
            
            updateServiceRequests();
            updateContractingClients();
            
            // Close modal
            event.target.closest('.fixed').remove();
            
            addNotification('ุนููู ููุงููุงุช ุฌุฏูุฏ', `ุนููู ุฌุฏูุฏ: ${clientName} ููุฎุฏูุฉ: ${request.serviceTitle}`, 'info');
            showCustomAlert('ุชู ุจูุฌุงุญ', 'ุชู ุฅุฑุณุงู ุทูุจ ุงูุฎุฏูุฉ ุจูุฌุงุญ! ุณูุชู ุงูุชูุงุตู ูุนู ูุฑูุจุงู');
        }

        // Contracting Clients Management Functions
        function updateContractingClients() {
            const clientsList = document.getElementById('contracting-clients-list');
            const clientsCount = document.getElementById('contracting-clients-count');
            
            // Update count
            clientsCount.textContent = `${contractingClients.length} ุนููู`;
            
            // Update service filter options
            updateServiceFilterOptions();
            
            clientsList.innerHTML = contractingClients.length > 0 ? contractingClients.map(client => `
                <div class="bg-white p-6 rounded-lg border border-orange-200 hover:shadow-md transition-shadow">
                    <div class="flex justify-between items-start mb-4">
                        <div>
                            <h4 class="font-bold text-orange-700 text-lg">${client.clientName}</h4>
                            <p class="text-sm text-gray-600">๐ฑ ${client.whatsapp}</p>
                            <p class="text-sm text-gray-600">๐๏ธ ${client.serviceTitle}</p>
                            <p class="text-sm text-gray-600">๐ ${client.serviceCategory}</p>
                        </div>
                        <div class="flex items-center gap-2">
                            <span class="px-3 py-1 rounded-full text-xs font-semibold ${getContractingStatusBadgeClass(client.status)}">
                                ${getContractingStatusArabic(client.status)}
                            </span>
                            <span class="px-2 py-1 rounded-full text-xs bg-blue-100 text-blue-800">${client.source === 'website' ? 'ูููุน' : 'ูุฏูู'}</span>
                        </div>
                    </div>
                    
                    <div class="mb-4 p-3 bg-gray-50 rounded-lg">
                        <h5 class="font-semibold text-gray-700 mb-2">ุชูุงุตูู ุงููุดุฑูุน:</h5>
                        <p class="text-sm text-gray-600">${client.projectDetails}</p>
                    </div>
                    
                    <div class="mb-4 text-xs text-gray-500">
                        <p>ุชุงุฑูุฎ ุงูุชุณุฌูู: ${client.createdAt}</p>
                        ${client.lastContact ? `<p>ุขุฎุฑ ุชูุงุตู: ${client.lastContact}</p>` : ''}
                        ${client.notes ? `<p>ููุงุญุธุงุช: ${client.notes}</p>` : ''}
                    </div>
                    
                    <div class="flex gap-2 flex-wrap">
                        <button onclick="copyWhatsAppLink('${client.whatsapp}', 'contracting')" class="text-xs bg-green-500 text-white px-3 py-1 rounded hover:bg-green-600 transition-colors">๐ฑ ูุงุชุณุงุจ</button>
                        <button onclick="updateContractingClientStatus(${client.id})" class="text-xs bg-blue-500 text-white px-3 py-1 rounded hover:bg-blue-600 transition-colors">๐ ุชุญุฏูุซ ุงูุญุงูุฉ</button>
                        <button onclick="addClientNotes(${client.id})" class="text-xs bg-purple-500 text-white px-3 py-1 rounded hover:bg-purple-600 transition-colors">๐ ุฅุถุงูุฉ ููุงุญุธุงุช</button>
                        <button onclick="viewContractingClientDetails(${client.id})" class="text-xs bg-indigo-500 text-white px-3 py-1 rounded hover:bg-indigo-600 transition-colors">๐๏ธ ุงูุชูุงุตูู</button>
                        <button onclick="editContractingClient(${client.id})" class="text-xs bg-yellow-500 text-white px-3 py-1 rounded hover:bg-yellow-600 transition-colors">โ๏ธ ุชุนุฏูู</button>
                        <button onclick="deleteContractingClient(${client.id})" class="text-xs bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600 transition-colors">๐๏ธ ุญุฐู</button>
                    </div>
                </div>
            `).join('') : `
                <div class="text-center text-gray-500 py-8">
                    <div class="text-4xl mb-4">๐ท</div>
                    <p>ูุง ุชูุฌุฏ ุนููุงุก ููุงููุงุช ุญุชู ุงูุขู</p>
                </div>
            `;
        }

        function updateServiceFilterOptions() {
            const serviceFilter = document.getElementById('contracting-service-filter');
            const uniqueServices = [...new Set(contractingClients.map(c => c.serviceTitle))];
            
            serviceFilter.innerHTML = '<option value="">ุฌููุน ุงูุฎุฏูุงุช</option>' + 
                uniqueServices.map(service => `<option value="${service}">${service}</option>`).join('');
        }

        function filterContractingClients() {
            const searchTerm = document.getElementById('contracting-search').value.toLowerCase();
            const serviceFilter = document.getElementById('contracting-service-filter').value;
            const statusFilter = document.getElementById('contracting-status-filter').value;
            
            let filteredClients = contractingClients;
            
            if (searchTerm) {
                filteredClients = filteredClients.filter(client => 
                    client.clientName.toLowerCase().includes(searchTerm) ||
                    client.whatsapp.includes(searchTerm)
                );
            }
            
            if (serviceFilter) {
                filteredClients = filteredClients.filter(client => client.serviceTitle === serviceFilter);
            }
            
            if (statusFilter) {
                filteredClients = filteredClients.filter(client => client.status === statusFilter);
            }
            
            displayFilteredContractingClients(filteredClients);
        }

        function displayFilteredContractingClients(clients) {
            const clientsList = document.getElementById('contracting-clients-list');
            
            clientsList.innerHTML = clients.length > 0 ? clients.map(client => `
                <div class="bg-white p-6 rounded-lg border border-orange-200 hover:shadow-md transition-shadow">
                    <div class="flex justify-between items-start mb-4">
                        <div>
                            <h4 class="font-bold text-orange-700 text-lg">${client.clientName}</h4>
                            <p class="text-sm text-gray-600">๐ฑ ${client.whatsapp}</p>
                            <p class="text-sm text-gray-600">๐๏ธ ${client.serviceTitle}</p>
                            <p class="text-sm text-gray-600">๐ ${client.serviceCategory}</p>
                        </div>
                        <div class="flex items-center gap-2">
                            <span class="px-3 py-1 rounded-full text-xs font-semibold ${getContractingStatusBadgeClass(client.status)}">
                                ${getContractingStatusArabic(client.status)}
                            </span>
                        </div>
                    </div>
                    
                    <div class="mb-4 p-3 bg-gray-50 rounded-lg">
                        <h5 class="font-semibold text-gray-700 mb-2">ุชูุงุตูู ุงููุดุฑูุน:</h5>
                        <p class="text-sm text-gray-600">${client.projectDetails}</p>
                    </div>
                    
                    <div class="flex gap-2 flex-wrap">
                        <button onclick="copyWhatsAppLink('${client.whatsapp}', 'contracting')" class="text-xs bg-green-500 text-white px-3 py-1 rounded hover:bg-green-600 transition-colors">๐ฑ ูุงุชุณุงุจ</button>
                        <button onclick="updateContractingClientStatus(${client.id})" class="text-xs bg-blue-500 text-white px-3 py-1 rounded hover:bg-blue-600 transition-colors">๐ ุชุญุฏูุซ ุงูุญุงูุฉ</button>
                        <button onclick="viewContractingClientDetails(${client.id})" class="text-xs bg-indigo-500 text-white px-3 py-1 rounded hover:bg-indigo-600 transition-colors">๐๏ธ ุงูุชูุงุตูู</button>
                    </div>
                </div>
            `).join('') : `
                <div class="text-center text-gray-500 py-8">
                    <div class="text-4xl mb-4">๐</div>
                    <p>ูุง ุชูุฌุฏ ูุชุงุฆุฌ ูุทุงุจูุฉ ููุจุญุซ</p>
                </div>
            `;
        }

        function updateContractingClientStatus(clientId) {
            const client = contractingClients.find(c => c.id === clientId);
            if (!client) return;
            
            const modalDiv = document.createElement('div');
            modalDiv.className = 'fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4';
            modalDiv.innerHTML = `
                <div class="bg-white rounded-2xl p-6 max-w-md w-full">
                    <h3 class="text-xl font-bold text-orange-700 mb-4">ุชุญุฏูุซ ุญุงูุฉ ุงูุนููู</h3>
                    
                    <div class="mb-4">
                        <p class="text-gray-700 mb-2"><strong>ุงูุนููู:</strong> ${client.clientName}</p>
                        <p class="text-gray-700 mb-4"><strong>ุงูุฎุฏูุฉ:</strong> ${client.serviceTitle}</p>
                    </div>
                    
                    <form onsubmit="saveContractingClientStatus(event, ${clientId})">
                        <div class="mb-4">
                            <label class="block text-sm font-semibold text-gray-700 mb-2">ุงูุญุงูุฉ ุงูุฌุฏูุฏุฉ</label>
                            <select id="new-client-status" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:outline-none" required>
                                <option value="pending" ${client.status === 'pending' ? 'selected' : ''}>ููุฏ ุงููุฑุงุฌุนุฉ</option>
                                <option value="contacted" ${client.status === 'contacted' ? 'selected' : ''}>ุชู ุงูุชูุงุตู</option>
                                <option value="in-progress" ${client.status === 'in-progress' ? 'selected' : ''}>ููุฏ ุงูุชูููุฐ</option>
                                <option value="completed" ${client.status === 'completed' ? 'selected' : ''}>ููุชูู</option>
                            </select>
                        </div>
                        
                        <div class="mb-4">
                            <label class="block text-sm font-semibold text-gray-700 mb-2">ููุงุญุธุงุช ุงูุชุญุฏูุซ</label>
                            <textarea id="status-notes" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-orange-500 focus:outline-none h-20" placeholder="ุงูุชุจ ููุงุญุธุงุช ุญูู ุงูุชุญุฏูุซ..."></textarea>
                        </div>
                        
                        <div class="flex gap-4 justify-end">
                            <button type="button" onclick="this.closest('.fixed').remove()" class="bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition-colors">ุฅูุบุงุก</button>
                            <button type="submit" class="bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700 transition-colors">ุญูุธ ุงูุชุญุฏูุซ</button>
                        </div>
                    </form>
                </div>
            `;
            document.body.appendChild(modalDiv);
        }

        function saveContractingClientStatus(event, clientId) {
            event.preventDefault();
            
            const client = contractingClients.find(c => c.id === clientId);
            if (!client) return;
            
            const newStatus = document.getElementById('new-client-status').value;
            const notes = document.getElementById('status-notes').value;
            
            client.status = newStatus;
            client.lastContact = new Date().toLocaleString('ar-EG');
            
            if (notes) {
                client.notes = (client.notes || '') + `\n[${client.lastContact}] ${notes}`;
            }
            
            updateContractingClients();
            
            // Close modal
            event.target.closest('.fixed').remove();
            
            showCustomAlert('ุชู ุงูุชุญุฏูุซ', `ุชู ุชุญุฏูุซ ุญุงูุฉ ุงูุนููู ุฅูู "${getContractingStatusArabic(newStatus)}"`);
        }

        function addClientNotes(clientId) {
            const client = contractingClients.find(c => c.id === clientId);
            if (!client) return;
            
            const modalDiv = document.createElement('div');
            modalDiv.className = 'fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4';
            modalDiv.innerHTML = `
                <div class="bg-white rounded-2xl p-6 max-w-md w-full">
                    <h3 class="text-xl font-bold text-purple-700 mb-4">ุฅุถุงูุฉ ููุงุญุธุงุช</h3>
                    
                    <div class="mb-4">
                        <p class="text-gray-700 mb-2"><strong>ุงูุนููู:</strong> ${client.clientName}</p>
                        <p class="text-gray-700 mb-4"><strong>ุงูุฎุฏูุฉ:</strong> ${client.serviceTitle}</p>
                    </div>
                    
                    ${client.notes ? `
                    <div class="mb-4 p-3 bg-gray-50 rounded-lg max-h-32 overflow-y-auto">
                        <h5 class="font-semibold text-gray-700 mb-2">ุงูููุงุญุธุงุช ุงูุณุงุจูุฉ:</h5>
                        <p class="text-sm text-gray-600 whitespace-pre-wrap">${client.notes}</p>
                    </div>
                    ` : ''}
                    
                    <form onsubmit="saveClientNotes(event, ${clientId})">
                        <div class="mb-4">
                            <label class="block text-sm font-semibold text-gray-700 mb-2">ููุงุญุธุฉ ุฌุฏูุฏุฉ</label>
                            <textarea id="new-client-notes" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none h-24" placeholder="ุงูุชุจ ุงูููุงุญุธุฉ ุงูุฌุฏูุฏุฉ..." required></textarea>
                        </div>
                        
                        <div class="flex gap-4 justify-end">
                            <button type="button" onclick="this.closest('.fixed').remove()" class="bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition-colors">ุฅูุบุงุก</button>
                            <button type="submit" class="bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors">ุญูุธ ุงูููุงุญุธุฉ</button>
                        </div>
                    </form>
                </div>
            `;
            document.body.appendChild(modalDiv);
        }

        function saveClientNotes(event, clientId) {
            event.preventDefault();
            
            const client = contractingClients.find(c => c.id === clientId);
            if (!client) return;
            
            const newNote = document.getElementById('new-client-notes').value;
            const timestamp = new Date().toLocaleString('ar-EG');
            
            client.notes = (client.notes || '') + `\n[${timestamp}] ${newNote}`;
            client.lastContact = timestamp;
            
            updateContractingClients();
            
            // Close modal
            event.target.closest('.fixed').remove();
            
            showCustomAlert('ุชู ุงูุญูุธ', 'ุชู ุญูุธ ุงูููุงุญุธุฉ ุจูุฌุงุญ');
        }

        function viewContractingClientDetails(clientId) {
            const client = contractingClients.find(c => c.id === clientId);
            if (!client) return;
            
            const modalDiv = document.createElement('div');
            modalDiv.className = 'fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4';
            modalDiv.innerHTML = `
                <div class="bg-white rounded-2xl p-6 max-w-2xl w-full max-h-full overflow-y-auto">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-xl font-bold text-orange-700">ุชูุงุตูู ุนููู ุงูููุงููุงุช</h3>
                        <button onclick="this.closest('.fixed').remove()" class="text-gray-500 hover:text-gray-700 text-2xl">&times;</button>
                    </div>
                    
                    <div class="grid md:grid-cols-2 gap-6">
                        <div class="bg-orange-50 p-4 rounded-lg">
                            <h4 class="font-bold text-orange-700 mb-3">ูุนูููุงุช ุงูุนููู</h4>
                            <div class="space-y-2 text-sm">
                                <p><strong>ุงูุงุณู:</strong> ${client.clientName}</p>
                                <p><strong>ุฑูู ุงููุงุชุณุงุจ:</strong> ${client.whatsapp}</p>
                                <p><strong>ุชุงุฑูุฎ ุงูุชุณุฌูู:</strong> ${client.createdAt}</p>
                                <p><strong>ุงููุตุฏุฑ:</strong> ${client.source === 'website' ? 'ุงููููุน ุงูุฅููุชุฑููู' : 'ุฅุฏุฎุงู ูุฏูู'}</p>
                                ${client.lastContact ? `<p><strong>ุขุฎุฑ ุชูุงุตู:</strong> ${client.lastContact}</p>` : ''}
                            </div>
                        </div>
                        
                        <div class="bg-blue-50 p-4 rounded-lg">
                            <h4 class="font-bold text-blue-700 mb-3">ุชูุงุตูู ุงูุฎุฏูุฉ</h4>
                            <div class="space-y-2 text-sm">
                                <p><strong>ููุน ุงูุฎุฏูุฉ:</strong> ${client.serviceTitle}</p>
                                <p><strong>ุงููุฆุฉ:</strong> ${client.serviceCategory}</p>
                                <p><strong>ุงูุญุงูุฉ:</strong> 
                                    <span class="px-2 py-1 rounded-full text-xs font-semibold ${getContractingStatusBadgeClass(client.status)}">
                                        ${getContractingStatusArabic(client.status)}
                                    </span>
                                </p>
                            </div>
                        </div>
                        
                        <div class="bg-gray-50 p-4 rounded-lg md:col-span-2">
                            <h4 class="font-bold text-gray-700 mb-3">ุชูุงุตูู ุงููุดุฑูุน</h4>
                            <p class="text-sm text-gray-600 whitespace-pre-wrap">${client.projectDetails}</p>
                        </div>
                        
                        ${client.notes ? `
                        <div class="bg-purple-50 p-4 rounded-lg md:col-span-2">
                            <h4 class="font-bold text-purple-700 mb-3">ุงูููุงุญุธุงุช ูุงููุชุงุจุนุฉ</h4>
                            <div class="max-h-32 overflow-y-auto">
                                <p class="text-sm text-gray-600 whitespace-pre-wrap">${client.notes}</p>
                            </div>
                        </div>
                        ` : ''}
                    </div>
                    
                    <div class="flex gap-4 justify-center mt-6">
                        <button onclick="copyWhatsAppLink('${client.whatsapp}', 'contracting')" class="bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition-colors">ุชูุงุตู ุนุจุฑ ูุงุชุณุงุจ</button>
                        <button onclick="updateContractingClientStatus(${client.id}); this.closest('.fixed').remove()" class="bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600 transition-colors">ุชุญุฏูุซ ุงูุญุงูุฉ</button>
                        <button onclick="this.closest('.fixed').remove()" class="bg-gray-500 text-white px-6 py-2 rounded-lg hover:bg-gray-600 transition-colors">ุฅุบูุงู</button>
                    </div>
                </div>
            `;
            document.body.appendChild(modalDiv);
        }

        function editContractingClient(clientId) {
            const client = contractingClients.find(c => c.id === clientId);
            if (!client) return;
            
            const modalDiv = document.createElement('div');
            modalDiv.className = 'fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4';
            modalDiv.innerHTML = `
                <div class="bg-white rounded-2xl p-6 max-w-md w-full">
                    <h3 class="text-xl font-bold text-yellow-700 mb-4">ุชุนุฏูู ุจูุงูุงุช ุงูุนููู</h3>
                    
                    <form onsubmit="saveContractingClientEdit(event, ${clientId})">
                        <div class="mb-4">
                            <label class="block text-sm font-semibold text-gray-700 mb-2">ุงุณู ุงูุนููู</label>
                            <input type="text" id="edit-client-name" value="${client.clientName}" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-yellow-500 focus:outline-none" required>
                        </div>
                        
                        <div class="mb-4">
                            <label class="block text-sm font-semibold text-gray-700 mb-2">ุฑูู ุงููุงุชุณุงุจ</label>
                            <input type="tel" id="edit-client-whatsapp" value="${client.whatsapp}" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-yellow-500 focus:outline-none" required>
                        </div>
                        
                        <div class="mb-4">
                            <label class="block text-sm font-semibold text-gray-700 mb-2">ุชูุงุตูู ุงููุดุฑูุน</label>
                            <textarea id="edit-client-details" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-yellow-500 focus:outline-none h-24" required>${client.projectDetails}</textarea>
                        </div>
                        
                        <div class="flex gap-4 justify-end">
                            <button type="button" onclick="this.closest('.fixed').remove()" class="bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition-colors">ุฅูุบุงุก</button>
                            <button type="submit" class="bg-yellow-600 text-white px-4 py-2 rounded-lg hover:bg-yellow-700 transition-colors">ุญูุธ ุงูุชุนุฏููุงุช</button>
                        </div>
                    </form>
                </div>
            `;
            document.body.appendChild(modalDiv);
        }

        function saveContractingClientEdit(event, clientId) {
            event.preventDefault();
            
            const client = contractingClients.find(c => c.id === clientId);
            if (!client) return;
            
            client.clientName = document.getElementById('edit-client-name').value;
            client.whatsapp = document.getElementById('edit-client-whatsapp').value;
            client.projectDetails = document.getElementById('edit-client-details').value;
            client.lastUpdated = new Date().toLocaleString('ar-EG');
            
            updateContractingClients();
            
            // Close modal
            event.target.closest('.fixed').remove();
            
            showCustomAlert('ุชู ุงูุชุญุฏูุซ', 'ุชู ุชุญุฏูุซ ุจูุงูุงุช ุงูุนููู ุจูุฌุงุญ');
        }

        function deleteContractingClient(clientId) {
            const client = contractingClients.find(c => c.id === clientId);
            if (!client) return;
            
            showCustomConfirm('ุญุฐู ุงูุนููู', `ูู ุฃูุช ูุชุฃูุฏ ูู ุญุฐู ุงูุนููู "${client.clientName}"ุ`, () => {
                contractingClients = contractingClients.filter(c => c.id !== clientId);
                updateContractingClients();
                showCustomAlert('ุชู ุงูุญุฐู', 'ุชู ุญุฐู ุงูุนููู ุจูุฌุงุญ');
            });
        }

        function exportContractingClients() {
            if (contractingClients.length === 0) {
                showCustomAlert('ูุง ุชูุฌุฏ ุจูุงูุงุช', 'ูุง ุชูุฌุฏ ุนููุงุก ููุงููุงุช ูุชุตุฏูุฑูุง');
                return;
            }
            
            let csvContent = 'ุงุณู ุงูุนููู,ุฑูู ุงููุงุชุณุงุจ,ููุน ุงูุฎุฏูุฉ,ุงููุฆุฉ,ุงูุญุงูุฉ,ุชูุงุตูู ุงููุดุฑูุน,ุชุงุฑูุฎ ุงูุชุณุฌูู,ุงููุตุฏุฑ\n';
            
            contractingClients.forEach(client => {
                csvContent += `"${client.clientName}","${client.whatsapp}","${client.serviceTitle}","${client.serviceCategory}","${getContractingStatusArabic(client.status)}","${client.projectDetails.replace(/"/g, '""')}","${client.createdAt}","${client.source === 'website' ? 'ูููุน' : 'ูุฏูู'}"\n`;
            });
            
            const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            const url = URL.createObjectURL(blob);
            link.setAttribute('href', url);
            link.setAttribute('download', `ุนููุงุก_ุงูููุงููุงุช_${new Date().toLocaleDateString('ar-EG')}.csv`);
            link.style.visibility = 'hidden';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            showCustomAlert('ุชู ุงูุชุตุฏูุฑ', 'ุชู ุชุตุฏูุฑ ุจูุงูุงุช ุนููุงุก ุงูููุงููุงุช ุจูุฌุงุญ');
        }

        function getContractingStatusArabic(status) {
            const statuses = {
                'pending': 'ููุฏ ุงููุฑุงุฌุนุฉ',
                'contacted': 'ุชู ุงูุชูุงุตู',
                'in-progress': 'ููุฏ ุงูุชูููุฐ',
                'completed': 'ููุชูู'
            };
            return statuses[status] || status;
        }

        function getContractingStatusBadgeClass(status) {
            const classes = {
                'pending': 'bg-yellow-100 text-yellow-800',
                'contacted': 'bg-blue-100 text-blue-800',
                'in-progress': 'bg-orange-100 text-orange-800',
                'completed': 'bg-green-100 text-green-800'
            };
            return classes[status] || 'bg-gray-100 text-gray-800';
        }

        // Initialize with home section
        showSection('home');
        
        // Initialize location counts
        setTimeout(() => {
            updateLocationCounts();
            updateServicesList();
            updateHomeServices();
            updateContractingClients();
        }, 100);
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'992a775781bae28e',t:'MTc2MTE1MTUzOC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
